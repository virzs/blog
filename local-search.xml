<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>mockjs导致arrayBuffer类型数据错误</title>
    <link href="/blog/2021/07/27/ckrlinr4n0000vgw17s7vaho7/"/>
    <url>/blog/2021/07/27/ckrlinr4n0000vgw17s7vaho7/</url>
    
    <content type="html"><![CDATA[<p>最近有个需求在网页中查看 CAD，引入 CAD SDK 后报错，但在 demo 项目中可以正常使用。</p><p>由于 SDK 是商用的，这里就不方便放出。</p><p>经过断点调试，输出 response 后发现，正式项目和 demo 项目返回的类型不一样。</p><p>正式项目为 <code>MockXMLHttpRequest</code>，而 demo项目为 <code>XMLHttpRequest</code>。</p><p>经过搜索，网上提到是 Mockjs 的问题。</p><p>下面是查找到的原因。</p><p><a href="https://segmentfault.com/a/1190000022746160">mockjs踩坑</a></p><p>mockjs原理：<br>在引入了Mock之后，mock.js内部会创建一个MockXMLHttpRequest来替代原生的XMLHttpRequest，如果有原生的XHR请求来，则拦截，替换成MockXMLHttpRequest对象，然后再匹配对应的url，如果没有，就发送网络请求。</p><p>FbxLoader是继承自Three.js的FileLoader对象，调用load方法时，会先判断传入的url是否是Base64格式的DataURI,如果是，则进行解析并返回，如果不是，就创建XHR请求。</p><p>到底是哪里出问题了呢？<br>调试到FbxLoader里，发现在load成功后，得到返回值是buffer，需要进行解析，responseType需要是’arrayBuffer’类型！问题来了，在mockjs的MockXMLHTTP中没有把responseType进行设置，而是设置成了空值，所以，无法解析出buffer对象。</p><p>查看正式项目后，发现几乎没有地方使用Mockjs，因此把Mockjs卸载后就可以正常加载 CAD 图纸了。</p><p>也有人提到 arrayBuffer 和 blob 类型的数据都会出现问题。</p><p>通过设置 Mockjs 而不是卸载来解决问题。</p><p>这个方法我没有测试，因此也不保证可用。</p><div class="code-wrapper"><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Mock<span class="token punctuation">.</span><span class="token class-name">XHR</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>proxy_open <span class="token operator">=</span> Mock<span class="token punctuation">.</span><span class="token class-name">XHR</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>open<span class="token punctuation">;</span>Mock<span class="token punctuation">.</span><span class="token class-name">XHR</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">open</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> responseType <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>responseType<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">proxy_open</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>custom<span class="token punctuation">.</span>xhr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>responseType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>custom<span class="token punctuation">.</span>xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> responseType        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>网络请求</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>antd3中Select组件自定义suffixIcon下拉收起不旋转解决方案</title>
    <link href="/blog/2021/06/23/ckq8ud55q00309sw1cc61eurq/"/>
    <url>/blog/2021/06/23/ckq8ud55q00309sw1cc61eurq/</url>
    
    <content type="html"><![CDATA[<p>今天有个需求需要修改Select组件的arrow图标，经过查询文档得知可通过suffixIcon修改。</p><blockquote><p>注意showArrow的值为true</p></blockquote><p>如下代码，当我修改完成后，点击Select 图标却没有旋转。</p><div class="code-wrapper"><pre class="line-numbers language-react" data-language="react"><code class="language-react">&lt;Select suffixIcon&#x3D;&#123;&lt;img src&#x3D;&quot;xxxx.png&quot; &#x2F;&gt;&#125; &#x2F;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>查找antd的Issues也没有得到有效的解决方法。</p><p>干脆直接对比使用suffixIcon和默认情况下的不同。</p><p>找到下面的样式</p><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.ant-select-open .ant-select-arrow-icon svg</span> <span class="token punctuation">&#123;</span>    <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">-ms-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>自定义suffixIcon后并没有应用以上样式。其中 <code>ant-select-arrow-icon</code> 为一个i标签，内部是svg标签，而自定义的icon外部并没有包裹此标签。</p><p>修改一下suffixIcon的内容并将img换为svg。</p><div class="code-wrapper"><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Select</span>  <span class="token attr-name">suffixIcon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>&#123;</span>    <span class="token attr-name">&lt;i</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>anticon anticon-down ant-select-arrow-icon<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span><span class="token punctuation">></span></span>svg内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>  &#125;/><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>这样就可以正常实现功能了</p>]]></content>
    
    
    <categories>
      
      <category>解决方案，Ant Design</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>umi中在单独的ts文件中使用国际化功能</title>
    <link href="/blog/2021/06/03/ckq8ud55r00329sw1b535e9i1/"/>
    <url>/blog/2021/06/03/ckq8ud55r00329sw1b535e9i1/</url>
    
    <content type="html"><![CDATA[<h2 id="引入-intl"><a href="#引入-intl" class="headerlink" title="引入 intl"></a>引入 <code>intl</code></h2><div class="code-wrapper"><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getIntl<span class="token punctuation">,</span> getLocale <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token keyword">const</span> intl <span class="token operator">=</span> <span class="token function">getIntrl</span><span class="token punctuation">(</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><h2 id="在-function-中使用"><a href="#在-function-中使用" class="headerlink" title="在 function 中使用"></a>在 <code>function</code> 中使用</h2><div class="code-wrapper"><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> intl<span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>id<span class="token operator">:</span> <span class="token string">'app.test'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><h2 id="在数组或对象中使用"><a href="#在数组或对象中使用" class="headerlink" title="在数组或对象中使用"></a>在数组或对象中使用</h2><div class="code-wrapper"><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> intl<span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>id<span class="token operator">:</span> <span class="token string">'app.test'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>使用技巧</category>
      
      <category>umi</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JSON.parse解析双引号嵌套单引号格式的数据</title>
    <link href="/blog/2021/04/28/ckq8ud55l002q9sw13p6sddci/"/>
    <url>/blog/2021/04/28/ckq8ud55l002q9sw13p6sddci/</url>
    
    <content type="html"><![CDATA[<p>示例:</p><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">"['123', '456', '789']"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>当存在这种数据时 <code>JSON.parse</code> 无法直接解析，会提示 <code>SyntaxError: Unexpected token &#39; in JSON at position 1</code> 的错误。</p><p>解决方案:</p><ul><li><code>eval()</code> eval语法可以简单方便的解决 <code>JSON.parse</code> 无法解析的问题，但这个语法不推荐使用。它会将传入的字符串当做 JavaScript 代码进行执行。这有可能会导致被运行恶意代码，而且它必须调用JS解释器会比其他替代方法更慢。</li><li><code>str.replace(/&#39;/g, &#39;&quot;&#39;)</code> 推荐使用 <code>replace()</code> 将单引号替换为双引号，然后再使用 <code>JSON.parse</code>。</li></ul><p>示例:</p><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">"['123', '456', '789']"</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">'</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'"'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 输出</span><span class="token punctuation">[</span> <span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token string">'456'</span><span class="token punctuation">,</span> <span class="token string">'789'</span> <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>MaterialUI封装全局Snackbar组件</title>
    <link href="/blog/2021/04/23/ckq8ud55m002t9sw13xx6dvb8/"/>
    <url>/blog/2021/04/23/ckq8ud55m002t9sw13xx6dvb8/</url>
    
    <content type="html"><![CDATA[<p>最近在写点小项目，使用的是Material UI，这个UI库中没有类似Ant里可以全局使用的message组件，只有Snackbar消息条组件，但这种使用方式显然不够灵活，本来想试试自己造个轮子，但在翻看Material UI的文档时发现<a href="https://material-ui.com/zh/components/snackbars/#positioned-snackbars">Snackbar组件</a>文档最后有一个<a href="https://iamhosseindhv.com/notistack">notistack</a>方案来以更灵活的方式使用Snackbar组件。</p><h2 id="本文章中使用依赖的信息"><a href="#本文章中使用依赖的信息" class="headerlink" title="本文章中使用依赖的信息"></a>本文章中使用依赖的信息</h2><div class="code-wrapper"><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"notistack"</span><span class="token operator">:</span> <span class="token string">"^1.0.6"</span><span class="token punctuation">,</span>  <span class="token property">"@material-ui/core"</span><span class="token operator">:</span> <span class="token string">"^4.11.3"</span><span class="token punctuation">,</span>  <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"17.0.2"</span><span class="token punctuation">,</span>  <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"17.0.2"</span><span class="token punctuation">,</span>  <span class="token property">"react-scripts"</span><span class="token operator">:</span> <span class="token string">"4.0.0"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h2 id="相关文档"><a href="#相关文档" class="headerlink" title="相关文档"></a>相关文档</h2><p><a href="https://material-ui.com/zh/components/snackbars/#positioned-snackbars">Material-UI Snackbar组件文档</a></p><p><a href="https://iamhosseindhv.com/notistack">notistack文档</a></p><h2 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h2><p>官方文档对于使用的说明很详细，这里就简单写写。</p><p>如果希望直接查看在线代码，请直接跳转至文末<em>本篇代码</em>。</p><p>使用 <code>notistack</code> 时必须在外部包裹 <code>SnackbarProvider</code> 组件。</p><p>如果使用了Material UI 的 <code>ThemeProvider</code> 组件，则 <code>SnackbarProvider</code> 组件必须位于 <code>ThemeProvider</code> 组件内部。</p><div class="code-wrapper"><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> SnackbarProvider <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'notistack'</span><span class="token punctuation">;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SnackbarProvider</span></span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SnackbarProvider</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><code>SnackbarProvider</code> 组件会传入两个方法：<code>enqueueSnackbar</code> 和 <code>closeSnackbar</code>。</p><p><code>enqueueSnackbar</code> 用于添加一个消息到队列中。<a href="https://iamhosseindhv.com/notistack#enqueuesnackbar">官方文档说明</a></p><p><code>closeSnackbar</code> 用于关闭消息。<a href="https://iamhosseindhv.com/notistack#closesnackbar">官方文档说明</a></p><p><a href="https://iamhosseindhv.com/notistack/api#mutual">官方Api文档</a></p><h3 id="在React-Class-Component中使用"><a href="#在React-Class-Component中使用" class="headerlink" title="在React Class Component中使用"></a>在React Class Component中使用</h3><div class="code-wrapper"><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> withSnackbar<span class="token punctuation">,</span> ProviderContext <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"notistack"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Button <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@material-ui/core"</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">ClassDemoPropsType</span> <span class="token keyword">extends</span> <span class="token class-name">ProviderContext</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">ClassDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span>Component<span class="token operator">&lt;</span>ClassDemoPropsType<span class="token operator">></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> ClassDemoPropsType</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token function-variable function">handleButtonClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> enqueueSnackbar <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props    <span class="token comment">// 使用enqueueSnackbar创建一条消息</span>    <span class="token function">enqueueSnackbar</span><span class="token punctuation">(</span>      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">类组件，点击按钮</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>        variant<span class="token operator">:</span> <span class="token string">'success'</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>        <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contained<span class="token punctuation">"</span></span>        <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span>        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleButtonClick<span class="token punctuation">&#125;</span></span>      <span class="token punctuation">></span></span><span class="token plain-text">        类组件中触发      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 注入snackbar</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withSnackbar</span><span class="token punctuation">(</span>ClassDemo<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h2 id="在React-Function-Component中使用"><a href="#在React-Function-Component中使用" class="headerlink" title="在React Function Component中使用"></a>在React Function Component中使用</h2><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Button <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@material-ui/core"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> useSnackbar <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"notistack"</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">FunctionDemo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> enqueueSnackbar <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">useSnackbar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">buttonClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">enqueueSnackbar</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">函数式组件，点击按钮</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>      variant<span class="token operator">:</span> <span class="token string">'success'</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contained<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>buttonClick<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">      函数式组件中触发    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> FunctionDemo<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="封装-SnackbarProvider-组件"><a href="#封装-SnackbarProvider-组件" class="headerlink" title="封装 SnackbarProvider 组件"></a>封装 <code>SnackbarProvider</code> 组件</h3><p>可以将 <code>SnackbarProvider</code> 组件封装一次，免去后续直接修改根组件文件。</p><div class="code-wrapper"><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> SnackbarProvider <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"notistack"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> SnackbarOrigin <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@material-ui/core"</span><span class="token punctuation">;</span><span class="token comment">// 最大数量</span><span class="token keyword">const</span> <span class="token constant">MAX_SNACK</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token comment">// 自动隐藏时间，单位毫秒</span><span class="token keyword">const</span> <span class="token constant">AUTO_HIDE_DURATION</span> <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span><span class="token comment">// 消息条位置</span><span class="token keyword">const</span> <span class="token constant">POSITION</span><span class="token operator">:</span> SnackbarOrigin <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  vertical<span class="token operator">:</span> <span class="token string">"top"</span><span class="token punctuation">,</span>  horizontal<span class="token operator">:</span> <span class="token string">"right"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">NotistackWrapper</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> children <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SnackbarProvider</span></span>      <span class="token attr-name">maxSnack</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token constant">MAX_SNACK</span><span class="token punctuation">&#125;</span></span>      <span class="token attr-name">autoHideDuration</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token constant">AUTO_HIDE_DURATION</span><span class="token punctuation">&#125;</span></span>      <span class="token attr-name">anchorOrigin</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token constant">POSITION</span><span class="token punctuation">&#125;</span></span>    <span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token punctuation">&#123;</span>children<span class="token punctuation">&#125;</span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SnackbarProvider</span></span><span class="token punctuation">></span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>在根组件使用 <code>NotistackWrapper</code> 组件替代之前未封装的 <code>SnackbarProvider</code> 组件。</p><h2 id="本篇代码"><a href="#本篇代码" class="headerlink" title="本篇代码"></a>本篇代码</h2><iframe src="https://codesandbox.io/embed/material-ui-global-snackbar-gi5rp?fontsize=14&hidenavigation=1&theme=dark&view=preview"     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"     title="Material UI global SnackBar"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe>]]></content>
    
    
    <categories>
      
      <category>实用技巧</category>
      
      <category>MaterialUI</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>hexo多级分类和并列分类设置</title>
    <link href="/blog/2021/04/17/ckq8ud55n002u9sw14m4aad3u/"/>
    <url>/blog/2021/04/17/ckq8ud55n002u9sw14m4aad3u/</url>
    
    <content type="html"><![CDATA[<h1 id="hexo文章分类设置"><a href="#hexo文章分类设置" class="headerlink" title="hexo文章分类设置"></a>hexo文章分类设置</h1><p>hexo中提供了 <code>categories</code> 分类设置，但官方文档对于此处的写法说明比较模糊</p><p>普通分类设置:</p><div class="code-wrapper"><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">categories: category<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>多层分类设置：</p><div class="code-wrapper"><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">categories: [parent, children]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>并列分类设置:</p><div class="code-wrapper"><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">categories:<span class="token list punctuation">-</span> parent<span class="token list punctuation">-</span> parent<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>并列分类及多层分类同时使用:</p><div class="code-wrapper"><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">categories:<span class="token list punctuation">-</span> [parent, children]<span class="token list punctuation">-</span> [parent, children]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>也可以这样:</p><div class="code-wrapper"><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">categories:<span class="token list punctuation">-</span> category<span class="token list punctuation">-</span> [parent, children]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>以上的写法基本上可以覆盖日常写作需求</p><p>还可以这样写:</p><div class="code-wrapper"><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">categories: [[parent, children], [parent, children]]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>这种写法和并列+多层分类效果相同</p>]]></content>
    
    
    <categories>
      
      <category>hexo使用日常</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>MaterialUI结合react-hook-form 1 (从一个简单的表单开始)</title>
    <link href="/blog/2021/04/16/ckq8ud55l002r9sw1gs5l496q/"/>
    <url>/blog/2021/04/16/ckq8ud55l002r9sw1gs5l496q/</url>
    
    <content type="html"><![CDATA[<h2 id="相关依赖及版本"><a href="#相关依赖及版本" class="headerlink" title="相关依赖及版本"></a>相关依赖及版本</h2><div class="code-wrapper"><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"@material-ui.core"</span><span class="token operator">:</span> <span class="token string">"4.11.3"</span><span class="token punctuation">,</span>  <span class="token property">"react-hook-form"</span><span class="token operator">:</span> <span class="token string">"7.1.1"</span><span class="token punctuation">,</span>  <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"17.0.2"</span><span class="token punctuation">,</span>  <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"17.0.2"</span><span class="token punctuation">,</span>  <span class="token property">"react-scripts"</span><span class="token operator">:</span> <span class="token string">"4.0.0"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>本系列所有文章示例中的依赖均以上述为标准，或者查看对应示例代码CodeSandbox中的版本。</p><h2 id="react-hook-form-简单介绍"><a href="#react-hook-form-简单介绍" class="headerlink" title="react-hook-form 简单介绍"></a>react-hook-form 简单介绍</h2><p>React Hook Form 是一个高性能、灵活。抑郁校验的表单库。可以用更少的代码获得更好的性能。</p><p>详细信息请查看<a href="https://react-hook-form.com/">React Hook Form官方文档</a>。</p><h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><p>实现一个带有输入名称、网址来添加书签的表单</p><h2 id="编写代码"><a href="#编写代码" class="headerlink" title="编写代码"></a>编写代码</h2><h3 id="基础代码"><a href="#基础代码" class="headerlink" title="基础代码"></a>基础代码</h3><p>引入需要的模块</p><div class="code-wrapper"><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Controller<span class="token punctuation">,</span> useForm<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"react-hook-forn"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>Botton<span class="token punctuation">,</span> TextEield<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@material-ui/core"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>定义接口</p><div class="code-wrapper"><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">FormType</span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><p>编写form组件</p><div class="code-wrapper"><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TextField</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>名称<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span> <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outlined<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TextField</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>网址<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span> <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outlined<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>这是一个最基础的表单，不包含事件。</p><p>Materal UI 对于表单部分的描述简单，仅有按钮、输入框等组件。从这点上对比Ant Design React的form组件显得过于简单。但同时简单意味着可以根据需求做二次封装，相比Antd的拿来就可以用，Material UI则需要一些额外的东西才可以实现效果。</p><p>因此使用React Hook Form显然是一个方便的选择。但它的文档中案例均以原生为基础，没有涉及到UI库的案例，这就导致使用UI库结合React Hook Form上手时往往会出现很多意外的问题。</p><p>使用 <code>useForm</code> 和 <code>Controller</code></p><div class="code-wrapper"><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>control<span class="token punctuation">,</span> handleSubmit<span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useForm</span><span class="token generic class-name"><span class="token operator">&lt;</span>FormType<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token keyword">as</span> FormType<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token operator">:</span> FormType</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">setValue</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">        </span><span class="token punctuation">&#123;</span><span class="token comment">/* ... */</span><span class="token punctuation">&#125;</span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><code>useForm()</code> 参数请查看：<a href="https://react-hook-form.com/api/useform">useForm Api</a>，这里我们需要 <code>control</code> 和 <code>handleSubmit</code> 这两个部分。</p><p><code>control</code> 用于将组件注册到React Hook Form</p><p><code>handlSubmit</code> 则是表单校验通过时返回数据的事件</p><h3 id="使用-Controller-组件控制输入框"><a href="#使用-Controller-组件控制输入框" class="headerlink" title="使用 Controller 组件控制输入框"></a>使用 <code>Controller</code> 组件控制输入框</h3><div class="code-wrapper"><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> control<span class="token punctuation">,</span> handleSubmit <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useForm</span><span class="token generic class-name"><span class="token operator">&lt;</span>formType<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token keyword">as</span> formType<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token operator">:</span> formType</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">setValue</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">        &lt;Controller          control=</span><span class="token punctuation">&#123;</span>control<span class="token punctuation">&#125;</span><span class="token plain-text">          name="name"          render=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> field<span class="token operator">:</span> <span class="token punctuation">&#123;</span> onChange<span class="token punctuation">,</span> ref <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> display<span class="token operator">:</span> <span class="token string">"block"</span><span class="token punctuation">,</span> margin<span class="token operator">:</span> <span class="token string">"10px 0"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TextField</span></span>                  <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>名称<span class="token punctuation">"</span></span>                  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span>                  <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outlined<span class="token punctuation">"</span></span>                  <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>onChange<span class="token punctuation">&#125;</span></span>                  <span class="token attr-name">inputRef</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>ref<span class="token punctuation">&#125;</span></span>                <span class="token punctuation">/></span></span><span class="token plain-text">              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">        />        &lt;Controller          control=</span><span class="token punctuation">&#123;</span>control<span class="token punctuation">&#125;</span><span class="token plain-text">          name="url"          render=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span>field<span class="token operator">:</span> <span class="token punctuation">&#123;</span> onChange<span class="token punctuation">,</span> ref <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> display<span class="token operator">:</span> <span class="token string">"block"</span><span class="token punctuation">,</span> margin<span class="token operator">:</span> <span class="token string">"10px 0"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TextField</span></span>                  <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>网址<span class="token punctuation">"</span></span>                  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span>                  <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outlined<span class="token punctuation">"</span></span>                  <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>onChange<span class="token punctuation">&#125;</span></span>                  <span class="token attr-name">inputRef</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>ref<span class="token punctuation">&#125;</span></span>                <span class="token punctuation">/></span></span><span class="token plain-text">              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">        />        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contained<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">          提交        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token plain-text">      数据：</span><span class="token punctuation">&#123;</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>主要使用的属性：control、name、render具体请看<a href="https://react-hook-form.com/api/usecontroller/controller">Controller Api</a></p><h3 id="添加校验"><a href="#添加校验" class="headerlink" title="添加校验"></a>添加校验</h3><p>现在表单就可以正常使用了，接下来还需要添加校验</p><p><code>Controller</code> 中有一个名为 <code>rules</code> 的属性具体参数参考 <code>useForm()</code> 的 <a href="https://react-hook-form.com/api/useform/register"><code>register</code></a> 属性。</p><div class="code-wrapper"><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token operator">&lt;</span>Controller  <span class="token punctuation">&#123;</span><span class="token operator">...</span><span class="token punctuation">&#125;</span>  rules<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>resuired<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token comment">// 设置必填</span><span class="token operator">/</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><p>现在最基本的使用方式就是这样了，最后是完整的例子：</p><h2 id="本文案例-CodeSandbox"><a href="#本文案例-CodeSandbox" class="headerlink" title="本文案例(CodeSandbox)"></a>本文案例(CodeSandbox)</h2><iframe src="https://codesandbox.io/embed/icy-water-llt0i?fontsize=14&hidenavigation=1&theme=dark"     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"     title="icy-water-llt0i"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe>]]></content>
    
    
    <categories>
      
      <category>实用技巧</category>
      
      <category>MaterialUI</category>
      
      <category>MaterialUI结合react-hook-form</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>配置post存放位置</title>
    <link href="/blog/2021/04/15/ckq8ud55q002z9sw1e5ut7cs1/"/>
    <url>/blog/2021/04/15/ckq8ud55q002z9sw1e5ut7cs1/</url>
    
    <content type="html"><![CDATA[<h1 id="hexo配置新建post的位置"><a href="#hexo配置新建post的位置" class="headerlink" title="hexo配置新建post的位置"></a>hexo配置新建post的位置</h1><p>使用 <code>hexo new post &lt;post_name&gt;</code> 新建文章时，会默认在 <code>_post</code> 文件夹下生成。这种做法虽然简单，但文章过多的话将不利于查看<br>因此需要修改默认的 <code>new_post_name</code> 实现功能</p><p>打开 <code>_config.yml</code> 文件</p><div class="code-wrapper"><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">new_post_name: :title.md<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>这是一个默认的配置，现在要实现以年月为路径存放文章，修改上面的配置</p><div class="code-wrapper"><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">new_post_name: :year&#x2F;:month&#x2F;:title.md<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>这样新建文章将会是这样的路径：<code>/_post/&lt;year&gt;/&lt;month&gt;/&lt;title&gt;.md</code></p><p>当然 <code>new_post_name</code> 还可以配置生成的文章名，例如</p><div class="code-wrapper"><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">new_post_name: :year-:month-:day-:title.md<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>这样的话生成的文章名为 <code>&lt;year&gt;-&lt;month&gt;-&lt;day&gt;-&lt;title&gt;.md</code> 格式，例如 <code>2021-04-15-test.md</code></p><p><a href="https://hexo.io/zh-cn/docs/writing">官方文档对new_post_name说明</a></p>]]></content>
    
    
    <categories>
      
      <category>hexo使用日常</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>hexo主题及配置GithubPage</title>
    <link href="/blog/2021/04/14/ckq8ud55o002w9sw11omv5yhz/"/>
    <url>/blog/2021/04/14/ckq8ud55o002w9sw11omv5yhz/</url>
    
    <content type="html"><![CDATA[<h1 id="hexo主题、简单配置及Github-Page配置"><a href="#hexo主题、简单配置及Github-Page配置" class="headerlink" title="hexo主题、简单配置及Github Page配置"></a>hexo主题、简单配置及Github Page配置</h1><h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><p>这里我选用Fluid主题</p><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> hexo-theme-fluid<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>更多配置详细参考<a href="https://hexo.fluid-dev.com/docs/">Fluid官方文档</a></p><h3 id="Github-Page"><a href="#Github-Page" class="headerlink" title="Github Page"></a>Github Page</h3><p>首先在github新建一个仓库，我新建的名称为blog</p><p>安装hexo-deployer-git</p><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> hexo-deployer-git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>在_config.yml中添加以下配置</p><div class="code-wrapper"><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">deploy:   type: git  repo: https:&#x2F;&#x2F;github.com&#x2F;&lt;username&gt;&#x2F;&lt;project&gt;  branch: gh-pages<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><p>主要需要关注repo和branch配置</p><p>repo为 <code>https://github.com/virzs/virzs.github.io</code> 时branch需要指定为master分支，配置完成后地址为 <code>https://virzs.github.io/</code></p><p>repo为 <code>https://github.com/virzs/blog</code> 时branch需要指定为gh-pages分支，配置完成后地址为 <code>https://virzs.github.io/blog/</code></p><p><em>此处virzs为我的用户名，virzs.github.io和blog为仓库名</em></p><p>执行 <code>hexo clean &amp;&amp; hexo deploy</code></p><p><em>hexo clean命令会清除缓存文件和已生成的静态文件</em></p><p><em>hexo deploy命令会部署网站</em></p><p>打开<code>github</code>仓库<code>settings</code>，找到pages设置，设置<code>source</code>，如果仓库名为 <code>&lt;username&gt;.github.io</code> 类型，选择<code>master</code>分支 <code>/(root)</code> 文件夹。如果仓库名为 <code>&lt;repo&gt;</code> 类型，则选择<code>gh-pages</code>分支，文件夹同样设置为 <code>/(root)</code> 。点击<code>save</code>按钮 github会提示github page的链接。点击进入即可访问博客。</p>]]></content>
    
    
    <categories>
      
      <category>hexo使用日常</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>从wordpress迁移到hexo</title>
    <link href="/blog/2021/04/14/ckq8ud55o002x9sw148ak9nbb/"/>
    <url>/blog/2021/04/14/ckq8ud55o002x9sw148ak9nbb/</url>
    
    <content type="html"><![CDATA[<h1 id="从wordpress迁移到hexo"><a href="#从wordpress迁移到hexo" class="headerlink" title="从wordpress迁移到hexo"></a>从wordpress迁移到hexo</h1><p>最近阿里云数据库到期，考虑到费用问题及日常使用频率，决定将博客换到hexo。</p><p>此文章先测试下发布文章</p><p>其实很早听说过hexo，而没有使用是因为hexo给我的感觉不像是一款产品，对使用有一定学习成本</p><p>而放弃wordpress一方面因为数据库到期，另一方面是因为受到骚扰评论困扰，而且wordpress使用起来感觉过重</p>]]></content>
    
    
    <categories>
      
      <category>hexo使用日常</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Antd React Form Instance created by `useForm` is not connected to any Form element. Forget to pass `form` prop 错误解决方案</title>
    <link href="/blog/2021/02/01/341/"/>
    <url>/blog/2021/02/01/341/</url>
    
    <content type="html"><![CDATA[<p>问题原因：Model中Form为渲染时使用useForm方法</p><p>解决方案：Model 添加_forceRender_强制渲染Model</p>]]></content>
    
    
    <categories>
      
      <category>实用技巧</category>
      
      <category>Ant Design</category>
      
      <category>错误解决方案</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Antd React Tree控件自定义展示效果</title>
    <link href="/blog/2021/01/24/337/"/>
    <url>/blog/2021/01/24/337/</url>
    
    <content type="html"><![CDATA[<p>最近在用React做项目，使用到antd作为ui，发现官网一些案例说明不是很详细</p><div class="code-wrapper"><pre class="line-numbers language-json" data-language="json"><code class="language-json">const data = <span class="token punctuation">[</span>  name<span class="token operator">:</span>'test'<span class="token punctuation">,</span>  children<span class="token operator">:</span><span class="token punctuation">[</span>    name<span class="token operator">:</span>'child'  <span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>有一个这样的数据格式，与官网案例不同的是需要显示的字段为name，官网为title，而且官网的字段中包含key</p><p>文档中说明可以使用 TreeNode 自定义显示，但又没有案例说明，下面是一个简单实现Tree自定义显示的例子</p><div class="code-wrapper"><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Tree <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"antd"</span><span class="token punctuation">;</span><span class="token comment">//引入Tree控件</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> TreeNode <span class="token punctuation">&#125;</span> <span class="token operator">=</span> Tree<span class="token punctuation">;</span><span class="token comment">//引入TreeNode控件</span><span class="token keyword">class</span> <span class="token class-name">TreeDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span>Component<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">></span> <span class="token punctuation">&#123;</span>  <span class="token comment">// eslint-disable-next-line @typescript-eslint/no-useless-constructor</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">&#123;</span>       menu<span class="token operator">:</span> <span class="token punctuation">[</span>        name<span class="token operator">:</span><span class="token string">'test'</span><span class="token punctuation">,</span>        children<span class="token operator">:</span><span class="token punctuation">[</span>          name<span class="token operator">:</span><span class="token string">'child'</span>        <span class="token punctuation">]</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token comment">//递归处理数据</span>  <span class="token function-variable function">loop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token operator">:</span> Array<span class="token operator">&lt;</span>object<span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token punctuation">(</span>        <span class="token comment">//测试数据中key为name字段，实际开发中应当使用id等不重复字段</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token punctuation">&#125;</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">          </span><span class="token punctuation">&#123;</span>item<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span>            <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loop</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">)</span>            <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">&#125;</span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TreeNode</span></span><span class="token punctuation">></span></span>      <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tree</span></span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loop</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>menu<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tree</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>以上方式为antd 3x 至 antd 4x的方式，在4x中不推荐，Tree控件的children即将被废弃，推荐使用titleRender方式</p><div class="code-wrapper"><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Tree <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"antd"</span><span class="token punctuation">;</span><span class="token comment">//引入Tree控件</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">TreeDemo</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span>Component<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">></span> <span class="token punctuation">&#123;</span>  <span class="token comment">// eslint-disable-next-line @typescript-eslint/no-useless-constructor</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">&#123;</span>       menu<span class="token operator">:</span> <span class="token punctuation">[</span>        name<span class="token operator">:</span><span class="token string">'test'</span><span class="token punctuation">,</span>        children<span class="token operator">:</span><span class="token punctuation">[</span>          name<span class="token operator">:</span><span class="token string">'child'</span>        <span class="token punctuation">]</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token comment">//递归处理数据</span>  loop <span class="token operator">=</span> <span class="token punctuation">(</span>arr<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>object<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">any</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      item<span class="token punctuation">.</span>key <span class="token operator">=</span> item<span class="token punctuation">.</span>id<span class="token punctuation">;</span>      <span class="token keyword">return</span> item<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span>        <span class="token operator">?</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span>item<span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loop</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>        <span class="token operator">:</span> item<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tree</span></span>              <span class="token attr-name">titleRender</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token parameter">nodeData<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>nodeData<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>              <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span>              <span class="token attr-name">treeData</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loop</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>menu<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span>            <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tree</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>虽然此方式可以自定义渲染title，但数据源中不存在key值时依旧会提示key undefind。因此推荐递归处理数据后渲染</p>]]></content>
    
    
    <categories>
      
      <category>实用技巧</category>
      
      <category>Ant Design</category>
      
      <category>解决方案</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JS实现手机号隐藏中间4位</title>
    <link href="/blog/2020/11/26/322/"/>
    <url>/blog/2020/11/26/322/</url>
    
    <content type="html"><![CDATA[<h3 id="使用字符串分割的方式实现"><a href="#使用字符串分割的方式实现" class="headerlink" title="使用字符串分割的方式实现"></a>使用字符串分割的方式实现</h3><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'12345678922'</span><span class="token punctuation">;</span><span class="token keyword">let</span> pre <span class="token operator">=</span>  str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> next <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> result  <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>pre<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">****</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>next<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="使用数组方法实现"><a href="#使用数组方法实现" class="headerlink" title="使用数组方法实现"></a>使用数组方法实现</h3><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> tel <span class="token operator">=</span> <span class="token string">'12345678922'</span><span class="token punctuation">;</span>tel <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">+</span> tel<span class="token punctuation">;</span><span class="token keyword">var</span> ary <span class="token operator">=</span> tel<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ary<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"****"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> tel1 <span class="token operator">=</span> ary<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//tel1为操作后的手机号</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="使用字符串替换方法"><a href="#使用字符串替换方法" class="headerlink" title="使用字符串替换方法"></a>使用字符串替换方法</h3><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> tel <span class="token operator">=</span> <span class="token string">'12345678922'</span><span class="token punctuation">;</span>tel <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">+</span> tel<span class="token punctuation">;</span><span class="token keyword">var</span> tel1 <span class="token operator">=</span>tel<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>tel<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"****"</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tel1<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="使用正则方法"><a href="#使用正则方法" class="headerlink" title="使用正则方法"></a>使用正则方法</h3><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> tel <span class="token operator">=</span> <span class="token string">'12345678922'</span><span class="token punctuation">;</span>tel <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">+</span> tel<span class="token punctuation">;</span><span class="token keyword">var</span> reg<span class="token operator">=</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\d&#123;3&#125;)\d&#123;4&#125;(\d&#123;4&#125;)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token keyword">var</span> tel1 <span class="token operator">=</span> tel<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">"$1****$2"</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tel1<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>js实现base64加密</title>
    <link href="/blog/2020/10/23/313/"/>
    <url>/blog/2020/10/23/313/</url>
    
    <content type="html"><![CDATA[<p>解密</p><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> <span class="token function-variable function">b64EncodeUnicode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token comment">//解密</span>  <span class="token keyword">return</span> <span class="token function">btoa</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">%([0-9A-F]&#123;2&#125;)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> p1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token string">'0x'</span> <span class="token operator">+</span> p1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>加密</p><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> <span class="token function-variable function">b64DecodeUnicode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token comment">//加密</span>  <span class="token keyword">return</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span><span class="token function">atob</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">'%'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">'00'</span> <span class="token operator">+</span> c<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>vue中使用vue-quill-editor</title>
    <link href="/blog/2020/09/30/310/"/>
    <url>/blog/2020/09/30/310/</url>
    
    <content type="html"><![CDATA[<h4 id="rich-text-editor-vue"><a href="#rich-text-editor-vue" class="headerlink" title="rich-text-editor.vue"></a>rich-text-editor.vue</h4><div class="code-wrapper"><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;  &lt;div class&#x3D;&quot;editor-container&quot;&gt;    &lt;quill-editor      v-model&#x3D;&quot;content&quot;      ref&#x3D;&quot;richTextEditor&quot;      :options&#x3D;&quot;option&quot;      @blur&#x3D;&quot;onEditorBlur($event)&quot;      @focus&#x3D;&quot;onEditorFocus($event)&quot;      @change&#x3D;&quot;onEditorChange($event)&quot;      @ready&#x3D;&quot;onEditorReady($event)&quot;    &gt;&lt;&#x2F;quill-editor&gt;    &lt;div class&#x3D;&quot;word-limit&quot; v-if&#x3D;&quot;showWordLimit&quot;&gt;      &lt;span v-if&#x3D;&quot;currentWords&gt;0&quot;&gt;大约还可以输入&#123;&#123; currentWords &#125;&#125;个字&lt;&#x2F;span&gt;      &lt;span v-else&gt;已达到最大字数限制&lt;&#x2F;span&gt;&lt;&#x2F;div&gt;  &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;import controller from &quot;.&#x2F;controller&#x2F;editor.controller&quot;;import &quot;.&#x2F;style&#x2F;edit.style.scss&quot;;export default controller;&lt;&#x2F;script&gt;&lt;style scoped&gt;&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="editor-controller-js"><a href="#editor-controller-js" class="headerlink" title="editor.controller.js"></a>editor.controller.js</h4><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/** 引入样式*/</span><span class="token keyword">import</span> <span class="token string">"quill/dist/quill.core.css"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">"quill/dist/quill.snow.css"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">"quill/dist/quill.bubble.css"</span><span class="token punctuation">;</span><span class="token comment">/** 引入编辑器组件*/</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>quillEditor<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue-quill-editor/src"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>addQuillTitle<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"../language/zh-CN"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Quill <span class="token keyword">from</span> <span class="token string">'quill'</span><span class="token punctuation">;</span><span class="token keyword">let</span> fontSizeStyle <span class="token operator">=</span> Quill<span class="token punctuation">.</span><span class="token function">import</span><span class="token punctuation">(</span><span class="token string">'attributors/style/size'</span><span class="token punctuation">)</span>fontSizeStyle<span class="token punctuation">.</span>whitelist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'12px'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'16px'</span><span class="token punctuation">,</span> <span class="token string">'18px'</span><span class="token punctuation">,</span> <span class="token string">'20px'</span><span class="token punctuation">,</span> <span class="token string">'22px'</span><span class="token punctuation">,</span> <span class="token string">'24px'</span><span class="token punctuation">]</span>Quill<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>fontSizeStyle<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token string">"rich-text-editor"</span><span class="token punctuation">,</span>  props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    totalWords<span class="token operator">:</span> <span class="token punctuation">&#123;</span>      type<span class="token operator">:</span> Number<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">10000</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    content<span class="token operator">:</span> <span class="token punctuation">&#123;</span>      type<span class="token operator">:</span> String<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    showWordLimit<span class="token operator">:</span> <span class="token punctuation">&#123;</span>      type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      content<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>      currentWords<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>      option<span class="token operator">:</span> <span class="token punctuation">&#123;</span>        theme<span class="token operator">:</span> <span class="token string">'snow'</span><span class="token punctuation">,</span>        placeholder<span class="token operator">:</span> <span class="token string">'编辑文章内容'</span><span class="token punctuation">,</span>        modules<span class="token operator">:</span> <span class="token punctuation">&#123;</span>          toolbar<span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span><span class="token string">'bold'</span><span class="token punctuation">,</span> <span class="token string">'italic'</span><span class="token punctuation">,</span> <span class="token string">'underline'</span><span class="token punctuation">,</span> <span class="token string">'strike'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token comment">//加粗，斜体，下划线，删除线</span>            <span class="token punctuation">[</span><span class="token string">'blockquote'</span><span class="token punctuation">,</span> <span class="token string">'code-block'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token comment">//引用，代码块</span>            <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">'header'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'header'</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token comment">// 标题，键值对的形式；1、2表示字体大小</span>            <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">'list'</span><span class="token operator">:</span> <span class="token string">'ordered'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'list'</span><span class="token operator">:</span> <span class="token string">'bullet'</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token comment">//列表</span>            <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">'script'</span><span class="token operator">:</span> <span class="token string">'sub'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'script'</span><span class="token operator">:</span> <span class="token string">'super'</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token comment">// 上下标</span>            <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">'indent'</span><span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'indent'</span><span class="token operator">:</span> <span class="token string">'+1'</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token comment">// 缩进</span>            <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">'direction'</span><span class="token operator">:</span> <span class="token string">'rtl'</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>             <span class="token comment">// 文本方向</span>            <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">'size'</span><span class="token operator">:</span> fontSizeStyle<span class="token punctuation">.</span>whitelist<span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 字体大小</span>            <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">'header'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token comment">//几级标题</span>            <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">'color'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">'background'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token comment">// 字体颜色，字体背景颜色</span>            <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">'align'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'center'</span><span class="token punctuation">,</span> <span class="token string">'right'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token comment">//对齐方式</span>            <span class="token punctuation">[</span><span class="token string">'clean'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token comment">//清除字体样式</span>            <span class="token comment">// ['image'],    //上传图片、上传视频</span>          <span class="token punctuation">]</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  components<span class="token operator">:</span> <span class="token punctuation">&#123;</span>quillEditor<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">addQuillTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/** 编辑器准备完成事件*/</span>    <span class="token function">onEditorReady</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wordLimit</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'ready'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// console.log('editor ready', data)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token comment">/** 失去焦点事件*/</span>    <span class="token function">onEditorBlur</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// console.log('editor blur', data)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token comment">/** 内容焦点事件*/</span>    <span class="token function">onEditorFocus</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// console.log('editor focus', data)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token comment">/** 内容改变事件*/</span>    <span class="token function">onEditorChange</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wordLimit</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'change'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'editChange'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span>      <span class="token comment">// console.log('editor change', data)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token comment">/** 内容转码*/</span>    <span class="token function">escapeStringHTML</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;lt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> str<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token comment">/** 显示剩余字数*/</span>    <span class="token function">wordLimit</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> mode</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">/** mode：ready编辑器准备完毕，change编辑器内容更改*/</span>      <span class="token keyword">let</span> opt <span class="token operator">=</span> mode <span class="token operator">===</span> <span class="token string">'ready'</span> <span class="token operator">?</span> data <span class="token operator">:</span> data<span class="token punctuation">.</span>quill<span class="token punctuation">;</span>      <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>content  opt<span class="token punctuation">.</span>text<span class="token punctuation">;</span><span class="token comment">//文本内容</span>      <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>totalWords <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token comment">//总字数</span>      opt<span class="token punctuation">.</span><span class="token function">deleteText</span><span class="token punctuation">(</span>total <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>currentWords <span class="token operator">=</span> total<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>currentWords <span class="token operator">=</span> total <span class="token operator">-</span> opt<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token function">editor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>richTextEditor<span class="token punctuation">.</span>quill<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="zh-CN-js"><a href="#zh-CN-js" class="headerlink" title="zh-CN.js"></a>zh-CN.js</h4><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/** 增加提示文字*/</span><span class="token keyword">const</span> titleConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token string">'ql-bold'</span><span class="token operator">:</span> <span class="token string">'加粗'</span><span class="token punctuation">,</span>  <span class="token string">'ql-color'</span><span class="token operator">:</span> <span class="token string">'颜色'</span><span class="token punctuation">,</span>  <span class="token string">'ql-font'</span><span class="token operator">:</span> <span class="token string">'字体'</span><span class="token punctuation">,</span>  <span class="token string">'ql-code'</span><span class="token operator">:</span> <span class="token string">'插入代码'</span><span class="token punctuation">,</span>  <span class="token string">'ql-italic'</span><span class="token operator">:</span> <span class="token string">'斜体'</span><span class="token punctuation">,</span>  <span class="token string">'ql-link'</span><span class="token operator">:</span> <span class="token string">'添加链接'</span><span class="token punctuation">,</span>  <span class="token string">'ql-background'</span><span class="token operator">:</span> <span class="token string">'背景颜色'</span><span class="token punctuation">,</span>  <span class="token string">'ql-size'</span><span class="token operator">:</span> <span class="token string">'字体大小'</span><span class="token punctuation">,</span>  <span class="token string">'ql-strike'</span><span class="token operator">:</span> <span class="token string">'删除线'</span><span class="token punctuation">,</span>  <span class="token string">'ql-script'</span><span class="token operator">:</span> <span class="token string">'上标/下标'</span><span class="token punctuation">,</span>  <span class="token string">'ql-underline'</span><span class="token operator">:</span> <span class="token string">'下划线'</span><span class="token punctuation">,</span>  <span class="token string">'ql-blockquote'</span><span class="token operator">:</span> <span class="token string">'引用'</span><span class="token punctuation">,</span>  <span class="token string">'ql-header'</span><span class="token operator">:</span> <span class="token string">'标题'</span><span class="token punctuation">,</span>  <span class="token string">'ql-indent'</span><span class="token operator">:</span> <span class="token string">'缩进'</span><span class="token punctuation">,</span>  <span class="token string">'ql-list'</span><span class="token operator">:</span> <span class="token string">'列表'</span><span class="token punctuation">,</span>  <span class="token string">'ql-align'</span><span class="token operator">:</span> <span class="token string">'文本对齐'</span><span class="token punctuation">,</span>  <span class="token string">'ql-direction'</span><span class="token operator">:</span> <span class="token string">'文本方向'</span><span class="token punctuation">,</span>  <span class="token string">'ql-code-block'</span><span class="token operator">:</span> <span class="token string">'代码块'</span><span class="token punctuation">,</span>  <span class="token string">'ql-formula'</span><span class="token operator">:</span> <span class="token string">'公式'</span><span class="token punctuation">,</span>  <span class="token string">'ql-image'</span><span class="token operator">:</span> <span class="token string">'图片'</span><span class="token punctuation">,</span>  <span class="token string">'ql-video'</span><span class="token operator">:</span> <span class="token string">'视频'</span><span class="token punctuation">,</span>  <span class="token string">'ql-clean'</span><span class="token operator">:</span> <span class="token string">'清除字体样式'</span><span class="token punctuation">&#125;</span><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">addQuillTitle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> oToolBar <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.ql-toolbar'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    aButton <span class="token operator">=</span> oToolBar<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    aSelect <span class="token operator">=</span> oToolBar<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'select'</span><span class="token punctuation">)</span>  aButton<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">'ql-script'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      item<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">'sub'</span> <span class="token operator">?</span> item<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'下标'</span> <span class="token operator">:</span> item<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'上标'</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">'ql-indent'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      item<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">'+1'</span> <span class="token operator">?</span> item<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'向右缩进'</span> <span class="token operator">:</span> item<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'向左缩进'</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      item<span class="token punctuation">.</span>title <span class="token operator">=</span> titleConfig<span class="token punctuation">[</span>item<span class="token punctuation">.</span>classList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  aSelect<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    item<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>title <span class="token operator">=</span> titleConfig<span class="token punctuation">[</span>item<span class="token punctuation">.</span>classList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="edit-style-js"><a href="#edit-style-js" class="headerlink" title="edit.style.js"></a>edit.style.js</h4><div class="code-wrapper"><pre class="line-numbers language-scss" data-language="scss"><code class="language-scss"><span class="token selector">p </span><span class="token punctuation">&#123;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.editor-container </span><span class="token punctuation">&#123;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 370px<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>  <span class="token selector">.word-limit </span><span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ebedf0<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #aaaaaa<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token selector">.quill-editor </span><span class="token punctuation">&#123;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> #f7f8fa<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>  <span class="token selector">.ql-toolbar </span><span class="token punctuation">&#123;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ebedf0<span class="token punctuation">;</span>    <span class="token selector">.ql-formats </span><span class="token punctuation">&#123;</span>      <span class="token property">margin-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.ql-picker.ql-size </span><span class="token punctuation">&#123;</span>      <span class="token selector">.ql-picker-label, .ql-picker-item </span><span class="token punctuation">&#123;</span>        <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">&#123;</span>          <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"14px"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">@for</span> <span class="token variable">$i</span> <span class="token keyword">from</span> 1 <span class="token keyword">through</span> <span class="token selector">8 </span><span class="token punctuation">&#123;</span>        .ql-picker-label[data-value=<span class="token string">"#&#123;10+$i*2&#125;px"</span>]<span class="token punctuation">,</span> .ql-picker-item[data-value=<span class="token string">"#&#123;10+$i*2&#125;px"</span><span class="token selector">] </span><span class="token punctuation">&#123;</span>          <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">&#123;</span>            <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"#&#123;10+$i*2&#125;px"</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        .ql-picker-item[data-value=<span class="token string">"#&#123;10+$i*2&#125;px"</span><span class="token selector">] </span><span class="token punctuation">&#123;</span>          <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">&#123;</span>            <span class="token property">font-size</span><span class="token punctuation">:</span> #<span class="token punctuation">&#123;</span>10+<span class="token variable">$i</span>*2<span class="token punctuation">&#125;</span>px<span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.ql-picker.ql-header </span><span class="token punctuation">&#123;</span>      <span class="token selector">.ql-picker-label, .ql-picker-item </span><span class="token punctuation">&#123;</span>        <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">&#123;</span>          <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"段落"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">@for</span> <span class="token variable">$i</span> <span class="token keyword">from</span> 1 <span class="token keyword">through</span> <span class="token selector">6 </span><span class="token punctuation">&#123;</span>        <span class="token selector">.ql-picker-label[data-value="<span class="token variable">#&#123;$i&#125;</span>"], .ql-picker-item[data-value="<span class="token variable">#&#123;$i&#125;</span>"] </span><span class="token punctuation">&#123;</span>          <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">&#123;</span>            <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"标题"</span> <span class="token string">"#&#123;$i&#125;"</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.ql-picker.ql-font </span><span class="token punctuation">&#123;</span>      <span class="token selector">.ql-picker-label, .ql-picker-item </span><span class="token punctuation">&#123;</span>        <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">&#123;</span>          <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"标准字体"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token selector">.ql-picker-label[data-value="serif"], .ql-picker-item[data-value="serif"] </span><span class="token punctuation">&#123;</span>        <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">&#123;</span>          <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"衬线字体"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token selector">.ql-picker-label[data-value="monospace"], .ql-picker-item[data-value="monospace"] </span><span class="token punctuation">&#123;</span>        <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">&#123;</span>          <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"等宽字体"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.ql-picker.ql-size, .ql-picker.ql-header, .ql-picker.ql-font </span><span class="token punctuation">&#123;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.ql-color-picker </span><span class="token punctuation">&#123;</span>    <span class="token selector">.ql-picker-options </span><span class="token punctuation">&#123;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 133px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.ql-container </span><span class="token punctuation">&#123;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ebedf0<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>Vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>tsconfig提示aliased imports are not supported解决方案</title>
    <link href="/blog/2020/08/30/307/"/>
    <url>/blog/2020/08/30/307/</url>
    
    <content type="html"><![CDATA[<p>问题详情：react-ts项目中配置路径提示不支持别名导入</p><p>compilerOptions. paths must not be set (aliased imports are not supported)</p><p>解决方案：</p><div class="code-wrapper"><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">//新建tsconfig.paths.json文件</span><span class="token comment">//在该文件中写入路径配置</span><span class="token punctuation">&#123;</span>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"."</span><span class="token punctuation">,</span>    <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"@@/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"@/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"@data"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/data/*"</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//将此文件引入tsconfig.json文件</span><span class="token punctuation">&#123;</span>    ...    <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"./tsconfig.paths.json"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>解决方案来源：</p><p><a href="https://github.com/facebook/create-react-app/issues/5118">https://github.com/facebook/create-react-app/issues/5118</a></p>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>TypeScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>TypeScript引入第三方模块提示无法找到该模块的声明文件解决方案</title>
    <link href="/blog/2020/08/09/304/"/>
    <url>/blog/2020/08/09/304/</url>
    
    <content type="html"><![CDATA[<p>一</p><p>安装该模块的typeScript版本</p><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">@types/xxxx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>二</p><p>项目根目录新建types文件夹</p><p>在tsconfig.json中include处添加types</p><p>在types文件夹中新建声明文件</p><div class="code-wrapper"><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">declare module &#39;XXX&#39; &#123;  const content: any  export &#x3D; content&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>TypeScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React笔记五：使用state</title>
    <link href="/blog/2020/06/11/292/"/>
    <url>/blog/2020/06/11/292/</url>
    
    <content type="html"><![CDATA[<p>1、新建组件</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">import React, &#123; useState &#125; from &#39;react&#39;;import VelButton from &#39;..&#x2F;velButton&#39;;import styles from &#39;.&#x2F;styles.module.scss&#39;;export default function Gradient() &#123;    const [color1, setColor1] &#x3D; useState(&#39;#00f260&#39;);&#x2F;&#x2F;使用useState绑定事件    const [color2, setColor2] &#x3D; useState(&#39;#0575e6&#39;);    function handleInputChange(e: any) &#123;        const &#123; name, value &#125; &#x3D; e.target;        if (Object.is(name, &#39;color1&#39;)) &#123;            setColor1(value);        &#125;        if (Object.is(name, &#39;color2&#39;)) &#123;            setColor2(value);        &#125;    &#125;    function handleClick() &#123;        setColor1(&#39;#00f260&#39;);        setColor2(&#39;#0575e6&#39;);    &#125;    return (        &lt;div className&#x3D;&#123;styles.container&#125; style&#x3D;&#123;&#123; background: &#96;linear-gradient(75deg,$&#123;color1&#125;,$&#123;color2&#125;)&#96; &#125;&#125;&gt;            &lt;div className&#x3D;&#123;styles.inputGroup&#125;&gt;                &lt;label htmlFor&#x3D;&quot;&quot;&gt;请选择第一个颜色&lt;&#x2F;label&gt;                &lt;input                    type&#x3D;&quot;color&quot;                    name&#x3D;&quot;color1&quot;                    value&#x3D;&#123;color1&#125;                    id&#x3D;&quot;&quot;                    className&#x3D;&#123;styles.inputColor&#125;                    onChange&#x3D;&#123;handleInputChange&#125; &#x2F;&gt;            &lt;&#x2F;div&gt;            &lt;div className&#x3D;&#123;styles.inputGroup&#125;&gt;                &lt;label htmlFor&#x3D;&quot;&quot;&gt;请选择第二个颜色&lt;&#x2F;label&gt;                &lt;input                    type&#x3D;&quot;color&quot;                    name&#x3D;&quot;color2&quot;                    value&#x3D;&#123;color2&#125;                    id&#x3D;&quot;&quot;                    className&#x3D;&#123;styles.inputColor&#125;                    onChange&#x3D;&#123;handleInputChange&#125; &#x2F;&gt;            &lt;&#x2F;div&gt;            &lt;div&gt;                &lt;VelButton type&#x3D;&quot;primary&quot; click&#x3D;&#123;handleClick&#125;&gt;重置为默认&lt;&#x2F;VelButton&gt;            &lt;&#x2F;div&gt;        &lt;&#x2F;div&gt;    )&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>2、使用组件</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;Gradient&gt;&lt;&#x2F;Gradient&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>React学习笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React笔记四：使用props</title>
    <link href="/blog/2020/06/11/284/"/>
    <url>/blog/2020/06/11/284/</url>
    
    <content type="html"><![CDATA[<p>1、之前的例子</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;index.tsx文件import React from &#39;react&#39;;import styles from &#39;.&#x2F;styles.module.scss&#39;;function VelButton(props) &#123;&#x2F;&#x2F;接收props    return (        &lt;button className&#x3D;&#123;classnames(            styles.button,&#123;                [styles[&#39;primary&#39;]]:props.type&#x3D;&#x3D;&#x3D;&#39;primary&#39;&#x2F;&#x2F;动态绑定样式            &#125;        )&#125;&gt;&#123;props.children&#125;&lt;button&gt;    )&#125;export default VelButton;&#x2F;&#x2F;styles.module.scss文件.primary&#123;    background-color: #409eff;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>2、使用组件</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;app.tsx文件import VelButton from &#39;.&#x2F;components&#x2F;button&#39;;function App() &#123;    return(        .....        .....        &lt;VelButton type&#x3D;&#39;primary&#39;&gt;新的按钮&lt;&#x2F;VelButton&gt;        .....    )&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>React学习笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React笔记三：创建第一个组件</title>
    <link href="/blog/2020/06/11/281/"/>
    <url>/blog/2020/06/11/281/</url>
    
    <content type="html"><![CDATA[<p>1、src文件夹下新建一个components文件夹</p><p>2、在components文件夹中新建一个button文件夹</p><p>3、在button文件夹中新建index.tsx文件和styles.module.scss文件</p><p>4、编写第一个组件</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;index.tsx文件import React from &#39;react&#39;;import styles from &#39;.&#x2F;styles.module.scss&#39;;function VelButton() &#123;    return (        &lt;button&gt;默认按钮&lt;button&gt;    )&#125;export default VelButton;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>5、使用组件</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;app.tsx文件import VelButton from &#39;.&#x2F;components&#x2F;button&#39;;function App() &#123;    return(        .....        .....        &lt;VelButton&gt;&lt;&#x2F;VelButton&gt;        ......    )&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>6、添加样式</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;styles.module.scss.button&#123;    padding: 10px 20px;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><p>7、安装classnames模块</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">npm install classnames -s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>8、引入样式</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;index.tsx文件import React from &#39;react&#39;;import styles from &#39;.&#x2F;styles.module.scss&#39;;import classnames from &#39;classnames&#39;;function VelButton() &#123;    return (        &lt;button className&#x3D;&#123;classnames(            styles.button        )&#125;&gt;默认按钮&lt;button&gt;    )&#125;export default VelButton;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>React学习笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React笔记二：使用sass</title>
    <link href="/blog/2020/06/09/278/"/>
    <url>/blog/2020/06/09/278/</url>
    
    <content type="html"><![CDATA[<p>1、安装模块</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">npm install node-sass -s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>2、文件中使用</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;创建后缀为scss的文件&#x2F;&#x2F;引入scssimprot styles from &#39;.&#x2F;styles.scss&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>React学习笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React笔记一：安装React</title>
    <link href="/blog/2020/06/08/275/"/>
    <url>/blog/2020/06/08/275/</url>
    
    <content type="html"><![CDATA[<p>1、安装nodeJs</p><p><a href="https://nodejs.org/">https://nodejs.org/</a></p><p>2、安装React模块</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">npm install -g create-react-app<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>3、新建一个React项目</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">npx create-react-app my-react-app &#x2F;&#x2F;my-react-app为项目名npx create-react-app my-react-app --typescript &#x2F;&#x2F;创建使用ts的项目<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><p>4、启动React项目</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">npm start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>React学习笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>样式设置 /deep/</title>
    <link href="/blog/2020/06/01/273/"/>
    <url>/blog/2020/06/01/273/</url>
    
    <content type="html"><![CDATA[<p>样式设置scoped属性带来的问题<br>通常我们在写样式的时候会在style标签中加上scoped属性</p><p>Scoped CSS规范是Web组件产生不污染其他组件，也不被其他组件污染的CSS规范，但是这样有时候也会遇到问题：<br>使用elementUI或其他ui框架时修改框架默认样式不生效。</p><p>通过 /deep/解决</p><div class="code-wrapper"><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;    .basic-box &#123;        height: calc(100% - 50px);        &#x2F;deep&#x2F; .el-card &#123;          height: 100%;          .el-card__body &#123;            height: 80%;          &#125;        &#125;      &#125;&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>Vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>一行JS代码实现编辑网页</title>
    <link href="/blog/2020/05/08/253/"/>
    <url>/blog/2020/05/08/253/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js">document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>contentEditable<span class="token operator">=</span><span class="token string">'true'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>浏览器中按F12打开检查在调试面板选中console，输入代码</p>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JS格式化价格保留两位小数函数</title>
    <link href="/blog/2020/05/06/251/"/>
    <url>/blog/2020/05/06/251/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">//格式化价格相关字段</span>      <span class="token function">formatMoney</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          value <span class="token operator">=</span> value <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token operator">-</span>value <span class="token operator">:</span> value<span class="token punctuation">;</span>          <span class="token keyword">let</span> flag <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token string">'.00'</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>flag<span class="token punctuation">,</span> value<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token string">'0'</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> value<span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>获取浏览器UA信息</title>
    <link href="/blog/2020/02/19/248/"/>
    <url>/blog/2020/02/19/248/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js">navigator<span class="token punctuation">.</span>userAgent<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>示例：</p><div class="code-wrapper"><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">HTML</span> <span class="token name">PUBLIC</span> <span class="token string">"-//W3C//DTD HTML 4.0 Transitional//EN"</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/1999/xhtml<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>获取浏览器UA(userAgent)信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Content-Type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/html; charset=utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">cellpadding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>0</span> <span class="token attr-name">cellspacing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>0</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">height</span><span class="token punctuation">:</span>40px<span class="token punctuation">;</span><span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>16px<span class="token punctuation">;</span><span class="token property">font-weight</span><span class="token punctuation">:</span>bolder<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>您的浏览器UA(userAgent)信息为：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">height</span><span class="token punctuation">:</span>40px<span class="token punctuation">;</span><span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>16px<span class="token punctuation">;</span><span class="token property">font-weight</span><span class="token punctuation">:</span>bolder<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JavaScript<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">                    document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">;</span>                </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">height</span><span class="token punctuation">:</span>40px<span class="token punctuation">;</span><span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>16px<span class="token punctuation">;</span><span class="token property">font-weight</span><span class="token punctuation">:</span>bolder<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>您的屏幕分辨率为：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">height</span><span class="token punctuation">:</span>40px<span class="token punctuation">;</span><span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>16px<span class="token punctuation">;</span><span class="token property">font-weight</span><span class="token punctuation">:</span>bolder<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JavaScript<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">                    document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token string">"×"</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>                </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">height</span><span class="token punctuation">:</span>30px<span class="token punctuation">;</span><span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>12px<span class="token punctuation">;</span><span class="token property">font-weight</span><span class="token punctuation">:</span>bolder<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>                (请复制以上红色的UA(userAgent)信息和分辨率，添加到平台UA列表中)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>关于将es6 mjs格式模块放在服务器端无法被请求的解决方案</title>
    <link href="/blog/2020/02/15/243/"/>
    <url>/blog/2020/02/15/243/</url>
    
    <content type="html"><![CDATA[<p>将mjs文件更改为js文件，mjs文件在服务器端可能无法识别</p>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CSS3实现毛玻璃效果</title>
    <link href="/blog/2020/02/11/241/"/>
    <url>/blog/2020/02/11/241/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>xxxxxx.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.content:</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    ....<span class="token punctuation">&#125;</span><span class="token selector">.content::after</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>xxxxx.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>    <span class="token property">background-repeat</span><span class="token punctuation">:</span> no-repeat<span class="token punctuation">;</span>    <span class="token property">background-size</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>    <span class="token property">background-attachment</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>4px<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> -30px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>利用css3 filter属性级background相关属性实现</p>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>CSS</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JS命名规范示例</title>
    <link href="/blog/2020/02/08/239/"/>
    <url>/blog/2020/02/08/239/</url>
    
    <content type="html"><![CDATA[<p>js：驼峰命名，例：<br>firstName</p><p>css：中划线命名，例：<br>first-name<br>class ： 驼峰命名，例：<br>FirstName</p><p>html ： 中划线/驼峰命名，例：<br>class=”first-name”<br>id：”firstName”</p><p>文件：中/下划线命名，例：<br>first-name.js/first_name.js</p><p>图片：头尾两部分，下划线隔开，头表示大类，例：<br>banner：放置在页面顶部的广告，装饰图案等长方形的图片<br>banner_sohu.gif<br>banner_sina.gif</p><p>logo：标志性的图片，例：<br>logo_police.gif</p><p>button：在页面上位置不固定，并且带有链接的小图片，例：<br>button_name.png</p><p>menu：在页面中某一位置连续出现，性质相同的链接栏目的图片，例：<br>menu_aboutus.gif<br>menu_job.gif</p><p>pic：装饰用的图片，例：<br>pic_people.gif</p><p>文件名称：小写英文字母，数字和下划线，例：<br>首页—index<br>产品列表—prelist<br>产品详细页面—prodetail<br>新闻列表—newslist<br>新闻详细页面—newsdetail<br>发展历史—history<br>关于我们—aboutus<br>联系我们—linkus，contactus<br>信息反馈—feedback<br>留言—leavewords</p><p>脚本文件和动态文本：英文小写缩写命名，例：<br>广告条ad.js<br>弹出窗口pop.js</p><p>公用模块：js文件命名：英文命名，后缀js，例：<br>common.js<br>basic.js</p><p>外部资源：例：<br>Jquery.min.js<br>Jquery.validate.js<br>Jquery.date.js</p><p>动态文件：以性质描述，可以有多个单词，用‘_’隔开，性质一般是该页面的概要（见名知意），例：<br>register_form.aspx<br>register_post.aspx<br>topic_lock.aspx</p><p>常用规范<br>s：表示字符串。例：sName，sHtml；<br>n：表示数字。例：nPage，nTotal；<br>b：表示逻辑。例：bChecked，bHasLogin；<br>a：表示数组。例：aList，aGroup；<br>r：表示正则表达式。例：rDomain，rEmail；<br>f：表示函数。例：fGetHtml，fInit；<br>o：表示以上未涉及到的其他对象，例：oButton，oDate；<br>g：表示全局变量，例：gUserName，gLoginTime；</p><p>常量<br>某些作为不允许修改值的变量认为是常量，全部字母都大写，例：<br>COPYRIGHT<br>PI<br>常量可以存在于函数中，也可以存在于全局。</p><p>Jquery<br>$：表示Jquery对象。例：<br>$Content<br>$Module</p><p>一种比较广泛的Jquery对象变量命名规范。<br>j：表示Jquery对象。例：<br>jContent<br>jModule；<br>另一种Jquery对象变量命名方式。<br>函数<br>fn：表示函数。例：<br>fnGetName<br>fnSetAge；<br>fn能够更好的区分普通变量和函数变量。<br>DOM<br>dom：表示Dom对象，例：<br>domForm<br>domInput<br>项目中很多地方会用到原生的Dom方法及属性，可以根据团队需要适当修改。<br>临时变量<br>作用域不大临时变量可以简写，例：<br>str，num，bol，obj，fun，arr。<br>循环变量可以简写，例：<br>i，j，k等。</p><p>常用动词<br>• get 获取/set 设置/add 增加/remove 删除/create 创建/destory 移除<br>• start 启动/stop 停止/open 打开/close 关闭/read 读取/write 写入<br>• load 载入/save 保存/create 创建/destroy 销毁<br>• begin 开始/end 结束/backup 备份/restore 恢复/detach 脱离<br>• import 导入/export 导出/split 分割/merge 合并/inject 注入/extract 提取<br>• attach 附着/bind 绑定/separate 分离/ view 查看/browse 浏览<br>• edit 编辑/modify 修改/select 选取/mark 标记/copy 复制/paste 粘贴/undo 撤销<br>• redo 重做/insert 插入/delete 移除/add 加入/append 添加<br>• clean 清理/clear 清除/index 索引/sort 排序/find 查找/search 搜索/<br>• increase 增加/decrease 减少/play 播放/pause 暂停/<br>• launch 启动/run 运行/pack 打包/unpack 解包/parse 解析/emit 生成<br>• compile 编译/execute 执行/debug 调试/trace 跟踪<br>• observe 观察/listen 监听/build 构建/publish 发布/push 推/pull 拉<br>• input 输入/output 输出/encode 编码/decode 解码<br>• expand 展开/collapse 折叠/encrypt 加密/decrypt 解密<br>• compress 压缩/decompress 解压缩<br>• connect 连接/disconnect 断开/send 发送/receive 接收<br>• download 下载/upload 上传/refresh 刷新/synchronize 同步<br>• update 更新/revert 复原/lock 锁定/unlock 解锁<br>• check out 签出/check in 签入/submit 提交/commit 交付<br>• begin 起始/end 结束/start 开始/finish 完成/enter 进入/exit 退出<br>• abort 放弃/quit 离开/obsolete 废弃/depreciate 废旧<br>• collect 收集/aggregate 聚集</p>]]></content>
    
    
    <categories>
      
      <category>实用技巧</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>元素外使用伪元素after加框后内部元素无法选中问题解决方案</title>
    <link href="/blog/2020/02/08/237/"/>
    <url>/blog/2020/02/08/237/</url>
    
    <content type="html"><![CDATA[<p>为内部元素设置定位和z-index，例：</p><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>CSS</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>原生js module中的函数无法在HTML中绑定解决方案</title>
    <link href="/blog/2020/02/07/235/"/>
    <url>/blog/2020/02/07/235/</url>
    
    <content type="html"><![CDATA[<p>module中定义的函数不是全局的，需要改用事件监听</p><p>不在HTML元素中直接绑定onclick，改为在js文件中document.queryselector(按键id).addEventListener(“click”, 调用函数名); 绑定事件监听的方式</p>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>原生js中jsonp跨域实现调用必应每日壁纸API</title>
    <link href="/blog/2020/02/05/233/"/>
    <url>/blog/2020/02/05/233/</url>
    
    <content type="html"><![CDATA[<p>Tips： 注意jsonp跨域需要后台支持。</p><p>必应壁纸接口： <a href="https://github.com/xCss/bing">https://github.com/xCss/bing</a></p><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">setBingImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bing <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        <span class="token function-variable function">bg</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundImage <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://bing.ioliu.cn/v1/?d=0&amp;w=1920&amp;h=1080&amp;callback=callback</span><span class="token template-punctuation string">`</span></span>；    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>使用JSONP跨域失败问题解答</title>
    <link href="/blog/2020/02/04/230/"/>
    <url>/blog/2020/02/04/230/</url>
    
    <content type="html"><![CDATA[<p>JSONP只能处理GET类型的请求</p><p>需要服务器配合</p>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>搜索框实现各大搜索引擎智能提示功能（jsonp跨域实现自动补全搜索建议）</title>
    <link href="/blog/2020/01/18/224/"/>
    <url>/blog/2020/01/18/224/</url>
    
    <content type="html"><![CDATA[<p><strong>首先是各大搜索引擎的数据</strong></p><p><strong>谷歌/google：</strong><a href="http://suggestqueries.google.com/complete/search?client=youtube&q=#content#&jsonp=window.google.ac.h">http://suggestqueries.google.com/complete/search?client=youtube&amp;q=#content#&amp;jsonp=window.google.ac.h</a><br><strong>callback：</strong>window.google.ac.h<br><strong>返回值：</strong>window.google.ac.h([“关键字”,[[“关键字规划师”,0],[“关键字研究工具”,0],[“关键字”,0],[“关键字 搜寻量”,0],[“关键字提取”,0],[“关键字参数”,0],[“关键字广告收费方式”,0],[“关键字广告是什么”,0],[“关键字 英文”,0],[“关键字驱动”,0]],{“k”:1,”q”:”5mIo50mwAhPfTuFojvpE9njU9Fc”}])</p><p><strong>百度/baidu：</strong><a href="http://suggestion.baidu.com/su?wd=#content#&cb=window.baidu.sug">http://suggestion.baidu.com/su?wd=#content#&amp;cb=window.baidu.sug</a><br><strong>callback：</strong>window.baidu.sug<br><strong>返回值：</strong>window.baidu.sug({q:”关键字”,p:false,s:[“关键字优化”,”关键字是什么”,”c语言关键字”,”excel关键字排序”,”关键字和标识符区别”,”关键字优化_选择站优云”,”关键字优化_选择站优云丶”,”关键字优化_都赞站优云”,”关键字递增排序”,”关键字是关系中能够用来唯一标识元组的属性”]});</p><p><strong>必应/bing：</strong><a href="http://api.bing.com/qsonhs.aspx?type=cb&q=#content#&cb=window.bing.sug">http://api.bing.com/qsonhs.aspx?type=cb&amp;q=#content#&amp;cb=window.bing.sug</a><br><strong>callback：</strong>window.bing.sug<br><strong>返回值：</strong>if(typeof window.bing.sug == ‘function’) window.bing.sug({“AS”:{“Query”:”关键字”,”FullResults”:1,”Results”:[{“Type”:”AS”,”Suggests”:[{“Txt”:”关键字点右边选项可分类搜索”,”Type”:”AS”,”Sk”:””,”HCS”:0},{“Txt”:”关键字驱动”,”Type”:”AS”,”Sk”:”AS1”},{“Txt”:”关键字提取”,”Type”:”AS”,”Sk”:”AS2”},{“Txt”:”关键字搜索的技巧”,”Type”:”AS”,”Sk”:”AS3”},{“Txt”:”关键字云图”,”Type”:”AS”,”Sk”:”AS4”},{“Txt”:”关键字屏蔽”,”Type”:”AS”,”Sk”:”AS5”},{“Txt”:”关键字supper的作用是”,”Type”:”AS”,”Sk”:”AS6”},{“Txt”:”关键字参数 python”,”Type”:”AS”,”Sk”:”AS7”}]}]}}/* pageview_candidate */);</p><p><strong>好搜/so：</strong><a href="https://sug.so.360.cn/suggest?encodein=utf-8&encodeout=utf-8&format=json&word=#content#&callback=window.so.sug">https://sug.so.360.cn/suggest?encodein=utf-8&amp;encodeout=utf-8&amp;format=json&amp;word=#content#&amp;callback=window.so.sug</a><br><strong>callback：</strong>window.so.sug<br><strong>返回值：</strong>window.so.sug({“ext”:”nlpv=zzzc_0”,”query”:”关键字”,”result”:[{“rank”:”0.009386”,”resrc”:”0.287926”,”source”:”recall”,”word”:”关键字广告”},{“rank”:”0.008406”,”resrc”:”0.556381”,”source”:”recall”,”word”:”关键字查询”},{“rank”:”0.005110”,”resrc”:”0.380169”,”source”:”recall”,”word”:”关键字优化”},{“rank”:”0.001996”,”resrc”:”0.225187”,”source”:”recall”,”word”:”关键字工具”},{“rank”:”0.000570”,”resrc”:”0.363073”,”source”:”recall”,”word”:”关键字搜索引擎”},{“rank”:”0.000547”,”resrc”:”0.353710”,”source”:”recall”,”word”:”关键字排名”},{“rank”:”0.000395”,”resrc”:”0.283342”,”source”:”recall”,”word”:”关键字查询工具”},{“rank”:”0.000216”,”resrc”:”0.177443”,”source”:”recall”,”word”:”关键字优化技巧”},{“rank”:”0.000200”,”resrc”:”0.166434”,”source”:”recall”,”word”:”关键字搜索”},{“rank”:”0.000199”,”resrc”:”0.165665”,”source”:”recall”,”word”:”关键字加密工具”}],”ssid”:”1e9edd15637f4da5b6af8e06f722b255”,”version”:”personal”}<br>)</p><p><strong>搜狗/sougou：</strong><a href="https://www.sogou.com/suggnew/ajajjson?type=web&key=#content#">https://www.sogou.com/suggnew/ajajjson?type=web&amp;key=#content#</a><br><strong>callback：</strong>window.sogou.sug<br><strong>返回值：</strong>window.sogou.sug([“关键字”,[“关键字挖掘”,”关键字搜索”,”关键字 点击搜索进入”,”关键字是什么”,”关键字序列”,”关键字static的作用是什么”,”关键字 点右边选项可分类搜索”,”关键字排序”,”关键字驱动测试英文”,”关键字广告”],[“0;0;0;0”,”1;0;0;0”,”2;0;0;0”,”3;0;0;0”,”4;0;0;0”,”5;0;0;0”,”6;0;0;0”,”7;0;0;0”,”8;0;0;0”,”9;0;0;0”],[“”,””,””,””,””,””,””,””,””,””],[“0”],””,”suglabId_1”],-1);</p><p><strong>为了方便使用我将搜索引擎数据放在一个数组对象中</strong></p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&quot;engine&quot;: [&#123;        &quot;name&quot;: &quot;谷歌&quot;,        &quot;value&quot;: &quot;google&quot;,        &quot;href&quot;: &quot;https:&#x2F;&#x2F;www.google.com&#x2F;search?q&#x3D;&quot;,        &quot;sugurl&quot;: &quot;http:&#x2F;&#x2F;suggestqueries.google.com&#x2F;complete&#x2F;search?client&#x3D;youtube&amp;q&#x3D;#content#&amp;jsonp&#x3D;window.google.ac.h&quot;,        &quot;icon&quot;: &quot;.&#x2F;img&#x2F;engineLogo&#x2F;google.ico&quot;,        &quot;show&quot;: true,        &quot;select&quot;: &quot;&quot;    &#125;, &#123;        &quot;name&quot;: &quot;必应&quot;,        &quot;value&quot;: &quot;bing&quot;,        &quot;href&quot;: &quot;https:&#x2F;&#x2F;cn.bing.com&#x2F;search?q&#x3D;&quot;,        &quot;sugurl&quot;: &quot;http:&#x2F;&#x2F;api.bing.com&#x2F;qsonhs.aspx?type&#x3D;cb&amp;q&#x3D;#content#&amp;cb&#x3D;window.bing.sug&quot;,        &quot;icon&quot;: &quot;.&#x2F;img&#x2F;engineLogo&#x2F;bing.ico&quot;,        &quot;show&quot;: true,        &quot;select&quot;: &quot;selected&quot;    &#125;, &#123;        &quot;name&quot;: &quot;百度&quot;,        &quot;value&quot;: &quot;baidu&quot;,        &quot;href&quot;: &quot;https:&#x2F;&#x2F;www.baidu.com&#x2F;s?wd&#x3D;&quot;,        &quot;sugurl&quot;: &quot;http:&#x2F;&#x2F;suggestion.baidu.com&#x2F;su?wd&#x3D;#content#&amp;cb&#x3D;window.baidu.sug&quot;,        &quot;icon&quot;: &quot;.&#x2F;img&#x2F;engineLogo&#x2F;baidu.svg&quot;,        &quot;show&quot;: true,        &quot;select&quot;: &quot;&quot;    &#125;, &#123;        &quot;name&quot;: &quot;搜狗&quot;,        &quot;value&quot;: &quot;sougou&quot;,        &quot;href&quot;: &quot;https:&#x2F;&#x2F;www.sogou.com&#x2F;web?query&#x3D;&quot;,        &quot;sugurl&quot;: &quot;https:&#x2F;&#x2F;www.sogou.com&#x2F;suggnew&#x2F;ajajjson?type&#x3D;web&amp;key&#x3D;#content#&quot;,        &quot;icon&quot;: &quot;.&#x2F;img&#x2F;engineLogo&#x2F;sougou.ico&quot;,        &quot;show&quot;: true,        &quot;select&quot;: &quot;&quot;    &#125;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>JSONP是<strong>跨域访问</strong>的一种方式。由于服务器返回的JavaScript代码可以直接引用，通过回调函数的方式就可以<strong>间接的获取</strong>服务器的数据。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; searchInput为获取的输入框let searchInput &#x3D; document.querySelector(&quot;#searchInput&quot;);&#x2F;&#x2F; 监听按键抬起searchInput.onkeyup &#x3D; () &#x3D;&gt; &#123;    &#x2F;&#x2F; 获取选择的搜索引擎    let engineValue &#x3D; selectEngine.childNodes[0].alt;     &#x2F;&#x2F; 从数据源中找到选中的搜索引擎    &#x2F;&#x2F; 如果没有多个搜索引擎切换可以忽略    let engine &#x3D; jsonData.engine.find(item &#x3D;&gt; item.value &#x3D;&#x3D; engineValue);    &#x2F;&#x2F; 将链接赋值给变量    let [href, sugurl] &#x3D; [engine.href, engine.sugurl];    &#x2F;&#x2F; 获取输入框的值    let value &#x3D; searchInput.value;    &#x2F;&#x2F; 如果输入框的值为空则清空列表并隐藏    if (value &#x3D;&#x3D; &quot;&quot;) &#123;        searchList.innerHTML &#x3D; &quot;&quot;;        searchList.style.display &#x3D; &quot;none&quot;;        return;    &#125;    &#x2F;&#x2F; 替换链接中&#39;#content#&#39;为输入框的值    sugurl &#x3D; sugurl.replace(&quot;#content#&quot;, value);    &#x2F;&#x2F; 各个引擎的callback，由于各搜索引擎返回的数据不同需要做判断    &#x2F;&#x2F; sugValue为定义的函数，用来接收获取到的数据    window.google &#x3D; &#123;        ac: &#123;            h: function (json) &#123;                sugValue(href, json[1])            &#125;        &#125;    &#125;    window.bing &#x3D; &#123;        sug: function (json) &#123;            sugValue(href, json.AS.Results[0].Suggests);        &#125;    &#125;    window.baidu &#x3D; &#123;        sug: function (json) &#123;            sugValue(href, json.s)        &#125;    &#125;    window.sogou &#x3D; &#123;        sug: function (json) &#123;            sugValue(href, json[1])        &#125;    &#125;    &#x2F;&#x2F; 创建script标签    let script &#x3D; document.createElement(&quot;script&quot;);    script.src &#x3D; sugurl;    document.querySelector(&quot;head&quot;).appendChild(script);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 接收返回数据的函数function sugValue(href, value) &#123;    let sugList &#x3D; &quot;&quot;;    if (value.length &#x3D;&#x3D; 0) &#123;        return;    &#125;    &#x2F;&#x2F; 根据返回值判断渲染    value.forEach(item &#x3D;&gt; &#123;        if (typeof item &#x3D;&#x3D; &quot;string&quot;) &#123;            sugList +&#x3D; &#96;&lt;li&gt;&lt;a href&#x3D;&quot;$&#123;href&#125;$&#123;item&#125;&quot;&gt;$&#123;item&#125;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;&#96;        &#125; else if (typeof item &#x3D;&#x3D; &quot;object&quot; &amp;&amp; item.Txt !&#x3D;&#x3D; undefined) &#123;            sugList +&#x3D; &#96;&lt;li&gt;&lt;a href&#x3D;&quot;$&#123;href&#125;$&#123;item.Txt&#125;&quot;&gt;$&#123;item.Txt&#125;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;&#96;        &#125; else &#123;            sugList +&#x3D; &#96;&lt;li&gt;&lt;a href&#x3D;&quot;$&#123;href&#125;$&#123;item[0]&#125;&quot;&gt;$&#123;item[0]&#125;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;&#96;        &#125;    &#125;)    searchList.innerHTML &#x3D; sugList;    searchList.style.display &#x3D; &quot;block&quot;;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><strong>什么是跨域：</strong></p><p><em>跨域是由浏览器同源策略引起的，是指页面请求的接口地址，必须与页面url地址处于同域上（即域名，端口，协议相同）。这是为了防止某域名下的接口被其他域名下的网页非法调用，是浏览器对JavaScript施加的安全限制。</em></p><p><strong>前端解决跨域问题常用的解决方案：</strong></p><ul><li>  <strong>JSONP</strong>：利用script标签可跨域的特点，在跨域脚本中可以直接回调当前脚本的函数。</li><li>  <strong>CORS</strong>：服务器设置HTTP响应头中Access-Control-Allow-Origin值，解除跨域限制。</li><li>  . . .</li></ul>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>原生JS实现限制input上传文件格式、大小及清空</title>
    <link href="/blog/2020/01/18/222/"/>
    <url>/blog/2020/01/18/222/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 监听文件上传change事件设置背景图片</span>scrollContent<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 获取input file标签</span>    <span class="token keyword">let</span> setBackGround <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#setBackGround"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 判断触发change的是否为input file</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target <span class="token operator">==</span> setBackGround<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> file <span class="token operator">=</span> setBackGround<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">let</span> data <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span> <span class="token comment">// 'data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...'</span>            <span class="token keyword">let</span> <span class="token function-variable function">func</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundImage <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// 将文件大小转换为MB格式</span>            <span class="token keyword">let</span> size <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"MB"</span><span class="token punctuation">;</span>            <span class="token comment">// 判断文件类型是否为jpeg/png</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">'image/jpeg'</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">'image/png'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// 此段为封装的消息提示函数，可换成alert</span>                <span class="token function">openMessage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                    title<span class="token operator">:</span> <span class="token string">"提示"</span><span class="token punctuation">,</span>                    type<span class="token operator">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>                    content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">不是有效的图片文件!</span><span class="token template-punctuation string">`</span></span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>                <span class="token comment">// 清空input file的value值</span>                setBackGround<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//判断文件大小是否大于3MB</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>size <span class="token operator">></span> <span class="token number">3145728</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// 此段为封装的消息提示函数，可换成alert</span>                <span class="token function">openMessage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                    title<span class="token operator">:</span> <span class="token string">"提示"</span><span class="token punctuation">,</span>                    type<span class="token operator">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>                    content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">当前文件大小为</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>size<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">，建议不超过3MB！</span><span class="token template-punctuation string">`</span></span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>                <span class="token comment">// 清空input file的value值</span>                setBackGround<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// 此段为设置本地存储及更换样式文件，可忽略</span>            <span class="token function">setStorageBefore</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> <span class="token string">"bg"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">changeSkin</span><span class="token punctuation">(</span><span class="token string">"skin"</span><span class="token punctuation">,</span> skin_Transparent<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token comment">// 以DataURL的形式读取文件:</span>        reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>或者请看下面的文章：</p><p><a href="https://blog.virs.xyz/?p=213">https://blog.virs.xyz/?p=213</a></p>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>VSCode常用功能性插件推荐（附带链接）</title>
    <link href="/blog/2020/01/16/218/"/>
    <url>/blog/2020/01/16/218/</url>
    
    <content type="html"><![CDATA[<blockquote><p>本文内容较多可以按 <code>Ctrl + F</code> 搜索。</p><p><strong>提示：</strong>由于插件数量较多，简介均为插件介绍文档中内容，具体请点击链接查看插件文档。<br><strong>提示：</strong>相同功能或功能相近的插件请勿重复安装，避免造成冲突或插件相关功能使用中重复。<br><strong>提示：</strong>插件仅提供功能性增强，请牢记基础，切勿本末倒置。<br><strong>提示：</strong>请按需安装。</p></blockquote><ul><li><strong>Auto Import</strong><br>  自动查找，解析并提供所有可用导入的代码操作和代码完成。适用于Typescript和TSX。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=steoates.autoimport">https://marketplace.visualstudio.com/items?itemName=steoates.autoimport</a></li><li><strong>Auto Rename Tag</strong><br>  与Visual Studio IDE一样，自动重命名配对的HTML / XML标签。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-rename-tag">https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-rename-tag</a></li><li><strong>Beautify</strong><br>  在Visual Studio Code中美化javascript，JSON，CSS，Sass和HTML。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=HookyQR.beautify">https://marketplace.visualstudio.com/items?itemName=HookyQR.beautify</a></li><li><strong>Bracket Pair Colorizer</strong><br>  允许用颜色标识匹配的括号。用户可以定义要匹配的字符以及要使用的颜色。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer">https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer</a></li><li><strong>Chinese (Simplified) Language Pack for Visual Studio Code</strong><br>  适用于 VS Code 的中文（简体）语言包。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=MS-CEINTL.vscode-language-pack-zh-hans">https://marketplace.visualstudio.com/items?itemName=MS-CEINTL.vscode-language-pack-zh-hans</a></li><li><strong>Class autocomplete for HTML</strong><br>  自动匹配样式表中的class样式。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=AESSoft.aessoft-class-autocomplete">https://marketplace.visualstudio.com/items?itemName=AESSoft.aessoft-class-autocomplete</a></li><li><strong>Code Runner</strong><br>  运行多种语言的代码段或代码文件： <strong>C, C++, Java, JavaScript, PHP, Python, Perl, Perl 6, Ruby, Go, Lua, Groovy, PowerShell, BAT/CMD, BASH/SH, F# Script, F# (.NET Core), C# Script, C# (.NET Core), VBScript, TypeScript, CoffeeScript, Scala, Swift, Julia, Crystal, OCaml Script, R, AppleScript, Elixir, Visual Basic .NET, Clojure, Haxe, Objective-C, Rust, Racket, Scheme, AutoHotkey, AutoIt, Kotlin, Dart, Free Pascal, Haskell, Nim, D, Lisp, Kit, V</strong><br>  <a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner">https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner</a></li><li><strong>Color Info</strong><br>  提供快捷的颜色信息<br>  <a href="https://marketplace.visualstudio.com/items?itemName=bierner.color-info">https://marketplace.visualstudio.com/items?itemName=bierner.color-info</a></li><li><strong>Comment Translate</strong><br>  许多优秀的项目，都有丰富的注释，使用者可以快速理解代码意图。但是如果使用者并不熟习注释的语言，会带来理解困难。本插件使用 Google Translate API 翻译 VSCode 的编程语言的注释。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=intellsmi.comment-translate">https://marketplace.visualstudio.com/items?itemName=intellsmi.comment-translate</a></li><li><strong>CSS Peek</strong><br>  扩展了HTML和ejs代码编辑，<code>Go To Definition</code>并<code>Go To Symbol in Workspace</code>支持在源代码的字符串中找到的css / scss / less（类和ID）。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=pranaygp.vscode-css-peek">https://marketplace.visualstudio.com/items?itemName=pranaygp.vscode-css-peek</a></li><li><strong>Debugger for Chrome</strong><br>  用于在Google Chrome浏览器或其他支持<a href="https://chromedevtools.github.io/debugger-protocol-viewer/">Chrome DevTools协议的</a>目标中调试JavaScript代码。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome">https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome</a></li><li><strong>Debugger for Firefox</strong><br>  用于调试在<a href="https://www.mozilla.org/en-US/firefox/developer/?utm_medium=vscode_extension&utm_source=devtools">Mozilla Firefox浏览器中</a>运行的Web应用程序和扩展。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=firefox-devtools.vscode-firefox-debug">https://marketplace.visualstudio.com/items?itemName=firefox-devtools.vscode-firefox-debug</a></li><li><strong>Easy Sass</strong><br>  保存后自动将SASS / SCSS文件编译为.css和.min.css。您还可以快速编译项目中的所有SCSS / SASS文件。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=spook.easysass">https://marketplace.visualstudio.com/items?itemName=spook.easysass</a></li><li><strong>ESLint_（如果你不熟悉ESLint请勿安装）_</strong><br>  VS Code ESLint扩展。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint</a></li><li><strong>filesize</strong><br>  该软件包旨在与<a href="https://code.visualstudio.com/">Visual Studio Code</a>编辑器一起使用，并且在编辑器的状态栏中显示聚焦文件的大小。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=mkxml.vscode-filesize">https://marketplace.visualstudio.com/items?itemName=mkxml.vscode-filesize</a></li><li><strong>Git History</strong><br>  Git历史记录，搜索和更多内容。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=donjayamanne.githistory">https://marketplace.visualstudio.com/items?itemName=donjayamanne.githistory</a></li><li><strong>GitLens — Git supercharged</strong><br>  GitLens <strong>supercharges</strong>内置到Visual Studio代码Git的能力。它可以帮助您通过Git责备注释和代码镜头一目了然地<strong>看到代码作者的身份</strong>，<strong>无缝地导航和浏览</strong> Git存储库，通过强大的比较命令<strong>获得有价值的见解</strong>，等等。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens">https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens</a></li><li><strong>Guides</strong><br>  添加各种缩进指示线。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=spywhere.guides">https://marketplace.visualstudio.com/items?itemName=spywhere.guides</a></li><li><strong>HTML CSS Support</strong><br>  Missing CSS support for HTML documents.<br>  <a href="https://marketplace.visualstudio.com/items?itemName=ecmel.vscode-html-css">https://marketplace.visualstudio.com/items?itemName=ecmel.vscode-html-css</a></li><li><strong>HTML Snippets</strong><br>  输入一段代码的一部分，按Enter键，然后代码段将展开。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=abusaidm.html-snippets">https://marketplace.visualstudio.com/items?itemName=abusaidm.html-snippets</a></li><li><strong>htmltagwrap</strong><br>  将您的选择包装在HTML标记中。可以包装内联选择和跨越多行的选择（可同时使用单个选择和多个选择）。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=bradgashler.htmltagwrap">https://marketplace.visualstudio.com/items?itemName=bradgashler.htmltagwrap</a></li><li><strong>HTML Boilerplate</strong><br>  提供了所有Web应用程序中使用的标准HTML样板代码。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=sidthesloth.html5-boilerplate">https://marketplace.visualstudio.com/items?itemName=sidthesloth.html5-boilerplate</a></li><li><strong>HTMLHint</strong><br>  将<a href="https://github.com/htmlhint/HTMLHint">HTMLHint</a>静态分析工具集成到Visual Studio Code中。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=mkaufman.HTMLHint">https://marketplace.visualstudio.com/items?itemName=mkaufman.HTMLHint</a></li><li><strong>Image preview</strong><br>  在装订线和悬停时显示图像预览 。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=kisstkondoros.vscode-gutter-preview">https://marketplace.visualstudio.com/items?itemName=kisstkondoros.vscode-gutter-preview</a></li><li><strong>Import Cost</strong><br>  该扩展名将在编辑器中内联显示导入包的大小。该扩展程序利用带有babili-webpack-plugin的webpack来检测导入的大小。 <br>  <a href="https://marketplace.visualstudio.com/items?itemName=wix.vscode-import-cost">https://marketplace.visualstudio.com/items?itemName=wix.vscode-import-cost</a></li><li><strong>IntelliSense for CSS class names in HTML</strong><br>  根据在工作区中找到的定义或通过<code>link</code>元素引用的外部文件为HTML 属性提供CSS类名称 。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=Zignd.html-css-class-completion">https://marketplace.visualstudio.com/items?itemName=Zignd.html-css-class-completion</a></li><li><strong>JavaScript (ES6) code snippets</strong><br>  包含<a href="https://code.visualstudio.com/">Vs代码</a>编辑器的ES6语法的JavaScript代码片段（同时支持JavaScript和TypeScript）。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=xabikos.JavaScriptSnippets">https://marketplace.visualstudio.com/items?itemName=xabikos.JavaScriptSnippets</a></li><li><strong>JavaScript Snippet Pack</strong><br>  该扩展为JavaScript和TypeScript编辑器提供了一堆有用的代码段。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=akamud.vscode-javascript-snippet-pack">https://marketplace.visualstudio.com/items?itemName=akamud.vscode-javascript-snippet-pack</a></li><li><strong>jQuery Code Snippets</strong><br>  只需输入字母“ jq”即可获取所有可用的jQuery代码段的列表。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=donjayamanne.jquerysnippets">https://marketplace.visualstudio.com/items?itemName=donjayamanne.jquerysnippets</a></li><li><strong>JSON to TS</strong><br>  将JSON对象转换为Typescript。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=MariusAlchimavicius.json-to-ts">https://marketplace.visualstudio.com/items?itemName=MariusAlchimavicius.json-to-ts</a></li><li><strong>JSON Tools</strong><br>  用于处理JSON的工具。您可以使用此扩展程序漂亮/缩小JSON。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=eriklynd.json-tools">https://marketplace.visualstudio.com/items?itemName=eriklynd.json-tools</a></li><li><strong>Live Server</strong><br>  启动具有实时重新加载功能的本地开发服务器，以处理静态和动态页面。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer">https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer</a></li><li><strong>Markdown Preview Enhanced</strong><br>  Markdown预览增强<br>  <a href="https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced">https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced</a></li><li><strong>Markdown Table Formatter</strong><br>  一个简单的markdown插件格式化表格。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=fcrespo82.markdown-table-formatter">https://marketplace.visualstudio.com/items?itemName=fcrespo82.markdown-table-formatter</a></li><li><strong>npm</strong><br>  该扩展支持运行文件中定义的npm脚本，<code>package.json</code>并支持根据中定义的依赖项验证已安装的模块<code>package.json</code>。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=eg2.vscode-npm-script">https://marketplace.visualstudio.com/items?itemName=eg2.vscode-npm-script</a></li><li><strong>npm Intellisense</strong><br>  可自动完成导入语句中的npm模块。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=christian-kohler.npm-intellisense">https://marketplace.visualstudio.com/items?itemName=christian-kohler.npm-intellisense</a></li><li><strong>open in browser</strong><br>  使用<code>Alt + B</code>快捷方式在默认浏览器中打开当前_html_文件，或<code>Shift + Alt + B</code>选择一个浏览器。您也可以像图片一样右键单击<br>  <a href="https://marketplace.visualstudio.com/items?itemName=techer.open-in-browser">https://marketplace.visualstudio.com/items?itemName=techer.open-in-browser</a></li><li><strong>Paste JSON as Code</strong><br>  从JSON，JSON Schema和TypeScript交互式生成类型和（反）序列化代码 。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype">https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype</a></li><li><strong>Path Intellisense</strong><br>  路径智能感知<br>  <a href="https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense">https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense</a></li><li><strong>Polacode</strong><br>  Polacode —您的代码的拍立得<br>  <a href="https://marketplace.visualstudio.com/items?itemName=pnp.polacode">https://marketplace.visualstudio.com/items?itemName=pnp.polacode</a></li><li><strong>Prettify JSON</strong><br>  在VSCode中美化JSON<br>  <a href="https://marketplace.visualstudio.com/items?itemName=mohsen1.prettify-json">https://marketplace.visualstudio.com/items?itemName=mohsen1.prettify-json</a></li><li><strong>SQLTools - Database tools</strong><br>  数据库管理做对了。连接浏览器，查询运行器，智能感知，书签，查询历史记录。感觉像数据库英雄！<br>  <a href="https://marketplace.visualstudio.com/items?itemName=mtxr.sqltools">https://marketplace.visualstudio.com/items?itemName=mtxr.sqltools</a></li><li><strong>SVG Viewer</strong><br>  用于Visual Studio代码的SVG查看器 <a href="https://marketplace.visualstudio.com/items/cssho.vscode-svgviewer">Visual Studio Marketplace</a><br>  <a href="https://marketplace.visualstudio.com/items?itemName=cssho.vscode-svgviewer">https://marketplace.visualstudio.com/items?itemName=cssho.vscode-svgviewer</a></li><li><strong>Trailing Spaces</strong><br>  突出显示尾随空格，并立即删除它们！<br>  <a href="https://marketplace.visualstudio.com/items?itemName=shardulm94.trailing-spaces">https://marketplace.visualstudio.com/items?itemName=shardulm94.trailing-spaces</a></li><li><strong>Vetur</strong><br>  VS Code的Vue工具 。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=octref.vetur">https://marketplace.visualstudio.com/items?itemName=octref.vetur</a></li><li><strong>vscode-fileheader</strong><br>  在文件标题中添加注释，并支持自动更新文件的修改时间。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=mikey.vscode-fileheader">https://marketplace.visualstudio.com/items?itemName=mikey.vscode-fileheader</a></li><li><strong>Vue VSCode Snippets</strong><br>  Vue VSCode片段<br>  <a href="https://marketplace.visualstudio.com/items?itemName=sdras.vue-vscode-snippets">https://marketplace.visualstudio.com/items?itemName=sdras.vue-vscode-snippets</a></li><li><strong>XML Tools</strong><br>  用于Visual Studio代码的XML工具。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=DotJoshJohnson.xml">https://marketplace.visualstudio.com/items?itemName=DotJoshJohnson.xml</a></li><li><strong>Zip File Explorer</strong><br>  在树浏览器中显示Zip文件的内容 。<br>  <a href="https://marketplace.visualstudio.com/items?itemName=slevesque.vscode-zipexplorer">https://marketplace.visualstudio.com/items?itemName=slevesque.vscode-zipexplorer</a></li></ul><p>先推荐这么多，再次提醒：请按需添加。</p>]]></content>
    
    
    <categories>
      
      <category>实用工具</category>
      
      <category>插件</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JS数组对象排序</title>
    <link href="/blog/2020/01/14/215/"/>
    <url>/blog/2020/01/14/215/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> commonData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>    <span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"xxx"</span><span class="token punctuation">,</span>    <span class="token string">"count"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>    <span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"xxx"</span><span class="token punctuation">,</span>    <span class="token string">"count"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>    <span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"xxx"</span><span class="token punctuation">,</span>    <span class="token string">"count"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>    <span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"xxx"</span><span class="token punctuation">,</span>    <span class="token string">"count"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span>commonData<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> minCount <span class="token operator">=</span> obj1<span class="token punctuation">[</span><span class="token string">"count"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> maxCount <span class="token operator">=</span> obj2<span class="token punctuation">[</span><span class="token string">"count"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> maxCount <span class="token operator">-</span> minCount<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>原生js实现操作文件、本地设置图片背景及美化原生input file</title>
    <link href="/blog/2020/01/13/213/"/>
    <url>/blog/2020/01/13/213/</url>
    
    <content type="html"><![CDATA[<p><strong>通过HTML5的File API读取文件内容</strong> ：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var    fileInput &#x3D; document.getElementById(&#39;test-image-file&#39;),    info &#x3D; document.getElementById(&#39;test-file-info&#39;),    preview &#x3D; document.getElementById(&#39;test-image-preview&#39;);&#x2F;&#x2F; 监听change事件:fileInput.addEventListener(&#39;change&#39;, function () &#123;    &#x2F;&#x2F; 清除背景图片:    preview.style.backgroundImage &#x3D; &#39;&#39;;    &#x2F;&#x2F; 检查文件是否选择:    if (!fileInput.value) &#123;        info.innerHTML &#x3D; &#39;没有选择文件&#39;;        return;    &#125;    &#x2F;&#x2F; 获取File引用:    var file &#x3D; fileInput.files[0];    &#x2F;&#x2F; 获取File信息:    info.innerHTML &#x3D; &#39;文件: &#39; + file.name + &#39;&lt;br&gt;&#39; +                     &#39;大小: &#39; + file.size + &#39;&lt;br&gt;&#39; +                     &#39;修改: &#39; + file.lastModifiedDate;    if (file.type !&#x3D;&#x3D; &#39;image&#x2F;jpeg&#39; &amp;&amp; file.type !&#x3D;&#x3D; &#39;image&#x2F;png&#39; &amp;&amp; file.type !&#x3D;&#x3D; &#39;image&#x2F;gif&#39;) &#123;        alert(&#39;不是有效的图片文件!&#39;);        return;    &#125;    &#x2F;&#x2F; 读取文件:    var reader &#x3D; new FileReader();    reader.onload &#x3D; function(e) &#123;        var            data &#x3D; e.target.result; &#x2F;&#x2F; &#39;data:image&#x2F;jpeg;base64,&#x2F;9j&#x2F;4AAQSk...(base64编码)...&#39;                    preview.style.backgroundImage &#x3D; &#39;url(&#39; + data + &#39;)&#39;;    &#125;;    &#x2F;&#x2F; 以DataURL的形式读取文件:    reader.readAsDataURL(file);&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><strong>美化input file代码：</strong></p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;a href&#x3D;&quot;javascript:;&quot; class&#x3D;&quot;test-image-file&quot;&gt;    &lt;input type&#x3D;&quot;file&quot; name&#x3D;&quot;&quot; id&#x3D;&quot;&quot;&gt;点击这里上传文件&lt;&#x2F;a&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">.test-image-file &#123;    padding: 4px 10px;    height: 20px;    line-height: 20px;    position: relative;    cursor: pointer;    color: #888;    background: #fafafa;    border: 1px solid #ddd;    border-radius: 4px;    overflow: hidden;    display: inline-block;    *display: inline;    *zoom: 1&#125;.test-image-file input &#123;    position: absolute;    font-size: 100px;    right: 0;    top: 0;    opacity: 0;    filter: alpha(opacity&#x3D;0);    cursor: pointer&#125;.test-image-file:hover &#123;    color: #444;    background: #eee;    border-color: #ccc;    text-decoration: none&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><strong>实际操作案例请看之前的文章（包含动态渲染中的解决方案）：</strong></p><p><a href="https://blog.virs.xyz/?p=211">https://blog.virs.xyz/?p=211</a></p>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>原生js中动态添加事件监听</title>
    <link href="/blog/2020/01/13/211/"/>
    <url>/blog/2020/01/13/211/</url>
    
    <content type="html"><![CDATA[<p>开发中比较容易出现动态渲染元素，无法绑定事件监听，这种情况下需要以事件委托的方式为动态添加的元素添加事件监听</p><p><strong>事件委托：</strong> 由一个元素监听他的子元素所发生的事件</p><p><strong>具体代码：</strong></p><div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">//这段代码包含处理上传文件代码</span><span class="token comment">//scrollContent父元素</span><span class="token comment">//setBackGround子元素</span>子元素为动态生成，直接为子元素添加监听会无法获取该元素导致监听失败scrollContent<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> setBackGround <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#setBackGround"</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target <span class="token operator">==</span> setBackGround<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> file <span class="token operator">=</span> setBackGround<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">let</span> data <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span> <span class="token comment">// 'data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...'</span>            <span class="token function">setStorageBefore</span><span class="token punctuation">(</span><span class="token string">"bg"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>            body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundImage <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>data<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token comment">// 以DataURL的形式读取文件:</span>        reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JS实现点击空白处隐藏元素</title>
    <link href="/blog/2020/01/11/207/"/>
    <url>/blog/2020/01/11/207/</url>
    
    <content type="html"><![CDATA[<p><strong>适用场景：</strong></p><ul><li>  自定义的下拉选择，点击空白自动隐藏</li><li>  侧边栏点击空白隐藏</li><li>  …</li></ul><p><strong>首先，阻止事件冒泡代码：</strong></p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;阻止事件冒泡function stopPropagation(e) &#123;    var ev &#x3D; e  window.event;    if (ev.stopPropagation) &#123;        ev.stopPropagation();    &#125; else if (window.event) &#123;        window.event.cancelBubble &#x3D; true; &#x2F;&#x2F;兼容IE    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><strong>点击事件代码：</strong></p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">xxx.onclick &#x3D; () &#x3D;&gt; &#123;    stopPropagation();    ...&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><p><strong>监听点击事件代码：</strong></p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">document.addEventListener(&quot;click&quot;, function (e) &#123;    &#x2F;&#x2F;e.target获取点击的元素    &#x2F;&#x2F;实现原理，判断点击的不是指定元素时执行    if(e.target !&#x3D;&#x3D; xxx) &#123;        ...    &#125;&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><strong>点击侧边栏会导致事件冒泡，点击元素内部会隐藏侧边栏<br>解决方法：</strong></p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">监听侧边栏点击事件，阻止事件冒泡xxx.addEventListener(&quot;click&quot; (e) &#x3D;&gt; &#123;    stopPropagation();&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>常用的三种许可证（Apache License 2.0、GNU General Public License v3.0、MIT License）简单介绍及区别</title>
    <link href="/blog/2020/01/10/205/"/>
    <url>/blog/2020/01/10/205/</url>
    
    <content type="html"><![CDATA[<h3 id="Apache-License-2-0"><a href="#Apache-License-2-0" class="headerlink" title="Apache License 2.0"></a>Apache License 2.0</h3><p><strong>简介：</strong></p><p><strong>Apache许可证</strong>（英语：Apache License），是一个由<a href="https://zh.wikipedia.org/wiki/Apache%E8%BB%9F%E4%BB%B6%E5%9F%BA%E9%87%91%E6%9C%83">Apache软件基金会</a>发布的<a href="https://zh.wikipedia.org/wiki/%E8%87%AA%E7%94%B1%E8%BD%AF%E4%BB%B6%E8%AE%B8%E5%8F%AF%E8%AF%81">自由软件许可证</a>，最初为Apache http服务器而撰写。Apache许可证要求被授权者保留<a href="https://zh.wikipedia.org/wiki/%E7%89%88%E6%9D%83">著作权</a>和放弃权利的声明，但它不是一个<a href="https://zh.wikipedia.org/wiki/%E5%8F%8D%E7%89%88%E6%9D%83">反著作权</a>的许可证。</p><p>此许可证最新版本为“版本2”，于2004年1月发布。</p><p><strong>许可条件：</strong></p><p>Apache许可证是<strong>宽容</strong>的，因为它不会强制派生和修改产物使用相同的许可证进行发布（与一些著作权许可证不同，参见比较）。但它仍然要求对所有未修改的部分应用相同的许可证，并且在每个许可文件中，必须保留再分发代码中的任何原始著作权，专利，商标和归属通知（不需要包括任何部分的派生作品）;并且在每个更改的许可文件中，都必须添加一条通知，说明对该文件进行了更改。</p><p>如果声明文本文件作为原始作品发布的一部分包含在内，则派生作品必须在包含该通知文本文件的可读副本，可以是文档或显示在软件中。</p><p>声明文件的内容不会修改许可证，因为它们仅用于提供信息，并且可以在许可证文本中添加更多属性声明，前提是这些声明不能被理解为修改许可证。修改可能有适当的著作权声明，并可能为修改提供不同的许可条款。</p><p>除非另有明确规定，否则许可证持有者向授权者提交的任何文稿将根据许可证的条款进行，没有任何条款和条件，但这并不排除与授权者有关的这些贡献有单独的协议。</p><h3 id="GNU-General-Public-License-v3-0"><a href="#GNU-General-Public-License-v3-0" class="headerlink" title="GNU General Public License v3.0"></a>GNU General Public License v3.0</h3><p><strong>简介：</strong></p><p><strong>GNU通用公共许可协议</strong>（英语：GNU General Public License，缩写GNU GPL 或 GPL），是被广泛使用的<a href="https://zh.wikipedia.org/wiki/%E8%87%AA%E7%94%B1%E8%BB%9F%E4%BB%B6">自由软件</a><a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E8%AE%B8%E5%8F%AF%E8%AF%81">许可证</a>，给予了终端用户运行、学习、共享和修改软件的自由。许可证最初由<a href="https://zh.wikipedia.org/wiki/%E8%87%AA%E7%94%B1%E8%BB%9F%E4%BB%B6%E5%9F%BA%E9%87%91%E6%9C%83">自由软件基金会</a>的<a href="https://zh.wikipedia.org/wiki/%E7%90%86%E6%9F%A5%E5%BE%B7%C2%B7%E6%96%AF%E6%89%98%E6%9B%BC">理查德·斯托曼</a>为GNU项目所撰写，并授予计算机程序的用户自由软件定义（<a href="https://zh.wikipedia.org/w/index.php?title=The_Free_Software_Definition&action=edit&redlink=1">The Free Software Definition</a>）的权利。 GPL是一个<a href="https://zh.wikipedia.org/wiki/Copyleft">Copyleft</a>许可证，这意味着派生作品只能以相同的许可条款分发。 这与<a href="https://zh.wikipedia.org/wiki/%E5%AF%AC%E9%AC%86%E8%87%AA%E7%94%B1%E8%BB%9F%E9%AB%94%E6%8E%88%E6%AC%8A%E6%A2%9D%E6%AC%BE">宽松自由软件许可证</a>有所区别 ，如<a href="https://zh.wikipedia.org/wiki/BSD%E8%AE%B8%E5%8F%AF%E8%AF%81">BSD许可证</a>和<a href="https://zh.wikipedia.org/wiki/MIT%E8%A8%B1%E5%8F%AF%E8%AD%89">MIT许可证</a>就是其中被广泛使用的例子。 GPL是第一个普遍使用的Copyleft许可证。</p><p><strong>许可条件：</strong></p><p>GPL的条款和条件必须提供给任何接受GPL应用的作品的<a href="https://zh.wikipedia.org/wiki/%E5%89%AF%E6%9C%AC">副本</a>（“被许可人”）的人员。任何遵守条款和条件的被授证人员都有权修改作品，以及<a href="https://zh.wikipedia.org/wiki/%E8%A4%87%E8%A3%BD">复制</a>和重新<a href="https://zh.wikipedia.org/w/index.php?title=%E5%88%86%E7%99%BC&action=edit&redlink=1">分发</a>作品或任何派生版本。被许可人被允许为此服务收取费用，或无偿。后一点将GPL与禁止商业再分发的软件许可区分开来。FSF认为，自由软件不应该限制商业用途，GPL明确规定GPL作品可能以任何价格出售。</p><p>GPL还规定，经销商不得对GPL授予的<a href="https://zh.wikipedia.org/wiki/%E6%AC%8A%E5%88%A9">权利</a>施加“进一步<a href="https://zh.wikipedia.org/wiki/%E9%99%90%E5%88%B6">限制</a>”。禁止根据不披露协议或合同分发软件等活动。</p><p>许可证版本2的第四部分和版本3的第七部分要求，作为预编译二进制文件分发的程序应附有源代码的副本，通过与前一版本相同的机制分发源代码的书面报价编译的二进制文件或书面报价，以获取用户在GPL下接收预编译二进制文件时获得的源代码。版本2的第二部分和版本3的第五部分还要求“所有收件人本程序附带的许可证副本”。 许可证的版本3允许以其他方式提供源代码来实现第七部分。这些包括从相邻网络服务器下载源代码或通过点对点传输，只要编译代码是可用的，并且在哪里可以找到源代码的“清晰方向”。</p><p>除非作者明确赋予 FSF 著作权（除了作为GNU项目一部分的程序很少发生），否则FSF对GPL发布的作品不具有著作权。只有个人著作权持有人有权在发生许可证时才起诉。</p><h3 id="MIT-License"><a href="#MIT-License" class="headerlink" title="MIT License"></a>MIT License</h3><p><strong>简介：</strong></p><p>MIT许可协议之名源自麻省理工学院（Massachusetts Institute of Technology, MIT），又称“X许可协议”（X License）或“X11许可协议”（X11 License）</p><p>MIT内容与三条款<a href="https://zh.wikipedia.org/wiki/BSD%E6%8E%88%E6%AC%8A%E6%A2%9D%E6%AC%BE">BSD许可协议</a>（3-clause BSD license）内容颇为近似，但是赋予软件被许可人更大的权利与更少的限制。</p><p><strong>许可条件：</strong></p><p>被许可人有权利使用、复制、修改、合并、出版发行、散布、再许可和/或贩售软件及软件的副本，及授予被供应人同等权利，惟服从以下义务。</p><p>在软件和软件的所有副本中都必须包含以上著作权声明和本许可声明。</p><p>此许可协议并非属<a href="https://zh.wikipedia.org/wiki/Copyleft">copyleft</a>的自由软件许可协议条款，允许在<a href="https://zh.wikipedia.org/wiki/%E8%87%AA%E7%94%B1%E5%8F%8A%E5%BC%80%E6%94%BE%E6%BA%90%E4%BB%A3%E7%A0%81%E8%BD%AF%E4%BB%B6">自由及开放源代码软件</a>或非自由软件（proprietary software）所使用。</p><p>MIT的内容可依照程序著作权者的需求更改内容。此亦为MIT与<a href="https://zh.wikipedia.org/wiki/BSD_license">BSD</a>（The BSD license, 3-clause BSD license）本质上不同处。</p><p>MIT许可协议可与其他许可协议并存。另外，MIT条款也是自由软件基金会（FSF）所认可的自由软件许可协议条款，与<a href="https://zh.wikipedia.org/wiki/GPL">GPL</a>兼容。</p><p><strong>三种许可证的区别：</strong></p><p>许可证名称</p><p>Apache License 2.0</p><p>GNU General Public License v3.0</p><p>MIT License</p><p>权限</p><p>✅商业用途<br>✅修改<br>  ✅分配<br>✅专利使用<br>✅私人使用</p><p>✅商业用途<br> ✅修改<br> ✅分配<br> ✅专利使用<br> ✅私人使用</p><p>✅商业用途<br> ✅修改<br> ✅分配<br> ❎专利使用<br> ✅私人使用</p><p>局限性</p><p>❎商标使用<br> ❎责任<br> ❎保证</p><p>✅商标使用<br> ❎责任<br> ❎保证</p><p>✅商标使用<br> ❎责任<br> ❎保证</p><p>条件</p><p>✅许可和版权声明<br> ✅状态变更<br>❎公开来源<br> ❎相同许可证</p><p>✅许可和版权声明<br> ✅状态变更<br>✅公开来源<br> ✅相同许可证</p><p>✅许可和版权声明<br> ❎状态变更<br>❎公开来源<br> ❎相同许可证</p>]]></content>
    
    
    <categories>
      
      <category>日志</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>生产力工具uTools</title>
    <link href="/blog/2020/01/09/197/"/>
    <url>/blog/2020/01/09/197/</url>
    
    <content type="html"><![CDATA[<blockquote><p>uTools是一个极简、插件化、跨平台的现代桌面软件。通过自由选配丰富的插件，打造你得心应手的工具集合。当你熟悉它后，能够为你节约大量时间，让你可以更加专注地改变世界。</p></blockquote><p><strong>官网地址：</strong> <a href="https://u.tools/">https://u.tools/</a><br>支持Windows，Mac，Linux</p><p>通过快捷键（默认<code>alt+space</code>）就可以快速呼出这个搜索框。它相当聪明，可以支持输入、拖拽、自动粘贴等作为输入源，相应的插件也早已准备就绪，统一的设计风格和操作方式，助你高效的得到结果。</p><p><img src="https://u.tools/assets/img/section/2.png"></p><h4 id="uTools能做什么？"><a href="#uTools能做什么？" class="headerlink" title="uTools能做什么？"></a>uTools能做什么？</h4><p>最简单的，uTools可以作为一个程序快速启动器，支持英文、英文驼峰、中文拼音、拼音首字母来打开你的本地程序。除程序外，win10和mac用户还可以快速搜索并打开「控制面板」内的细项。总之，你只要还记得一个大概的名字，直接输入基本都能找到。</p><blockquote><p>针对中文特别优化，例如可以通过搜索<code>记事本</code>或<code>jsb</code>打开记事本，而不是搜索<code>notepad</code></p></blockquote><p>程序启动器仅仅是最基础的功能，uTools最大的特点就是拥有强大的插件系统，每个插件都有简洁美观、易于操作的界面，输入<code>plugins</code>进入插件管理，你就可以根据自己的需求挑选安装，组合成自己最趁手的工具合集，为各种日常操作提供便利。不断产生的新插件，也将为你带来无限可能。</p><p><img src="https://blog.virs.xyz/wp-content/uploads/2020/01/utool.png"></p><p><img src="https://blog.virs.xyz/wp-content/uploads/2020/01/utoos3.png"></p><p><strong>多样的插件可大大提高工作效率</strong></p><h4 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h4><ul><li>  <strong>插件化：</strong> 优秀的插件化设计，自取所需。每个插件解决一个具体场景的问题，简洁易用、随用随走。</li><li>  <strong>多功能输入框：</strong> 支持文本、截图、图片、文件、文件夹</li><li>  <strong>自动识别：</strong> 自动识别文本类型（json、base64、时间戳等）</li><li>  <strong>自动粘贴：</strong> 呼出uTools时，如果剪切板中5秒内有新的内容，将自动粘贴到输入框</li><li>  <strong>全局快捷键：</strong> 配合插件，可一键上传截图到图床、以图搜图、翻译剪贴板内容等</li><li>  <strong>数据同步：</strong> 云端同步，永不丢失</li></ul><p><img src="https://blog.virs.xyz/wp-content/uploads/2020/01/utool2.png"></p><p><strong>uTools支持在插件中心中下载文档</strong></p><p><img src="https://blog.virs.xyz/wp-content/uploads/2020/01/utool1.png"></p><p><strong>uTools支持导入开发文档，快捷搜索</strong></p>]]></content>
    
    
    <categories>
      
      <category>实用工具</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>利用forEach循环Dom元素</title>
    <link href="/blog/2020/01/08/195/"/>
    <url>/blog/2020/01/08/195/</url>
    
    <content type="html"><![CDATA[<p>DOM，主要用来修改HTML的标准编程接口，可以用来修改各种html标签内容 和属性 样式。</p><p>查找：</p><p>document： 整个文档。 </p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">document.getElementsByTagName<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">document.getElementById<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">document.getElementsByClassName<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">document.querySelector<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">document.querySelectorAll<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>遍历节点：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var div &#x3D; document.getElementsByClassName(&#39;con&#39;)[0];<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>div.parentNode-&gt; 父节点  (最顶端的parentNode为#document);<br>遍历元素：</p><p>div.children 遍历所有的子元素（孙子就不算）这就是一个对象，可以.length属性</p><p>获取节点类型：<code>div.firstElementChild.nodeType</code></p><p>元素节点 —— 1<br>属性节点 —— 2<br>文本节点 —— 3<br>注释节点 —— 8<br>document —— 9<br>DocumentFragment —— 11<br>获取节点类型 nodeType</p><p>forEach是循环数组用的，但是它不能循环Dom元素。<br>可以利用call来完成forEach循环Dom;</p><p>假设有这样的HTML结构：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;ul class&#x3D;&quot;box&quot;&gt;    &lt;li&gt;1&lt;&#x2F;li&gt;    &lt;li&gt;2&lt;&#x2F;li&gt;    &lt;li&gt;3&lt;&#x2F;li&gt;    &lt;li&gt;4&lt;&#x2F;li&gt;    &lt;li&gt;5&lt;&#x2F;li&gt;&lt;&#x2F;ul&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>点击上面的LI来输出自身的索引值，具体可看下面代码：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var arrLi &#x3D; document.querySelector(&quot;.box&quot;).children;Array.prototype.forEach.call(arrLi, function(ele, index) &#123;    ele.onclick &#x3D; function() &#123;        alert(index)    &#125;&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>需要注意的是，在IE8及以下是不支持forEach的，所以我们需要做下兼容，使用以下方法：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 兼容IE8以下浏览器方法：if (!Array.prototype.forEach) &#123;    Array.prototype.forEach &#x3D; function(fun) &#123;        for (var i &#x3D; 0; i &lt; this.length; i++) &#123;            if (i in this) &#123;                fun.call(arguments[1], this[i], i, this);            &#125;        &#125;    &#125;;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>关于网站版权声明(Copyright)的格式和写法</title>
    <link href="/blog/2020/01/08/191/"/>
    <url>/blog/2020/01/08/191/</url>
    
    <content type="html"><![CDATA[<p><strong>美国产权局关于版权声明格式的说明</strong>  </p><p>参考标准和格式是美国产权局的说明：<a href="http://www.copyright.gov/">http://www.copyright.gov/</a></p><p>Form of Notice for Visually Perceptible Copies<br>对于可视化的，或者图形的（比如书籍，电影，网页，软件）版权声明，应该具备如下三部分。<br>1. The symbol© (the letter C in a circle), or the word “Copyright,” or the abbreviation “Copr.”; and   </p><p>1。符号©（字母C外加一个圆），或者单词“Copyright”版权，或者缩写“Copr.”以及   </p><p>2. The year of first publication of the work. In the case of compilations or derivative works incorporating previously published material, the year date of first publication of the compilation or derivative work is sufficient. The year date may be omitted where a pictorial, graphic, or sculptural work, with accompanying textual matter, if any, is reproduced in or on greeting cards, postcards, stationery, jewelry, dolls, toys, or any useful article; and   </p><p>2。作品初次公开发表的年份。如果是之前发表材料的编辑或者衍生（编辑比如：文选，衍生比如：翻译或者编剧），有权利使用编辑或者衍生作品的最初发表年份。画报，绘画或者雕塑复制在贺卡，明信片，文具，珠宝，玩偶，玩具或者其他有用的物品上，如果有伴随的文本材料时，年份可以省略。以及   </p><p>3. The name of the owner of copyright in the work, or an abbreviation by which the name can be recognized, or a generally known alternative designation of the owner.   </p><p>3。作品的版权拥护者名称，或者可识别的拥有者名称缩写，或者是拥有者的其他为公众知晓的名称。   </p><p>Example: ©2006 John Doe   </p><p>The “C in a circle” notice is used only on “visually perceptible copies.” Certain kinds of works—for example, musical, dramatic, and literary works—may be fixed not in “copies” but by means of sound in an audio recording. Since audio recordings such as audio tapes and phonograph disks are “phonorecords” and not “copies,” the “C in a circle” notice is not used to indicate protection of the underlying musical, dramatic, or literary work that is recorded.   </p><p>圆圈中一个字母C的标志只能使用在“可视化的拷贝”。某类作品，比如音乐，戏剧和文学作品，可能没有在拷贝中，而是出现在音频记录中的声音。音位音频记录比如音频磁带和留声机磁盘等，是唱片，而不是拷贝，圆圈中C的标志不被用来表明对记录在这里的音乐，戏剧和文学作品的保护。   </p><p><strong>来自民间的关于版权声明格式的说明</strong>  </p><p>从法律角度看，加入了伯尔尼公约的国家，版权保护是随着作品（无论是文字，还是图片）的问世的即刻就得到版权的保护的，并不是必须要声明。但是作为惯例，这一小行文字还是有很好加强意识，提醒浏览者，所观看的内容是受到版权保护的。   </p><p>正确的格式应该是：Copyright [dates] by [author/owner]   </p><p>© 通常可以代替Copyright, 但是不可以用(c)。 All Rights Reserved 在某些国家曾经是必须的，但是现在在大多数国家，都不是法律上必须有的字样。   </p><p>参见下面几个正确的格式：   </p><p>©1995-2004 Macromedia, Inc. All rights reserved.   </p><p>©2004 Microsoft Corporation. All rights reserved.   </p><p>Copyright © 2004 Adobe Systems Incorporated. All rights reserved.   </p><p>©1995-2004 Eric A. and Kathryn S. Meyer. All Rights Reserved.   </p><p>请注意标点符号和大小写的用法，这也是专业精神的一种体现。  </p><p>现在流行some rights reserved：creativecommons.org  </p><p>some rights reserved 和copyright 本身并不矛盾，但是其中的界限更多是一个道德问题，真正的保留一部分权力，是指给浏览者fair use 的权利，fair use的界定也决不是随便乱用，或者抄袭。  </p><p>甚至说，除了copyright, 还有copyleft,它的定义是为了程序员开发能够共享源代码的一个方式，英文里free, 并不仅仅是免费。 而且这种的源码公开免费使用，和版权也一点都不冲突。请大家不要误解。  </p><p>对于从网上下载素材,如音乐,图片等版权问题， 有朋友问这个问题，答案很简单，所有的这些都有版权问题。和这些作品的大小格式没有关系。  </p><p>版权是互相的，因为每个人都在随时的拥有着你所刚刚创造的作品的版权，哪怕你的涂鸦之作已经被丢进垃圾桶，严格意义上，那也不可以被人抄袭的。不然公司就不需要碎纸机了。  </p><p>只有彼此的尊重，互相的尊重才能有真正意义上的共享，简单的拿来主义，或者因为我是经典的用户，所以别人就必须要尊重经典的版权，而我不必尊重别人的版权，是不会形成好的版权保护意识的。  </p><p>版权其实并不意味着付费，和商业化也没有直接的关联。很多时候，你如果真想使用版权保护的内容，只要发封邮件，询问一下许可就可以， 大多数的情形下，个人用户是很喜欢甚至欣赏这样的礼貌和尊重的。  </p><p>版权问题中很多的灰色地带，我想与其总是用法律的角度来要求用户，还不如让我们都从自己的道德来判断，从尊重的角度来取舍。</p>]]></content>
    
    
    <categories>
      
      <category>说明</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>HTML常用meta</title>
    <link href="/blog/2020/01/07/189/"/>
    <url>/blog/2020/01/07/189/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Meta标签是HTML中的一个辅助性标签，位于HTML文档头部和title标签之间，提供用户不可见的信息。<br>Meta：即元数据（Metadata）是数据的数据信息。</p><p>元数据可以被使用浏览器，搜索引擎或其他Web服务调用。</p></blockquote><h3 id="基础数据设置"><a href="#基础数据设置" class="headerlink" title="基础数据设置"></a><strong>基础数据设置</strong></h3><ul><li><strong>定义文档的字符编码</strong><br>  <code>&lt;meta charset=&quot;utf-8&quot; /&gt;</code></li><li><strong>强制浏览器内核为<code>Chromium</code>内核（主要用于国产双核浏览器）</strong><br>  <code>&lt;meta name=&quot;renderer&quot; content=&quot;webkit&quot; /&gt;</code><br>  <code>&lt;meta name= &quot;force-rendering&quot; content=&quot;webkit&quot; /&gt;</code></li><li><strong>如果有安装<code>Google Chrome Frame</code>插件则强制为<code>Chromium</code>内核，否则强制为本机支持的最高版本IE内核，（作用于IE浏览器）</strong><br>  <code>&lt;meta http=equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=Edge,chrome=1&quot; /&gt;</code></li><li><strong>设置视窗大小</strong><br>  <code>width</code>：设置<code>layout viewport</code>的宽度，为一个正整数，或为字符串“<code>width-device</code>”；<br>  <code>initial-scale</code>：设置页面的初始缩放值，为一个数字，可以带小数；<br>  <code>minimum-scale</code>：允许用户的最小缩放值，为一个数字，可以带小数；<br>  <code>maximum-scale</code>：允许用户的最大缩放值，为一个数字，可以带小数；<br>  <code>shrink-to-fit=no</code>：IOS9中使以上属性生效时加入；<br>  <code>height</code>：设置<code>layout viewport</code>的高度，为一个正整数（通常很少使用）;<br>  <code>user-scalable</code>：是否允许用户进行缩放，值为“no”或“yes”，“no”代表不允许，“yes”代表允许；<br>  <code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,shrink-to-fit=no,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; /&gt;</code></li><li><strong>页面描述</strong><br>  <code>&lt;meta name=&quot;description&quot; content=&quot;不超过150个字符&quot; /&gt;</code></li><li><strong>页面关键词</strong><br>  <code>&lt;meta name=&quot;keywords&quot; content=&quot;空格或“,”隔开&quot; /&gt;</code></li><li><strong>网页作者</strong><br>  <code>&lt;meta name=&quot;author&quot; content=&quot;name,email@xxx.com&quot; /&gt;</code></li><li><strong>搜索引擎抓取</strong><br>  <code>all</code>：文件将被检索，且页面上的链接可以被查询；<br>  <code>none</code>：文件将不被检索，且页面上的链接不可以被查询；<br>  <code>index</code>：文件将被检索；<br>  <code>follow</code>：页面上的链接可以被查询；<br>  <code>noindex</code>：文件将不被检索；<br>  <code>nofollow</code>：页面上的链接不可以被查询。<br>  <code>&lt;meta name=&quot;robots&quot; content=&quot;index,follow&quot; /&gt;</code></li><li><strong>忽略页面中的数字识别为电话，忽略email识别</strong><br>  <code>&lt;meta name=&quot;format-detection&quot; content=&quot;telphone=no,email=no&quot; /&gt;</code></li></ul><h3 id="针对浏览器"><a href="#针对浏览器" class="headerlink" title="针对浏览器"></a>针对浏览器</h3><ul><li><strong>拒绝百度转码</strong><br>  <code>&lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-siteapp&quot; /&gt;</code></li><li><strong>针对手持设备优化，主要针对一些老的不识别viewport的浏览器</strong><br>  <code>&lt;meta name=&quot;HandheldFriendly&quot; content=&quot;true&quot; /&gt;</code></li><li><strong>针对微软老式浏览器</strong><br>  <code>&lt;meta name=&quot;MobileOptimized&quot; content=&quot;320&quot; /&gt;</code></li><li><strong>UC强制竖屏</strong><br>  <code>&lt;meta name=&quot;screen-orientation&quot; content=&quot;portrait&quot; /&gt;</code></li><li><strong>QQ强制竖屏</strong><br>  <code>&lt;meta name=&quot;x5-orientation&quot; content=&quot;portrait&quot; /&gt;</code></li><li><strong>UC强制全屏</strong><br>  <code>&lt;meta name=&quot;full-screen&quot; content=&quot;yes&quot; /&gt;</code></li><li><strong>QQ强制全屏</strong><br>  <code>&lt;meta name=&quot;x5-fullscreen&quot; content=&quot;true&quot; /&gt;</code></li><li><strong>UC应用模式</strong><br>  <code>&lt;meta name=&quot;browsermode&quot; content=&quot;application&quot; /&gt;</code></li><li><strong>QQ应用模式</strong><br>  <code>&lt;meta name=&quot;x5-page-mode&quot; content=&quot;app&quot; /&gt;</code></li><li><strong>Windows Phone点击无高光</strong><br>  <code>&lt;meta name=&quot;msapplication-tap-highlight&quot; content=&quot;no&quot; /&gt;</code></li></ul><h3 id="针对IOS数据设置"><a href="#针对IOS数据设置" class="headerlink" title="针对IOS数据设置"></a>针对IOS数据设置</h3><ul><li><strong>添加到主屏后的标题</strong><br>  <code>&lt;meta name=&quot;apple-mobile-web-app-title&quot; content=&quot;标题&quot; /&gt;</code></li><li><strong>当网站添加到主屏幕快速启动方式，可隐藏地址栏，仅针对IOS的Safari浏览器（IOS7.0版本以后，Safari上已看不到效果）</strong><br>  <code>&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt;</code></li><li><strong>是否启用Webapp全屏模式，删除苹果默认的工具栏和菜单栏</strong><br>  <code>&lt;meta name=&quot;apple-touch-fullscreen&quot; content=&quot;yes&quot; /&gt;</code></li><li><strong>添加智能App广告条Smart App Banner（IOS6+ Safari）</strong><br>  <code>&lt;meta name=&quot;apple-itunes-app&quot; content=&quot;app-id=myAppStoreID,affiliate-data=myAffiliateData,app-argument=myURL&quot; /&gt;</code></li><li><strong>设置苹果工具栏颜色：默认值为default（白色），可以设置为black（黑色）和black-translucent（灰色半透明）</strong><br>  <code>&lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot; /&gt;</code></li></ul><h3 id="IOS网站添加至桌面时的图标"><a href="#IOS网站添加至桌面时的图标" class="headerlink" title="IOS网站添加至桌面时的图标"></a>IOS网站添加至桌面时的图标</h3><ul><li><strong>iPhone和iTouch，默认57x57像素，必须设置</strong><br>  <code>&lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;57x57&quot; href=&quot;table_ico57.png&quot;&gt;</code></li><li><strong>Retina iPhone 和 Retina iTouch，114x114 像素，可以没有，但推荐有</strong><br>  <code>&lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;72x72&quot; href=&quot;table_ico72.png&quot;&gt;</code><br>  <code>&lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;114x114&quot; href=&quot;table_ico114.png&quot;&gt;</code></li><li><strong>Retina iPad，144x144 像素，可以没有，但推荐有</strong><br>  <code>&lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;144x144&quot; href=&quot;table_ico144.png&quot;&gt;</code></li></ul><h3 id="IOS启动画面"><a href="#IOS启动画面" class="headerlink" title="IOS启动画面"></a>IOS启动画面</h3><ul><li><strong>iPad 竖屏 768 x 1004（标准分辨率）</strong><br>  <code>&lt;link rel=&quot;apple-touch-startup-image&quot; sizes=&quot;768x1004&quot; href=&quot;/splash-screen-768x1004.png&quot;/&gt;</code></li><li><strong>iPad 横屏 1024x748（标准分辨率）</strong><br>  <code>&lt;link rel=&quot;apple-touch-startup-image&quot; sizes=&quot;1024x748&quot; href=&quot;/Default-Portrait-1024x748.png&quot;/&gt;</code></li><li><strong>iPad 竖屏 1536x2008（Retina）</strong><br>  <code>&lt;link rel=&quot;apple-touch-startup-image&quot; sizes=&quot;1536x2008&quot; href=&quot;/splash-screen-1536x2008.png&quot;/&gt;</code></li><li><strong>iPad 横屏 2048x1496（Retina）</strong><br>  <code>&lt;link rel=&quot;apple-touch-startup-image&quot; sizes=&quot;2048x1496&quot; href=&quot;/splash-screen-2048x1496.png&quot;/&gt;</code></li><li><strong>iPhone/iPod Touch 竖屏 320x480 (标准分辨率)</strong><br>  <code>&lt;link rel=&quot;apple-touch-startup-image&quot; href=&quot;/splash-screen-320x480.png&quot;/&gt;</code></li><li><strong>iPhone/iPod Touch 竖屏 640x960 (Retina)</strong><br>  <code>&lt;link rel=&quot;apple-touch-startup-image&quot; sizes=&quot;640x960&quot; href=&quot;/splash-screen-640x960.png&quot;/&gt;</code></li><li><strong>iPhone 5/iPod Touch 5 竖屏 640x1136 (Retina)</strong><br>  <code>&lt;link rel=&quot;apple-touch-startup-image&quot; sizes=&quot;640x1136&quot; href=&quot;/splash-screen-640x1136.png&quot;/&gt;</code></li></ul><h3 id="Windows-8磁贴设置"><a href="#Windows-8磁贴设置" class="headerlink" title="Windows 8磁贴设置"></a>Windows 8磁贴设置</h3><ul><li><strong>Windows 8 磁贴颜色</strong><br>  <code>&lt;meta name=&quot;msapplication-TileColor&quot; content=&quot;#000&quot;/&gt;</code></li><li><strong>Windows 8 磁贴图标</strong><br>  <code>&lt;meta name=&quot;msapplication-TileImage&quot; content=&quot;icon.png&quot;/&gt;</code></li><li><strong>添加 RSS 订阅</strong><br>  <code>&lt;link rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot; title=&quot;RSS&quot; href=&quot;/rss.xml&quot;/&gt;</code></li></ul><h3 id="SNS社交标签"><a href="#SNS社交标签" class="headerlink" title="SNS社交标签"></a>SNS社交标签</h3><ul><li><strong>参考微博API</strong><br>  `<meta property="og:type" content="类型" />    <meta property="og:url" content="URL地址" />    <meta property="og:title" content="标题" />    <meta property="og:image" content="图片" />    <meta property="og:description" content="描述" />`</li></ul><h3 id="低版本IE浏览器访问问题"><a href="#低版本IE浏览器访问问题" class="headerlink" title="低版本IE浏览器访问问题"></a>低版本IE浏览器访问问题</h3><blockquote><p>添加好强制Webkit内核的代码，使用国产浏览器访问网站已经不存在IE兼容问题了，IE访客量将大大减少。但仍然不可避免会有一些老旧电脑通过低版本IE浏览器访问，如果我们专门为了这极小部分用户进行 CSS HACK ，将严重加重我们的工作量。<br>更何况自2016年1月起微软已经停止为IE11以下版本提供支持和更新，已经这么久没有更新，低版本IE不仅对CSS3和HTML5支持有问题，更有安全问题。<br>那么，我们不去支持低版本IE，这小部分用户怎么办呢？<br>我们可以使用 if IE 语句给网站添加IE升级提示，提示用户进行浏览器升级，或者切换更先进的浏览器再访问。<br>我们可以在刚刚的meta标签下添加一段跳转到IE升级提示页的代码（当IE版本低于IE11时跳转），实现低版本IE用户访问时提示他们进行升级或者更换浏览器。<br>强制Webkit内核和提示低版本IE访问用户升级完整代码如下所示，把这段代码添加到头部模板文件标签下即可：  </p><meta name="renderer" content="webkit"/>  <meta name="force-rendering" content="webkit"/>  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>  <script> /\*@cc\_on window.location.href="http://support.dmeng.net/upgrade-your-browser.html?referrer="+encodeURIComponent(window.location.href); @\*/ </script>  （@cc\_on 是 IE10 及更旧版IE特有的条件编译语句，因此可以用来判断是否除 IE11 以外的其他IE版本。）  因为低版本IE访问时因为不兼容CSS3和HTML5网站往往是错版的，添加了上面这段代码，当低版本IE用户访问时就会跳转到升级提示页，避免不必要的资源加载，降低网站服务器开销。</blockquote>]]></content>
    
    
    <categories>
      
      <category>HTML5</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>解决Vue中数据改变，DOM未重新渲染的问题</title>
    <link href="/blog/2020/01/07/187/"/>
    <url>/blog/2020/01/07/187/</url>
    
    <content type="html"><![CDATA[<p><strong>组件内部，属性值地址空间内引用地址改变，DOM不能渲染。</strong></p><p><strong>问题举例：</strong><br>数据改变了，但是页面没有渲染。</p><p>例：this.items = [[],[],[],[]]</p><p><strong>问题原因：</strong><br>这种情况下一般都是数组和<code>json</code>才会发生。</p><p>在<code>items</code> 中，修改任意一项数组中的值，DOM是不会更新的。</p><p><strong>解决方案：</strong></p><p><code>this.items = [...this.items]</code>。通过解构赋值，重新给items赋值。</p><p>组件之间传值，父组件传<code>data</code>改变,子组件未更新。</p><p>子组件中在<code>mounted</code>中对父组件传的值，进行了判断等相关处理，通过改变子组件自身定义的状态实现效果。<br>此时，父组件值更新，子组件不重新渲染，是因为，父组件值改变子组件不会走<code>mounted</code>的生命周期。</p><p><strong>处理方案：</strong></p><p>使用<code>watch</code>监听父组件传的值，当值改变的时候，进行对应操作。<br><code>推荐使用：</code><br>子组件中直接使用父组件传的值，如需类型转换或者简单判断，直接通过三目运算符判断使用，就省去了对 父组件传值的监听步骤。</p>]]></content>
    
    
    <categories>
      
      <category>解决方案</category>
      
      <category>Vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Promise简单应用</title>
    <link href="/blog/2020/01/07/184/"/>
    <url>/blog/2020/01/07/184/</url>
    
    <content type="html"><![CDATA[<h3 id="1-加载图片"><a href="#1-加载图片" class="headerlink" title="1.加载图片"></a>1.加载图片</h3><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const preloadImage &#x3D; function (path) &#123;  return new Promise(function (resolve, reject) &#123;    const image &#x3D; new Image();    image.onload  &#x3D; resolve;    image.onerror &#x3D; reject;    image.src &#x3D; path;  &#125;);&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="2-Generator函数与Promise的结合"><a href="#2-Generator函数与Promise的结合" class="headerlink" title="2.Generator函数与Promise的结合"></a>2.Generator函数与Promise的结合</h3><h3 id="Generator-函数与-Promise-的结合"><a href="#Generator-函数与-Promise-的结合" class="headerlink" title="Generator 函数与 Promise 的结合"></a>Generator 函数与 Promise 的结合</h3><p>使用 Generator 函数管理流程，遇到异步操作的时候，通常返回一个<code>Promise</code>对象。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">function getFoo () &#123;  return new Promise(function (resolve, reject)&#123;    resolve(&#39;foo&#39;);  &#125;);&#125;const g &#x3D; function* () &#123;  try &#123;    const foo &#x3D; yield getFoo();    console.log(foo);  &#125; catch (e) &#123;    console.log(e);  &#125;&#125;;function run (generator) &#123;  const it &#x3D; generator();  function go(result) &#123;    if (result.done) return result.value;    return result.value.then(function (value) &#123;      return go(it.next(value));    &#125;, function (error) &#123;      return go(it.throw(error));    &#125;);  &#125;  go(it.next());&#125;run(g);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码的 Generator 函数<code>g</code>之中，有一个异步操作<code>getFoo</code>，它返回的就是一个<code>Promise</code>对象。函数<code>run</code>用来处理这个<code>Promise</code>对象，并调用下一个<code>next</code>方法。</p>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JavaScript常用数组遍历方法</title>
    <link href="/blog/2020/01/07/179/"/>
    <url>/blog/2020/01/07/179/</url>
    
    <content type="html"><![CDATA[<ol><li><strong>普通的for循环</strong><br> <code>let arr = [1,2,3,4,5,6,7,8,9];    for (let i = 0; i &lt; arr.length; i ++) &#123;    console.log(arr[i]);    &#125;</code><br> <code>//最简单，**使用频率最高**的一种遍历方法，虽然性能不弱，但仍有优化空间</code><br> <code>for (let i = 0,len = arr.length; i &lt; len; i ++) &#123;    conso.log(arr[i]);    &#125;</code><br> <code>//使用临时变量保存数组长度，避免重复获取数组长度，**当数组较大时优化效果才会比较明显**</code><br> <code>for (let i = 0; arr[i] != null; i ++) &#123;    console.log(arr[i]);    &#125;</code><br> <code>//使用数组项本身判断的循环，**性能要远小于普通for循环**</code></li><li><strong>forEach循环</strong><br> <code>let arr = [1,2,3,4,5,6,7,8,9]    arr.forEach((item, index) =&gt; &#123;    console.log(item,index);    &#125;)</code><br> <code>//使用频率较高，**性能稍弱于普通for循环**，代码比较简单，缺点是无法中断停止整个循环</code></li><li><strong>for . . . in . . . 循环</strong><br> <code>let arr = [1,2,3,4,5,6,7,8,9]    for (let i in arr) &#123;    console.log(i);    &#125;</code><br> <code>//更常用于对象的遍历，在众多循环遍历方式中**效率最低**</code></li><li><strong>for . . . of . . . 循环</strong><br> <code>let arr = [1,2,3,4,5,6,7,8,9]    for (let i of arr) &#123;    console.log(i);    &#125;</code><br> <code>//可以通过break方法终止循环，continute方法跳过当次循环，**性能要好于for . . . in . . .循环，但仍比不上普通for循环**</code></li><li><strong>filter</strong><br> <code>let arr = [1,2,3,4,5,6,7,8,9]    arr.filter((item, index) =&gt; &#123;    console.log(item);    &#125;)    //不会对空数组进行检测，不会改变原始数组</code></li><li><strong>map</strong><br> <code>let arr = [1,2,3,4,5,6,7,8,9]    let newArr = arr.map((item, index) =&gt; &#123;    return item;    &#125;)    //支持return返回值，使用效率比forEach低</code></li><li><strong>every</strong><br> <code>let arr = [1,2,3,4,5,6,7,8,9]    arr.every((item, index) =&gt; &#123;    return item&gt; 5;    &#125;)    //检测数组所有元素是否都符合条件返回true，否则返回false</code></li><li><strong>some</strong><br> <code>let arr = [1,2,3,4,5,6,7,8,9]    arr.some((item, index) =&gt; &#123;    return item &gt; 7;    &#125;)    //检测到数组中只要有一个值符合条件就返回true，剩下的元素都不会继续执行，全部不符合则返回false</code></li><li><strong>reduce &amp;&amp; reduceRight</strong><br> <code>let arr = [1,2,3,4,5,6,7,8,9]    let newArr = arr.reduce((preTotal, curValue, index, array) =&gt;&#123;    return preTotal + curValue;    &#125;)    //reduce()接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终为一个值。reduceRight则是从右到左开始</code></li><li><strong>find &amp;&amp; findIndex</strong><br><code>let arr = [1,2,3,4,5,6,7,8,9]   let result = arr.find((item, index) =&gt; &#123;   if (index == 5) &#123;   return item;   &#125;   &#125;)   //find返回数组中符合条件的第一个元素，否则返回undefined，findIndex返回数组中符合条件的第一个元素的下标</code></li></ol>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Element UI Input输入框限制数字输入</title>
    <link href="/blog/2020/01/06/171/"/>
    <url>/blog/2020/01/06/171/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;el-form-item label&#x3D;&quot;发布版本号:&quot; prop&#x3D;&quot;version&quot; class&#x3D;&quot;versionAction&quot;&gt;    &lt;el-input v-model&#x3D;&quot;xxx.xxx&quot; maxlength&#x3D;&quot;8&quot; onkeyup&#x3D;&quot;value&#x3D;value.replace(&#x2F;[^\d.]&#x2F;g,&#39;&#39;)&quot; onblur&#x3D;&quot;value.slice(-1) &#x3D;&#x3D; &#39;.&#39;value &#x3D; value.slice(0,value.length - 1):&#39;&#39;&quot; onKeypress&#x3D;&quot;javascript:if(event.keyCode &#x3D;&#x3D; 32)event.returnValue &#x3D; false;&quot;&gt;     &lt;&#x2F;el-input&gt;&lt;&#x2F;el-form-item&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><p>onKeyUp：键盘抬起时事件</p><p>onBlur：输入框失去焦点事件</p><p>onKeyPress：键盘按下时事件</p>]]></content>
    
    
    <categories>
      
      <category>实用技巧</category>
      
      <category>Element-UI</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vue中使用wangEditor3</title>
    <link href="/blog/2020/01/02/166/"/>
    <url>/blog/2020/01/02/166/</url>
    
    <content type="html"><![CDATA[<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="通过npm安装："><a href="#通过npm安装：" class="headerlink" title="通过npm安装："></a>通过npm安装：</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">npm install wangeditor<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><h3 id="创建实例"><a href="#创建实例" class="headerlink" title="创建实例"></a>创建实例</h3><h4 id="基本用法："><a href="#基本用法：" class="headerlink" title="基本用法："></a>基本用法：</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt;  &lt;div&gt;    &lt;div id&#x3D;&quot;editor&quot; class&#x3D;&quot;editor&quot;&gt;&lt;&#x2F;div&gt;  &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; &lt;script&gt;&#x2F;&#x2F;导入wangEditorimport E from &#39;wangeditor&#39;export default &#123;  name: &#39;editor&#39;,  mounted () &#123;    var editor &#x3D; new E(&#39;#editor&#39;)    editor.customConfig.onchange &#x3D; (html) &#x3D;&gt; &#123;      this.formArticle.content &#x3D; html    &#125;    &#x2F;&#x2F;创建编辑器实例    editor.create()  &#125;&#125;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><img src="https://files.jb51.net/file_images/article/201810/20181010104607013.png?2018910104627" alt="简单的富文本编辑器实例"></p><h4 id="将菜单与编辑器主体分离："><a href="#将菜单与编辑器主体分离：" class="headerlink" title="将菜单与编辑器主体分离："></a>将菜单与编辑器主体分离：</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt;  &lt;div&gt;    &lt;div id&#x3D;&quot;editorMenu&quot; class&#x3D;&quot;editorMenu&quot;&gt;&lt;&#x2F;div&gt;    &lt;div id&#x3D;&quot;editor&quot; class&#x3D;&quot;editor&quot;&gt;&lt;&#x2F;div&gt;  &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;import E from &#39;wangeditor&#39;export default &#123;  name: &#39;editor&#39;,  mounted () &#123;    var editor &#x3D; new E(&#39;#editorMenu&#39;, &#39;#editor&#39;)&#x2F;&#x2F; 两个参数也可以传入 elem 对象，class 选择器    editor.customConfig.onchange &#x3D; (html) &#x3D;&gt; &#123;      this.formArticle.content &#x3D; html    &#125;    editor.create()  &#125;&#125;&lt;&#x2F;script&gt;&lt;style scoped&gt;.editorMenu &#123; border: 1px solid #ccc;&#125;.editor &#123; margin-top: -1px;&#x2F;&#x2F;将多出来的一像素边框隐藏 border: 1px solid #ccc; min-height: 400px;&#x2F;&#x2F;编辑框最小高度 height:auto;&#x2F;&#x2F;编辑框高度超过最小高度会根据内容高度自适应&#125;&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><img src="http://images2015.cnblogs.com/blog/138012/201705/138012-20170531224756289-7442240.png" alt="菜单与主体分离的编辑器"></p><h4 id="上传本地图片tab配置-隐藏网络图片tab配置："><a href="#上传本地图片tab配置-隐藏网络图片tab配置：" class="headerlink" title="上传本地图片tab配置/隐藏网络图片tab配置："></a>上传本地图片tab配置/隐藏网络图片tab配置：</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 下面两个配置，使用其中一个即可显示“上传图片”的tab。但是两者不要同时使用！！！    editor.customConfig.uploadImgShowBase64 &#x3D; true   &#x2F;&#x2F; 使用 base64 保存图片    editor.customConfig.uploadImgServer &#x3D; &#39;&#x2F;upload&#39;  &#x2F;&#x2F; 上传图片到服务器&#x2F;&#x2F; 隐藏“网络图片”tab    editor.customConfig.showLinkImg &#x3D; false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><img src="http://images2015.cnblogs.com/blog/138012/201706/138012-20170601204504524-830243744.png" alt="上传图片tab"></p><p><img src="http://images2015.cnblogs.com/blog/138012/201706/138012-20170601204308039-691571074.png" alt="网络图片tab"></p><h4 id="上传图片到服务器配置："><a href="#上传图片到服务器配置：" class="headerlink" title="上传图片到服务器配置："></a>上传图片到服务器配置：</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 配置服务器端地址editor.customConfig.uploadImgServer  &#x3D; &#39;服务器接口地址&#39;&#x2F;&#x2F;自定义filenameeditor.customConfig.uploadFileName   &#x3D; &#39;file&#39;&#x2F;&#x2F;自定义上传参数editor.customConfig.uploadImgHeaders &#x3D; &#123;    &#39;Accept&#39;    :&#39;*&#x2F;*&#39;,    &#39;Blade-Auth&#39;:xxxx&#125;&#x2F;&#x2F; 将图片大小限制为 3Meditor.customConfig.uploadImgMaxSize &#x3D; 3 * 1024 * 1024&#x2F;&#x2F; 限制一次最多上传 5 张图片editor.customConfig.uploadImgMaxLength &#x3D; 5&#x2F;&#x2F;使用监听函数处理上传图片的不同阶段editor.customConfig.uploadImgHooks &#x3D; &#123;    before: function (xhr, editor, files) &#123;        &#x2F;&#x2F; 图片上传之前触发        &#x2F;&#x2F; xhr 是 XMLHttpRequst 对象，editor 是编辑器对象，files 是选择的图片文件        &#x2F;&#x2F; 如果返回的结果是 &#123;prevent: true, msg: &#39;xxxx&#39;&#125; 则表示用户放弃上传        &#x2F;&#x2F; return &#123;        &#x2F;&#x2F;     prevent: true,        &#x2F;&#x2F;     msg: &#39;放弃上传&#39;        &#x2F;&#x2F; &#125;    &#125;,    success: function (xhr, editor, result) &#123;        &#x2F;&#x2F; 图片上传并返回结果，图片插入成功之后触发        &#x2F;&#x2F; xhr 是 XMLHttpRequst 对象，editor 是编辑器对象，result 是服务器端返回的结果    &#125;,    fail: function (xhr, editor, result) &#123;        &#x2F;&#x2F; 图片上传并返回结果，但图片插入错误时触发        &#x2F;&#x2F; xhr 是 XMLHttpRequst 对象，editor 是编辑器对象，result 是服务器端返回的结果    &#125;,    error: function (xhr, editor) &#123;        &#x2F;&#x2F; 图片上传出错时触发        &#x2F;&#x2F; xhr 是 XMLHttpRequst 对象，editor 是编辑器对象    &#125;,    timeout: function (xhr, editor) &#123;        &#x2F;&#x2F; 图片上传超时时触发        &#x2F;&#x2F; xhr 是 XMLHttpRequst 对象，editor 是编辑器对象    &#125;,    &#x2F;&#x2F; 如果服务器端返回的不是 &#123;errno:0, data: [...]&#125; 这种格式，可使用该配置    &#x2F;&#x2F; （但是，服务器端返回的必须是一个 JSON 格式字符串！！！否则会报错）    customInsert: function (insertImg, result, editor) &#123;        &#x2F;&#x2F; 图片上传并返回结果，自定义插入图片的事件（而不是编辑器自动插入图片！！！）        &#x2F;&#x2F; insertImg 是插入图片的函数，editor 是编辑器对象，result 是服务器端返回的结果        &#x2F;&#x2F; 举例：假如上传图片成功后，服务器端返回的是 &#123;url:&#39;....&#39;&#125; 这种格式，即可这样插入图片：        var url &#x3D; result.url        insertImg(url)        &#x2F;&#x2F; result 必须是一个 JSON 格式字符串！！！否则报错    &#125;&#125;&#x2F;&#x2F;自定义上传图片错误时的提示效果（默认为alert弹窗）editor.customConfig.customAlert &#x3D; function (info) &#123;    &#x2F;&#x2F; info 是需要提示的内容    alert(&#39;自定义提示：&#39; + info)&#125;&#x2F;&#x2F;完全控制上传图片过程editor.customConfig.customUploadImg &#x3D; function (files, insert) &#123;    &#x2F;&#x2F; files 是 input 中选中的文件列表    &#x2F;&#x2F; insert 是获取图片 url 后，插入到编辑器的方法    &#x2F;&#x2F; 上传代码返回结果之后，将图片插入到编辑器中    insert(imgUrl)&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="更多配置请参考wangEditor3官方文档："><a href="#更多配置请参考wangEditor3官方文档：" class="headerlink" title="更多配置请参考wangEditor3官方文档："></a>更多配置请参考wangEditor3官方文档：</h3><h3 id="https-www-kancloud-cn-wangfupeng-wangeditor3-332599"><a href="#https-www-kancloud-cn-wangfupeng-wangeditor3-332599" class="headerlink" title="https://www.kancloud.cn/wangfupeng/wangeditor3/332599"></a><a href="https://www.kancloud.cn/wangfupeng/wangeditor3/332599">https://www.kancloud.cn/wangfupeng/wangeditor3/332599</a></h3><h3 id="将wangEditor作为组件使用："><a href="#将wangEditor作为组件使用：" class="headerlink" title="将wangEditor作为组件使用："></a>将wangEditor作为组件使用：</h3><h4 id="子组件："><a href="#子组件：" class="headerlink" title="子组件："></a>子组件：</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt;  &lt;div id&#x3D;&quot;wangeditor&quot;&gt;    &lt;div ref&#x3D;&quot;editorElem&quot; style&#x3D;&quot;text-align:left&quot;&gt;&lt;&#x2F;div&gt;  &lt;&#x2F;div&gt; &lt;&#x2F;template&gt; &lt;script&gt; import E from &#39;wangeditor&#39; export default &#123;   name: &#39;editorElem&#39;,   data () &#123;    return &#123;     editorContent: &#39;&#39;,    &#125;   &#125;,   props:[&#39;catchData&#39;],  &#x2F;&#x2F;接收父组件的方法   mounted() &#123;     var editor &#x3D; new E(this.$refs.editorElem)    &#x2F;&#x2F;创建富文本实例     editor.customConfig.onchange &#x3D; (html) &#x3D;&gt; &#123;       this.editorContent &#x3D; html       this.catchData(html) &#x2F;&#x2F;把这个html通过catchData的方法传入父组件     &#125;     editor.customConfig.uploadImgServer &#x3D; &#39;你的上传图片的接口&#39;     editor.customConfig.uploadFileName &#x3D; &#39;你自定义的文件名&#39;     editor.customConfig.uploadImgHeaders &#x3D; &#123;       &#39;Accept&#39;: &#39;*&#x2F;*&#39;,       &#39;Authorization&#39;:&#39;Bearer &#39; + token  &#x2F;&#x2F;头部token     &#125;     &#x2F;&#x2F;wangEditor3中菜单栏无法换行显示，如菜单项内容超出则需要对菜单项进行删减     editor.customConfig.menus &#x3D; [     &#x2F;&#x2F;菜单配置       &#39;head&#39;,  &#x2F;&#x2F; 标题       &#39;bold&#39;,  &#x2F;&#x2F; 粗体       &#39;fontSize&#39;,  &#x2F;&#x2F; 字号       &#39;fontName&#39;,  &#x2F;&#x2F; 字体       &#39;italic&#39;,  &#x2F;&#x2F; 斜体       &#39;underline&#39;,  &#x2F;&#x2F; 下划线       &#39;strikeThrough&#39;,  &#x2F;&#x2F; 删除线       &#39;foreColor&#39;,  &#x2F;&#x2F; 文字颜色       &#39;backColor&#39;,  &#x2F;&#x2F; 背景颜色       &#39;link&#39;,  &#x2F;&#x2F; 插入链接       &#39;list&#39;,  &#x2F;&#x2F; 列表       &#39;justify&#39;,  &#x2F;&#x2F; 对齐方式       &#39;quote&#39;,  &#x2F;&#x2F; 引用       &#39;emoticon&#39;,  &#x2F;&#x2F; 表情       &#39;image&#39;,  &#x2F;&#x2F; 插入图片       &#39;table&#39;,  &#x2F;&#x2F; 表格       &#39;video&#39;,  &#x2F;&#x2F; 插入视频       &#39;code&#39;,  &#x2F;&#x2F; 插入代码       &#39;undo&#39;,  &#x2F;&#x2F; 撤销       &#39;redo&#39;  &#x2F;&#x2F; 重复     ]     &#x2F;&#x2F;下面是最重要的的方法    editor.customConfig.uploadImgHooks &#x3D; &#123;       before: function (xhr, editor, files) &#123;         &#x2F;&#x2F; 图片上传之前触发         &#x2F;&#x2F; xhr 是 XMLHttpRequst 对象，editor 是编辑器对象，files 是选择的图片文件         &#x2F;&#x2F; 如果返回的结果是 &#123;prevent: true, msg: &#39;xxxx&#39;&#125; 则表示用户放弃上传         &#x2F;&#x2F; return &#123;         &#x2F;&#x2F;   prevent: true,         &#x2F;&#x2F;   msg: &#39;放弃上传&#39;         &#x2F;&#x2F; &#125;       &#125;,       success: function (xhr, editor, result) &#123;         &#x2F;&#x2F; 图片上传并返回结果，图片插入成功之后触发         &#x2F;&#x2F; xhr 是 XMLHttpRequst 对象，editor 是编辑器对象，result 是服务器端返回的结果       this.imgUrl&#x3D;Object.values(result.data).toString()       &#125;,       fail: function (xhr, editor, result) &#123;         &#x2F;&#x2F; 图片上传并返回结果，但图片插入错误时触发         &#x2F;&#x2F; xhr 是 XMLHttpRequst 对象，editor 是编辑器对象，result 是服务器端返回的结果       &#125;,       error: function (xhr, editor) &#123;         &#x2F;&#x2F; 图片上传出错时触发         &#x2F;&#x2F; xhr 是 XMLHttpRequst 对象，editor 是编辑器对象       &#125;,       timeout: function (xhr, editor) &#123;         &#x2F;&#x2F; 图片上传超时时触发         &#x2F;&#x2F; xhr 是 XMLHttpRequst 对象，editor 是编辑器对象       &#125;,       &#x2F;&#x2F; 如果服务器端返回的不是 &#123;errno:0, data: [...]&#125; 这种格式，可使用该配置       &#x2F;&#x2F; （但是，服务器端返回的必须是一个 JSON 格式字符串！！！否则会报错）       customInsert: function (insertImg, result, editor) &#123;         &#x2F;&#x2F; 图片上传并返回结果，自定义插入图片的事件（而不是编辑器自动插入图片！！！）         &#x2F;&#x2F; insertImg 是插入图片的函数，editor 是编辑器对象，result 是服务器端返回的结果         &#x2F;&#x2F; 举例：假如上传图片成功后，服务器端返回的是 &#123;url:&#39;....&#39;&#125; 这种格式，即可这样插入图片：         let url &#x3D; Object.values(result.data)   &#x2F;&#x2F;result.data就是服务器返回的图片名字和链接         JSON.stringify(url)  &#x2F;&#x2F;在这里转成JSON格式         insertImg(url)         &#x2F;&#x2F; result 必须是一个 JSON 格式字符串！！！否则报错       &#125;     &#125;     editor.create()    &#125;&#125;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="父组件："><a href="#父组件：" class="headerlink" title="父组件："></a>父组件：</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt; &lt;div&gt;   &lt;wangeditor :catchData&#x3D;&quot;catchData&quot;&gt;&lt;&#x2F;wangeditor&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; &lt;script&gt; import wangeditor from &#39;.&#x2F;wangeditor&#39; data()&#123;   return&#123;    content:&quot;&quot;   &#125; &#125;, methods:&#123;   catchData(value)&#123;      this.content&#x3D;value   &#x2F;&#x2F;在这里接受子组件传过来的参数，赋值给data里的参数     &#125; &#125;, components: &#123;   wangeditor &#125;,&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="修改编辑器默认高度："><a href="#修改编辑器默认高度：" class="headerlink" title="修改编辑器默认高度："></a>修改编辑器默认高度：</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;wangEditor3中默认高度为300px.w-e-text-container&#123;    height: 700px !important;&#x2F;*!important是重点，因为原div是行内样式设置的高度300px*&#x2F;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>代码片段</category>
      
      <category>Vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>解决swiper高度自适应的问题</title>
    <link href="/blog/2019/12/18/155/"/>
    <url>/blog/2019/12/18/155/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;swiper class&#x3D;&quot;swiper-slide&quot;&gt;    &lt;swiper-item class&#x3D;&quot;swiper-slide-active&quot;&gt;1&lt;&#x2F;swiper-item&gt;    &lt;swiper-item class&#x3D;&quot;swiper-slide-active&quot;&gt;2&lt;&#x2F;swiper-item&gt;&lt;&#x2F;swiper&gt;CSS&#x2F;&#x2F;页面高度page &#123;    height:100%&#125;&#x2F;&#x2F;swiper设置高度.swiper-slide &#123;height: 100%;&#125;.swiper-slide-active &#123;height: auto;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>问题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ES6 Promise</title>
    <link href="/blog/2019/12/16/144/"/>
    <url>/blog/2019/12/16/144/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Promise含义"><a href="#1-Promise含义" class="headerlink" title="1.Promise含义"></a>1.Promise含义</h2><h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h3><ul><li>  异步编程的一种解决方案（相较于回调函数和事件更合理，更强大）</li><li>  一个保存着某个未来才会结束的事件（通常是一个异步操作）的结果的容器</li><li>  对象的状态不受外界影响（pending进行中，fulfilled已成功，rejected已失败）</li><li>  一旦状态改变，就不会再次变化，任何时候都可以得到这个结果（状态变化，只有两种可能：从pending转为fulfilled；从pending转为rejected）</li><li>  将异步操作以同步操作的流程表达出来，避免层层嵌套的回调函数</li></ul><h3 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h3><ul><li>  无法取消Promise，一旦新建会立即执行，无法中途取消</li><li>  如果不设置回调函数，Promise内部抛出的错误不会反应到外部</li><li>  当处于pending状态时，无法得知目前进行到那个阶段</li></ul><h2 id="2-基本用法"><a href="#2-基本用法" class="headerlink" title="2.基本用法"></a>2.基本用法</h2><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const promise &#x3D; new Promise(function(resolve,reject)&#123;    if(&#x2F;*异步操作成功*&#x2F;)&#123;        resolve(value);    &#125;else&#123;        reject(error);    &#125;&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>Promise构造函数接受一个函数作为参数，该参数的两个参数分别是resolve和reject。他们是两个函数，由JS引擎提供，不需要自己部署。</p><p>resolve函数的作用是将Promise对象的状态从未完成（pending）转换为已成功（resolved），在异步操作成功时调用，并将异步操作的结果作为参数传递过去。</p><p>reject函数的作用是将Promise对象的状态从未完成（pending）转换为已失败（rejected），在异步操作失败时调用，并将异步操作报出的错误作为参数传递出去。</p><p>Promise对象生成以后，可以使用then方法分别指定resolved状态和rejected状态的回调函数。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">promise.then(function(value)&#123;    &#x2F;&#x2F;success&#125;,function(error)&#123;    &#x2F;&#x2F;failure&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>then方法可以接受两个回调函数作为参数。第一个回调函数是Promise对象的状态变为resolved时调用，第二个回调函数时Promise对象的状态变为rejected时调用。其中，第二个函数是可选的，不一定要提供。这两个函数都接受Promise对象传出的值作为参数。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">function timeout(ms)&#123;    return new Promise((resolve,reject)&#x3D;&gt;&#123;        setTimeout(resolve,ms,&#39;done&#39;);    &#125;)&#125;timeout(100).then((value)&#x3D;&gt;&#123;    console.log(value);&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>timeout方法返回一个Promise实例，表示一段时间以后才会发生的结果。过了指定的时间（ms参数）以后，Promise实例的状态变为resolved，就会触发then方法绑定的回调函数。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">let promise &#x3D; new Promise(function(resolve,reject)&#123;    console.log(&#39;Promise&#39;);    resolve();&#125;);promise.then(function()&#123;    console.log(&#39;resolved.&#39;);&#125;);console.log(&#39;Hi!&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>Promise新建后会立即执行，所以首先输出的是Promise。然后then方法指定的回调函数，将在当前脚本所有同步任务执行完才会执行，所以resolved最后输出。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;异步加载图片示例function loadImageAsync(url)&#123;    return new Promise(function(resolve,reject)&#123;        const image &#x3D; new Image();        image.onload &#x3D; function()&#123;            resolve(image);        &#125;;        image.onerror &#x3D; function()&#123;            reject(new Error(&#39;Could not load image at &#39;+url));        &#125;;        image.src&#x3D;url;    &#125;);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>使用Promise包装了一个图片加载的异步操作，如果加载成功，就调用resolve方法，否则就调用reject方法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;Promise对象实现Ajax操作const getJSON &#x3D; function(url)&#123;    const promise &#x3D; new Promise(function(resolve,reject)&#123;        const handler &#x3D; function()&#123;            if(this.readyState !&#x3D;&#x3D; 4)&#123;                return;            &#125;            if(this.status &#x3D;&#x3D;&#x3D; 200)&#123;                resolve(this.response);            &#125;else&#123;                reject(new Error(this.statusText));            &#125;        &#125;;        const client &#x3D; new XMLHttpRequest();        client.open(&quot;Get&quot;,url);        client.onreadystatechange &#x3D; handler;        client.responseType &#x3D; &quot;json&quot;;        client.setRequestHeader(&quot;Accept&quot;,&quot;application&#x2F;json&quot;);        client.send();    &#125;);    return promise;&#125;getJSON(&quot;&#x2F;posts.json&quot;).then(function(json)&#123;    console.log(&quot;Contents:&quot; + json);&#125;,function(error)&#123;    console.error(&quot;出错了:&quot; + error);&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>getJSON是对XMLHttpRequest对象的封装，用于发出一个针对JSON数据的HTTP请求，并且返回一个Promise对象。</p><p>在getJSON内部，resolve函数和reject函数调用时，都带有参数。</p><p>如果调用resolve函数和reject函数时带有参数，那么他们的参数会被传递给回调函数。reject函数的参数通常是ERROR对象的实例，表示抛出的错误，resolve函数的参数除了正常的值以外，还可能是另一个Promise实例。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;案例const p1 &#x3D; new Promise(function (resolve, reject) &#123;  &#x2F;&#x2F; ...&#125;);const p2 &#x3D; new Promise(function (resolve, reject) &#123;  &#x2F;&#x2F; ...  resolve(p1);&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>p1和p2都是Promise的实例，但是p2的resolve方法将p1作为一个参数，即一个异步操作的结果是返回另一个异步操作。</p><p>需要注意的是：这时p1的状态就会传递给p2，也就是说p1的状态决定了p2的状态。如果p1的状态时pending，那么p2的回调函数就会等待p1的状态改变，如果p1的状态已经是resolved或者rejected，那么p2的回调函数将会立刻执行。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const p1 &#x3D; new Promise(function(resolve,reject)&#123;    setTimeout(()&#x3D;&gt;reject(new Error(&#39;fail&#39;)),3000);&#125;);const p2 &#x3D; new Promise(function(resolve,reject)&#123;    setTimeout(()&#x3D;&gt;resolve(p1),1000)&#125;)p2.then(result&#x3D;&gt;console.log(result))  .catch(error&#x3D;&gt;console.log(error))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>p1是一个Promise，3秒之后变为rejected。p2的状态在1秒之后改变，resolve方法返回的是p1.由于p2返回的是另一个Prmise，导致p2自己的状态无效了，由p1的状态决定p2的状态。所以，后面的then语句都变成针对后者（p1）.又过了2秒，p1变为rejected，导致触发catch方法指定的回到函数。</p><p>调用resolve或reject并不会终结Promise的参数函数的执行。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">new Promise((resolve,reject)&#x3D;&gt;&#123;    resolve(1);    console.log(2);&#125;).then(r&#x3D;&gt;&#123;    console.log(r);&#125;)&#x2F;&#x2F;2&#x2F;&#x2F;1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>调用resolve(1)后，后面的console.log(2)还是会执行，并且会首先打印出来。这是因为立即resolved的Promsie是在本轮事件循环的末尾执行，总是晚于本轮循环的同步任务。</p><p>一般来说，调用resolve或reject以后，Promise的使命就完成了，后续操作应该放到then方法里面，而不应该直接写在resolve或reject的后面。所以，最好在他们前面加上return语句，这样就不会有意外。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">new Promise((resolve,reject)&#x3D;&gt;&#123;    return resolve(1);    console.log(2); &#x2F;&#x2F;该语句不会执行&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><h2 id="3-Promise方法"><a href="#3-Promise方法" class="headerlink" title="3.Promise方法"></a>3.Promise方法</h2><h3 id="Promise-prototype-then"><a href="#Promise-prototype-then" class="headerlink" title="Promise.prototype.then()"></a>Promise.prototype.then()</h3><p>Promise实例具有then方法，也就是说，then方法是定义在原型对象Promise.prototype上的。它的作用是为Promise实例添加状态改变时的回调函数。前面说过，then方法的第一个参数是resolved状态的回调函数，第二个参数（可选）是rejected状态的回调函数。</p><p>then方法返回的是一个新的Promise实例（非原来的Promise实例）。因此可以采用链式写法：then方法后面再调用另一个then方法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">getJSON(&quot;&#x2F;posts.json&quot;).then(function(json)&#123;    return json.post;&#125;).then(function(post)&#123;    &#x2F;&#x2F;...&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>使用then方法，依次指定了两个回调函数。第一个回调函数完成以后，会将返回结果作为参数，传入第二个回调函数。</p><p>采用链式的then方法，可以指定一组按照次序调用的回调函数。这时，前一个回调函数，有可能返回的还是一个Promise对象（即有异步操作），这时后一个回调函数，就会等待该Promise对象的状态发生变化，才会被调用。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">getJSON(&quot;&#x2F;post&#x2F;1.json&quot;).then(function(post)&#123;    return getJSON(post.commentURL);&#125;).then(function(comments)&#123;    console.log(&quot;resolved:&quot;,comments);&#125;,function(err)&#123;    console.log(&quot;reject:&quot;,err);&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>第一个then方法指定的回调函数，返回的是另一个Promise对象。这是，第二个then方法指定的回调函数就会等待这个新的Promise对象状态发生变化。如果变为resolved，就调用第一个回调函数，如果状态变为rejected，就调用第二个回调函数。</p><p>采用箭头函数，可以使代码更简洁。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">getJSON(&quot;&#x2F;post&#x2F;1.json&quot;).then(  post &#x3D;&gt; getJSON(post.commentURL)).then(  comments &#x3D;&gt; console.log(&quot;resolved: &quot;, comments),  err &#x3D;&gt; console.log(&quot;rejected: &quot;, err));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="Promise-prototype-catch"><a href="#Promise-prototype-catch" class="headerlink" title="Promise.prototype.catch()"></a>Promise.prototype.catch()</h3><p>Promise.prototype.catch方法是.then(null,rejection)或.then(undefined,rejected)的别名，用于指定发生错误时的回调函数。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">getJSON(&quot;&#x2F;posts.json&quot;).then(function(posts)&#123;    &#x2F;&#x2F;...&#125;).catch(function(error)&#123;    &#x2F;&#x2F;处理getJSON和前一个回调函数运行时发生的错误    console.log(&quot;发生错误&quot;,error);&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>getJSON方法返回一个Promise对象，如果该对象状态变为resolved，则会调用then方法指定的回调函数；如果异步操作抛出错误，状态就会变为rejected，就会调用catch方法指定的回调函数，处理这个错误。另外，then方法指定的回调函数，如果运行中抛出错误，也会被catch方法捕获。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">p.then((val) &#x3D;&gt; console.log(&#39;fulfilled:&#39;, val))  .catch((err) &#x3D;&gt; console.log(&#39;rejected&#39;, err));&#x2F;&#x2F; 等同于p.then((val) &#x3D;&gt; console.log(&#39;fulfilled:&#39;, val))  .then(null, (err) &#x3D;&gt; console.log(&quot;rejected:&quot;, err));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const promise &#x3D; new Promise(function(resolve, reject) &#123;  throw new Error(&#39;test&#39;);&#125;);promise.catch(function(error) &#123;  console.log(error);&#125;);&#x2F;&#x2F; Error: test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>promise抛出一个错误，就会被catch方法指定的回调函数捕获。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 写法一const promise &#x3D; new Promise(function(resolve, reject) &#123;  try &#123;    throw new Error(&#39;test&#39;);  &#125; catch(e) &#123;    reject(e);  &#125;&#125;);promise.catch(function(error) &#123;  console.log(error);&#125;);&#x2F;&#x2F; 写法二const promise &#x3D; new Promise(function(resolve, reject) &#123;  reject(new Error(&#39;test&#39;));&#125;);promise.catch(function(error) &#123;  console.log(error);&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>reject方法的作用，等同于抛出错误。</p><p>如果Promise状态已经变成resolved，再抛出错误是无效的。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const promise &#x3D; new Promise(function(resolve,reject)&#123;    resolve(&quot;OK&quot;);    throw new Error(&quot;test&quot;);&#125;);promise.then(function(value)&#123;    console.log(value);&#125;).catch(function(error)&#123;    console.log(error)&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>Promise在resolve语句后面，再抛出错误，不会被捕获，等于没有抛出。因为Promise的状态一旦改变，就永久保持该状态，不会再变了。</p><p>Promise对象的错误具有“冒泡”性质，会一直向后传递，直到被捕获为止。也就是说，错误总是会被下一个catch语句捕获。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">getJSON(&#39;&#x2F;post&#x2F;1.json&#39;).then(function(post) &#123;  return getJSON(post.commentURL);&#125;).then(function(comments) &#123;  &#x2F;&#x2F; some code&#125;).catch(function(error) &#123;  &#x2F;&#x2F; 处理前面三个Promise产生的错误&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>一共有三个Promise对象：一个由getJSON产生，两个由then产生。他们之中任何一个抛出的错误，都会被最后一个catch捕获。</p><p>一般来说，不建议在then方法里面定义Reject状态的回调函数（即then的第二个参数），总是使用catch方法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; badpromise  .then(function(data) &#123;    &#x2F;&#x2F; success  &#125;, function(err) &#123;    &#x2F;&#x2F; error  &#125;);&#x2F;&#x2F; goodpromise  .then(function(data) &#123; &#x2F;&#x2F;cb    &#x2F;&#x2F; success  &#125;)  .catch(function(err) &#123;    &#x2F;&#x2F; error  &#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>第二种写法要好于第一种写法，理由是第二种写法可以捕获前面then方法执行中的错误，也更接近同步的写法（try/catch）。因此，建议总是使用catch方法，而不使用then方法的第二个参数。</p><p>跟传统的try/catch代码块不同的是，如果没有使用catch方法指定错误处理的回调函数，Promise对象抛出的错误不会传递到外层代码，即不会有任何反应。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const someAsyncThing &#x3D; function() &#123;  return new Promise(function(resolve, reject) &#123;    &#x2F;&#x2F; 下面一行会报错，因为x没有声明    resolve(x + 2);  &#125;);&#125;;someAsyncThing().then(function() &#123;  console.log(&#39;everything is great&#39;);&#125;);setTimeout(() &#x3D;&gt; &#123; console.log(123) &#125;, 2000);&#x2F;&#x2F; Uncaught (in promise) ReferenceError: x is not defined&#x2F;&#x2F; 123<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>someAsyncThing函数产生的Promise对象，内部有语法错误。浏览器运行到这一行，会打印出错误提示：ReferenceError:x is not defined，但不会退出进程、终止脚本执行，2秒后还是会输出123.这就是说，Promise内部的错误不会影响到Promise外部的代码，通俗的说法就是“Promise会吃掉错误”。</p><p>这个脚本放在服务器执行，退出码就是0（即表示执行成功）。不过Node有一个unhandledRejection事件，专门监听未捕获的reject错误，上面的脚本会触发这个事件的监听函数，可以在监听函数里面抛出错误。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">promise.on(&quot;unhandledRejection&quot;,function(err,p)&#123;    throw err;&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>unhandledRejection事件的监听函数有两个参数，第一个是错误对象，第二个是报错的Promise实例，它可以用来了解发生错误的环境信息。</p><p>Node有计划在未来废除unhandledRejection事件。如果Promise内部有未捕获的错误，会直接终止进程，并且进程的退出码不为0。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const promise &#x3D; new Promise(function (resolve, reject) &#123;  resolve(&#39;ok&#39;);  setTimeout(function () &#123; throw new Error(&#39;test&#39;) &#125;, 0)&#125;);promise.then(function (value) &#123; console.log(value) &#125;);&#x2F;&#x2F; ok&#x2F;&#x2F; Uncaught Error: test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>Promise指定在下一轮“事件循环”再抛出错误。到了这个时候，Promise的运行已经结束了，所以这个错误是在Promise函数体外抛出的，会冒泡到最外层，成了未捕获的错误。</p><p>一般总是建议Promise对象后面要跟catch方法，这样可以处理Promise内部发生的错误。catch方法返回的还是一个Promise对象，因此后面还可以接着调用then方法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const someAsyncThing &#x3D; function() &#123;  return new Promise(function(resolve, reject) &#123;    &#x2F;&#x2F; 下面一行会报错，因为x没有声明    resolve(x + 2);  &#125;);&#125;;someAsyncThing().catch(function(error) &#123;  console.log(&#39;oh no&#39;, error);&#125;).then(function() &#123;  console.log(&#39;carry on&#39;);&#125;);&#x2F;&#x2F; oh no [ReferenceError: x is not defined]&#x2F;&#x2F; carry on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>代码运行结束catch方法指定的回调函数，会接着运行后面那个then方法指定的回调函数。如果没有报错，则会跳过catch方法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">Promise.resolve().catch(function(error) &#123;  console.log(&#39;oh no&#39;, error);&#125;).then(function() &#123;  console.log(&#39;carry on&#39;);&#125;);&#x2F;&#x2F; carry on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面的代码中因为没有报错，跳过了catch方法，直接执行后面的then方法。此时要是then方法里面报错，就与前面的catch无关了。</p><p>catch方法之中还能再抛出错误。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const someAsyncThing &#x3D; function() &#123;  return new Promise(function(resolve, reject) &#123;    &#x2F;&#x2F; 下面一行会报错，因为x没有声明    resolve(x + 2);  &#125;);&#125;;someAsyncThing().then(function() &#123;  return someOtherAsyncThing();&#125;).catch(function(error) &#123;  console.log(&#39;oh no&#39;, error);  &#x2F;&#x2F; 下面一行会报错，因为 y 没有声明  y + 2;&#125;).then(function() &#123;  console.log(&#39;carry on&#39;);&#125;);&#x2F;&#x2F; oh no [ReferenceError: x is not defined]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面的代码中，catch方法抛出一个错误，因为后面没有别的catch方法了，导致这个错误不会被捕获，也不会传递到外层。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">someAsyncThing().then(function() &#123;  return someOtherAsyncThing();&#125;).catch(function(error) &#123;  console.log(&#39;oh no&#39;, error);  &#x2F;&#x2F; 下面一行会报错，因为y没有声明  y + 2;&#125;).catch(function(error) &#123;  console.log(&#39;carry on&#39;, error);&#125;);&#x2F;&#x2F; oh no [ReferenceError: x is not defined]&#x2F;&#x2F; carry on [ReferenceError: y is not defined]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面的代码中，第二个catch方法用来捕获前一个catch方法抛出的错误。</p><h3 id="Promise-prototype-finally"><a href="#Promise-prototype-finally" class="headerlink" title="Promise.prototype.finally()"></a>Promise.prototype.finally()</h3><p>finally方法用于指定不管Promise对象最后状态如何，都会执行的操作。该方法是ES2018引入标准的。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">promise.then(result&#x3D;&gt;&#123;...&#125;)       .catch(error&#x3D;&gt;&#123;...&#125;)       .finally(()&#x3D;&gt;&#123;...&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>不管Promise最后的状态，在执行完then或catch指定的回调函数以后，都会执行finally方法指定的回调函数。</p><p>服务器使用Promise处理请求，然后使用finally方法关掉服务器。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">server.listen(post)    .then(function()&#123;        &#x2F;&#x2F;...    &#125;)    .finally(server.stop);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>finally方法的回调函数不接受任何参数，这意味着没有办法知道，前面的Promise状态到底是fulfilled还是rejected。这表明finally方法里面的操作，应该是与状态无关的，不依赖于Promise的执行结果。</p><p>finally本质上是then方法的特例。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">promise.finally(()&#x3D;&gt;&#123;    &#x2F;&#x2F;语句&#125;)&#x2F;&#x2F;等同于promise.then(result&#x3D;&gt;&#123;    &#x2F;&#x2F;语句    return result;&#125;,error&#x3D;&gt;&#123;    &#x2F;&#x2F;语句    throw error;&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>如果不使用finally方法，同样的语句需要为成功和失败两种情况各写一次。有了finally方法，则只需要写一次。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">Promise.prototype.finally &#x3D; function(callback)&#123;    let P &#x3D; this.constructor;    return this.then(        value &#x3D;&gt; P.resolve(callback()).then(()&#x3D;&gt;value),        reason &#x3D;&gt; P.resolve(callback()).then(()&#x3D;&gt;&#123;throw reason&#125;)    );&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面的代码中，不管前面的Promise是fulfilled还是rejected，都会执行回调函数callback。finally方法总是会返回原来的值。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; resolve 的值是 undefinedPromise.resolve(2).then(() &#x3D;&gt; &#123;&#125;, () &#x3D;&gt; &#123;&#125;)&#x2F;&#x2F; resolve 的值是 2Promise.resolve(2).finally(() &#x3D;&gt; &#123;&#125;)&#x2F;&#x2F; reject 的值是 undefinedPromise.reject(3).then(() &#x3D;&gt; &#123;&#125;, () &#x3D;&gt; &#123;&#125;)&#x2F;&#x2F; reject 的值是 3Promise.reject(3).finally(() &#x3D;&gt; &#123;&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a>Promise.all()</h3><p>Promise.all()方法用于将多个Promise实例，包装成一个新的Promise实例。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const p &#x3D; Promise.all([p1,p2,p3]);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>Promise.all()方法接受一个数组作为参数，p1、p2、p3都是Promise实例，如果不是则会先调用Promise.resolve方法，将参数转为Promise实例，再进行处理。另外，Promise.all()方法的参数可以不是数组，但必须具有Iterator接口，且返回的每个成员都是Promise实例。</p><p>p的状态由p1、p2、p3决定，分成两种情况：</p><ol><li> 只有p1、p2、p3的状态都变成fulfilled，p的状态才会变成fulfilled，此时p1、p2、p3的返回值组成一个数组，传递给p的回调函数。</li><li> 只要p1、p2、p3之中有一个被rejected，p的状态就变成rejected，此时第一个被reject的实例的返回值，会传递给p的回调函数。</li></ol><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const promises &#x3D; [2,3,5,7,11,13].map(function(id)&#123;    return getJSON(&#39;&#x2F;post&#x2F;&#39;+id+&#39;.json&#39;);&#125;);Promise.all(promises).then(function(posts)&#123;    &#x2F;&#x2F;...&#125;).catch(function(reason)&#123;    &#x2F;&#x2F;...&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>promises是包含6个Promise实例的数组，只有这6个实例的状态都变成fulfilled，或者其中有一个变为rejected，才会调用<code>Promise.all</code>方法后面的回调函数。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const databasePromise &#x3D; connectDatabase();const booksPromise &#x3D; databasePromise  .then(findAllBooks);const userPromise &#x3D; databasePromise  .then(getCurrentUser);Promise.all([  booksPromise,  userPromise]).then(([books, user]) &#x3D;&gt; pickTopRecommendations(books, user));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><code>booksPromise</code>和<code>userPromise</code>是两个异步操作，只有等到它们的结果都返回了，才会触发<code>pickTopRecommendations</code>这个回调函数。</p><p>注意，如果作为参数的 Promise 实例，自己定义了<code>catch</code>方法，那么它一旦被<code>rejected</code>，并不会触发<code>Promise.all()</code>的<code>catch</code>方法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const p1 &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;  resolve(&#39;hello&#39;);&#125;).then(result &#x3D;&gt; result).catch(e &#x3D;&gt; e);const p2 &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;  throw new Error(&#39;报错了&#39;);&#125;).then(result &#x3D;&gt; result).catch(e &#x3D;&gt; e);Promise.all([p1, p2]).then(result &#x3D;&gt; console.log(result)).catch(e &#x3D;&gt; console.log(e));&#x2F;&#x2F; [&quot;hello&quot;, Error: 报错了]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><code>p1</code>会<code>resolved</code>，<code>p2</code>首先会<code>rejected</code>，但是<code>p2</code>有自己的<code>catch</code>方法，该方法返回的是一个新的 Promise 实例，<code>p2</code>指向的实际上是这个实例。该实例执行完<code>catch</code>方法后，也会变成<code>resolved</code>，导致<code>Promise.all()</code>方法参数里面的两个实例都会<code>resolved</code>，因此会调用<code>then</code>方法指定的回调函数，而不会调用<code>catch</code>方法指定的回调函数。</p><p>如果<code>p2</code>没有自己的<code>catch</code>方法，就会调用<code>Promise.all()</code>的<code>catch</code>方法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const p1 &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;  resolve(&#39;hello&#39;);&#125;).then(result &#x3D;&gt; result);const p2 &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;  throw new Error(&#39;报错了&#39;);&#125;).then(result &#x3D;&gt; result);Promise.all([p1, p2]).then(result &#x3D;&gt; console.log(result)).catch(e &#x3D;&gt; console.log(e));&#x2F;&#x2F; Error: 报错了<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race()"></a>Promise.race()</h3><p><code>Promise.race()</code>方法同样是将多个Promise实例包装成一个新的Promise实例。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const p &#x3D; Promise.race([p1,p2,p3]);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>只要p1，p2，p3之中有一个实例率先改变状态，p的状态也会跟着改变。那个率先改变的Promise实例的返回值，就传递给p的回调函数。</p><p><code>Promise.race()</code>方法的参数与<code>Promise.all()</code>方法一样，如果不是 Promise 实例，就会先调用下面讲到的<code>Promise.resolve()</code>方法，将参数转为 Promise 实例，再进一步处理。</p><p>如果指定时间内没有获得结果，就将 Promise 的状态变为<code>reject</code>，否则变为<code>resolve</code>。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const p &#x3D; Promise.race([  fetch(&#39;&#x2F;resource-that-may-take-a-while&#39;),  new Promise(function (resolve, reject) &#123;    setTimeout(() &#x3D;&gt; reject(new Error(&#39;request timeout&#39;)), 5000)  &#125;)]);p.then(console.log).catch(console.error);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>如果 5 秒之内<code>fetch</code>方法无法返回结果，变量<code>p</code>的状态就会变为<code>rejected</code>，从而触发<code>catch</code>方法指定的回调函数。</p><h3 id="Promise-allSettled"><a href="#Promise-allSettled" class="headerlink" title="Promise.allSettled()"></a>Promise.allSettled()</h3><p><code>Promise.allSettled()</code>方法接受一组 Promise 实例作为参数，包装成一个新的 Promise 实例。只有等到所有这些参数实例都返回结果，不管是<code>fulfilled</code>还是<code>rejected</code>，包装实例才会结束。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const promises &#x3D; [  fetch(&#39;&#x2F;api-1&#39;),  fetch(&#39;&#x2F;api-2&#39;),  fetch(&#39;&#x2F;api-3&#39;),];await Promise.allSettled(promises);removeLoadingIndicator();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码对服务器发出三个请求，等到三个请求都结束，不管请求成功还是失败，加载的滚动图标就会消失。</p><p>该方法返回的新的 Promise 实例，一旦结束，状态总是<code>fulfilled</code>，不会变成<code>rejected</code>。状态变成<code>fulfilled</code>后，Promise 的监听函数接收到的参数是一个数组，每个成员对应一个传入<code>Promise.allSettled()</code>的 Promise 实例。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const resolved &#x3D; Promise.resolve(42);const rejected &#x3D; Promise.reject(-1);const allSettledPromise &#x3D; Promise.allSettled([resolved, rejected]);allSettledPromise.then(function (results) &#123;  console.log(results);&#125;);&#x2F;&#x2F; [&#x2F;&#x2F;    &#123; status: &#39;fulfilled&#39;, value: 42 &#125;,&#x2F;&#x2F;    &#123; status: &#39;rejected&#39;, reason: -1 &#125;&#x2F;&#x2F; ]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码中，<code>Promise.allSettled()</code>的返回值<code>allSettledPromise</code>，状态只可能变成<code>fulfilled</code>。它的监听函数接收到的参数是数组<code>results</code>。该数组的每个成员都是一个对象，对应传入<code>Promise.allSettled()</code>的两个 Promise 实例。每个对象都有<code>status</code>属性，该属性的值只可能是字符串<code>fulfilled</code>或字符串<code>rejected</code>。<code>fulfilled</code>时，对象有<code>value</code>属性，<code>rejected</code>时有<code>reason</code>属性，对应两种状态的返回值。</p><p>下面是返回值用法的例子。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const promises &#x3D; [ fetch(&#39;index.html&#39;), fetch(&#39;https:&#x2F;&#x2F;does-not-exist&#x2F;&#39;) ];const results &#x3D; await Promise.allSettled(promises);&#x2F;&#x2F; 过滤出成功的请求const successfulPromises &#x3D; results.filter(p &#x3D;&gt; p.status &#x3D;&#x3D;&#x3D; &#39;fulfilled&#39;);&#x2F;&#x2F; 过滤出失败的请求，并输出原因const errors &#x3D; results  .filter(p &#x3D;&gt; p.status &#x3D;&#x3D;&#x3D; &#39;rejected&#39;)  .map(p &#x3D;&gt; p.reason);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>有时候，我们不关心异步操作的结果，只关心这些操作有没有结束。这时，<code>Promise.allSettled()</code>方法就很有用。如果没有这个方法，想要确保所有操作都结束，就很麻烦。<code>Promise.all()</code>方法无法做到这一点。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const urls &#x3D; [ &#x2F;* ... *&#x2F; ];const requests &#x3D; urls.map(x &#x3D;&gt; fetch(x));try &#123;  await Promise.all(requests);  console.log(&#39;所有请求都成功。&#39;);&#125; catch &#123;  console.log(&#39;至少一个请求失败，其他请求可能还没结束。&#39;);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码中，<code>Promise.all()</code>无法确定所有请求都结束。想要达到这个目的，写起来很麻烦，有了<code>Promise.allSettled()</code>，这就很容易了。</p><h3 id="Promise-any"><a href="#Promise-any" class="headerlink" title="Promise.any()"></a>Promise.any()</h3><p><code>Promise.any()</code>方法接受一组 Promise 实例作为参数，包装成一个新的 Promise 实例。只要参数实例有一个变成<code>fulfilled</code>状态，包装实例就会变成<code>fulfilled</code>状态；如果所有参数实例都变成<code>rejected</code>状态，包装实例就会变成<code>rejected</code>状态。该方法目前是一个第三阶段的提案 。</p><p><code>Promise.any()</code>跟<code>Promise.race()</code>方法很像，只有一点不同，就是不会因为某个 Promise 变成<code>rejected</code>状态而结束。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const promises &#x3D; [  fetch(&#39;&#x2F;endpoint-a&#39;).then(() &#x3D;&gt; &#39;a&#39;),  fetch(&#39;&#x2F;endpoint-b&#39;).then(() &#x3D;&gt; &#39;b&#39;),  fetch(&#39;&#x2F;endpoint-c&#39;).then(() &#x3D;&gt; &#39;c&#39;),];try &#123;  const first &#x3D; await Promise.any(promises);  console.log(first);&#125; catch (error) &#123;  console.log(error);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码中，<code>Promise.any()</code>方法的参数数组包含三个 Promise 操作。其中只要有一个变成<code>fulfilled</code>，<code>Promise.any()</code>返回的 Promise 对象就变成<code>fulfilled</code>。如果所有三个操作都变成<code>rejected</code>，那么就会<code>await</code>命令就会抛出错误。</p><p><code>Promise.any()</code>抛出的错误，不是一个一般的错误，而是一个 AggregateError 实例。它相当于一个数组，每个成员对应一个被<code>rejected</code>的操作所抛出的错误。下面是 AggregateError 的实现示例。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">new AggregateError() extends Array -&gt; AggregateErrorconst err &#x3D; new AggregateError();err.push(new Error(&quot;first error&quot;));err.push(new Error(&quot;second error&quot;));throw err;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>捕捉错误时，如果不用<code>try...catch</code>结构和 await 命令，可以像下面这样写。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">Promise.any(promises).then(  (first) &#x3D;&gt; &#123;    &#x2F;&#x2F; Any of the promises was fulfilled.  &#125;,  (error) &#x3D;&gt; &#123;    &#x2F;&#x2F; All of the promises were rejected.  &#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>下面是一个例子。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var resolved &#x3D; Promise.resolve(42);var rejected &#x3D; Promise.reject(-1);var alsoRejected &#x3D; Promise.reject(Infinity);Promise.any([resolved, rejected, alsoRejected]).then(function (result) &#123;  console.log(result); &#x2F;&#x2F; 42&#125;);Promise.any([rejected, alsoRejected]).catch(function (results) &#123;  console.log(results); &#x2F;&#x2F; [-1, Infinity]&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="Promise-resolve"><a href="#Promise-resolve" class="headerlink" title="Promise.resolve()"></a>Promise.resolve()</h3><p>有时需要将现有对象转为 Promise 对象，<code>Promise.resolve()</code>方法就起到这个作用。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const jsPromise &#x3D; Promise.resolve($.ajax(&#39;&#x2F;whatever.json&#39;));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>上面代码将 jQuery 生成的<code>deferred</code>对象，转为一个新的 Promise 对象。</p><p><code>Promise.resolve()</code>等价于下面的写法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">Promise.resolve(&#39;foo&#39;)&#x2F;&#x2F; 等价于new Promise(resolve &#x3D;&gt; resolve(&#39;foo&#39;))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p><code>Promise.resolve</code>方法的参数分成四种情况。</p><p><strong>（1）参数是一个 Promise 实例</strong></p><p>如果参数是 Promise 实例，那么<code>Promise.resolve</code>将不做任何修改、原封不动地返回这个实例。</p><p><strong>（2）参数是一个<code>thenable</code>对象</strong></p><p><code>thenable</code>对象指的是具有<code>then</code>方法的对象，比如下面这个对象。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">let thenable &#x3D; &#123;  then: function(resolve, reject) &#123;    resolve(42);  &#125;&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p><code>Promise.resolve</code>方法会将这个对象转为 Promise 对象，然后就立即执行<code>thenable</code>对象的<code>then</code>方法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">let thenable &#x3D; &#123;  then: function(resolve, reject) &#123;    resolve(42);  &#125;&#125;;let p1 &#x3D; Promise.resolve(thenable);p1.then(function(value) &#123;  console.log(value);  &#x2F;&#x2F; 42&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码中，<code>thenable</code>对象的<code>then</code>方法执行后，对象<code>p1</code>的状态就变为<code>resolved</code>，从而立即执行最后那个<code>then</code>方法指定的回调函数，输出 42。</p><p><strong>（3）参数不是具有<code>then</code>方法的对象，或根本就不是对象</strong></p><p>如果参数是一个原始值，或者是一个不具有<code>then</code>方法的对象，则<code>Promise.resolve</code>方法返回一个新的 Promise 对象，状态为<code>resolved</code>。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const p &#x3D; Promise.resolve(&#39;Hello&#39;);p.then(function (s)&#123;  console.log(s)&#125;);&#x2F;&#x2F; Hello<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码生成一个新的 Promise 对象的实例<code>p</code>。由于字符串<code>Hello</code>不属于异步操作（判断方法是字符串对象不具有 then 方法），返回 Promise 实例的状态从一生成就是<code>resolved</code>，所以回调函数会立即执行。<code>Promise.resolve</code>方法的参数，会同时传给回调函数。</p><p><strong>（4）不带有任何参数</strong></p><p><code>Promise.resolve()</code>方法允许调用时不带参数，直接返回一个<code>resolved</code>状态的 Promise 对象。</p><p>所以，如果希望得到一个 Promise 对象，比较方便的方法就是直接调用<code>Promise.resolve()</code>方法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const p &#x3D; Promise.resolve();p.then(function () &#123;  &#x2F;&#x2F; ...&#125;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码的变量<code>p</code>就是一个 Promise 对象。</p><p>需要注意的是，立即<code>resolve()</code>的 Promise 对象，是在本轮“事件循环”（event loop）的结束时执行，而不是在下一轮“事件循环”的开始时。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">setTimeout(function () &#123;  console.log(&#39;three&#39;);&#125;, 0);Promise.resolve().then(function () &#123;  console.log(&#39;two&#39;);&#125;);console.log(&#39;one&#39;);&#x2F;&#x2F; one&#x2F;&#x2F; two&#x2F;&#x2F; three<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码中，<code>setTimeout(fn, 0)</code>在下一轮“事件循环”开始时执行，<code>Promise.resolve()</code>在本轮“事件循环”结束时执行，<code>console.log(&#39;one&#39;)</code>则是立即执行，因此最先输出。</p><h3 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject()"></a>Promise.reject()</h3><p><code>Promise.reject(reason)</code>方法也会返回一个新的 Promise 实例，该实例的状态为<code>rejected</code>。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const p &#x3D; Promise.reject(&#39;出错了&#39;);&#x2F;&#x2F; 等同于const p &#x3D; new Promise((resolve, reject) &#x3D;&gt; reject(&#39;出错了&#39;))p.then(null, function (s) &#123;  console.log(s)&#125;);&#x2F;&#x2F; 出错了<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码生成一个 Promise 对象的实例<code>p</code>，状态为<code>rejected</code>，回调函数会立即执行。</p><p>注意，<code>Promise.reject()</code>方法的参数，会原封不动地作为<code>reject</code>的理由，变成后续方法的参数。这一点与<code>Promise.resolve</code>方法不一致。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const thenable &#x3D; &#123;  then(resolve, reject) &#123;    reject(&#39;出错了&#39;);  &#125;&#125;;Promise.reject(thenable).catch(e &#x3D;&gt; &#123;  console.log(e &#x3D;&#x3D;&#x3D; thenable)&#125;)&#x2F;&#x2F; true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码中，<code>Promise.reject</code>方法的参数是一个<code>thenable</code>对象，执行以后，后面<code>catch</code>方法的参数不是<code>reject</code>抛出的“出错了”这个字符串，而是<code>thenable</code>对象。</p><h3 id="Promise-try"><a href="#Promise-try" class="headerlink" title="Promise.try()"></a>Promise.try()</h3><p>实际开发中，经常遇到一种情况：不知道或者不想区分，函数<code>f</code>是同步函数还是异步操作，但是想用 Promise 来处理它。因为这样就可以不管<code>f</code>是否包含异步操作，都用<code>then</code>方法指定下一步流程，用<code>catch</code>方法处理<code>f</code>抛出的错误。一般就会采用下面的写法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">Promise.resolve().then(f)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>上面的写法有一个缺点，就是如果<code>f</code>是同步函数，那么它会在本轮事件循环的末尾执行。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const f &#x3D; () &#x3D;&gt; console.log(&#39;now&#39;);Promise.resolve().then(f);console.log(&#39;next&#39;);&#x2F;&#x2F; next&#x2F;&#x2F; now<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码中，函数<code>f</code>是同步的，但是用 Promise 包装了以后，就变成异步执行了。</p><p>那么有没有一种方法，让同步函数同步执行，异步函数异步执行，并且让它们具有统一的 API 呢？回答是可以的，并且还有两种写法。第一种写法是用<code>async</code>函数来写。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const f &#x3D; () &#x3D;&gt; console.log(&#39;now&#39;);(async () &#x3D;&gt; f())();console.log(&#39;next&#39;);&#x2F;&#x2F; now&#x2F;&#x2F; next<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码中，第二行是一个立即执行的匿名函数，会立即执行里面的<code>async</code>函数，因此如果<code>f</code>是同步的，就会得到同步的结果；如果<code>f</code>是异步的，就可以用<code>then</code>指定下一步，就像下面的写法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">(async () &#x3D;&gt; f())().then(...)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><p>需要注意的是，<code>async () =&gt; f()</code>会吃掉<code>f()</code>抛出的错误。所以，如果想捕获错误，要使用<code>promise.catch</code>方法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">(async () &#x3D;&gt; f())().then(...).catch(...)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>第二种写法是使用<code>new Promise()</code>。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const f &#x3D; () &#x3D;&gt; console.log(&#39;now&#39;);(  () &#x3D;&gt; new Promise(    resolve &#x3D;&gt; resolve(f())  ))();console.log(&#39;next&#39;);&#x2F;&#x2F; now&#x2F;&#x2F; next<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码也是使用立即执行的匿名函数，执行<code>new Promise()</code>。这种情况下，同步函数也是同步执行的。</p><p>鉴于这是一个很常见的需求，所以现在有一个<a href="https://github.com/ljharb/proposal-promise-try">提案</a>，提供<code>Promise.try</code>方法替代上面的写法。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const f &#x3D; () &#x3D;&gt; console.log(&#39;now&#39;);Promise.try(f);console.log(&#39;next&#39;);&#x2F;&#x2F; now&#x2F;&#x2F; next<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>事实上，<code>Promise.try</code>存在已久，Promise 库<a href="http://bluebirdjs.com/docs/api/promise.try.html"><code>Bluebird</code></a>、<a href="https://github.com/kriskowal/q/wiki/API-Reference#promisefcallargs"><code>Q</code></a>和<a href="https://github.com/cujojs/when/blob/master/docs/api.md#whentry"><code>when</code></a>，早就提供了这个方法。</p><p>由于<code>Promise.try</code>为所有操作提供了统一的处理机制，所以如果想用<code>then</code>方法管理流程，最好都用<code>Promise.try</code>包装一下。这样有<a href="http://cryto.net/~joepie91/blog/2016/05/11/what-is-promise-try-and-why-does-it-matter/">许多好处</a>，其中一点就是可以更好地管理异常。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">function getUsername(userId) &#123;  return database.users.get(&#123;id: userId&#125;)  .then(function(user) &#123;    return user.name;  &#125;);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面代码中，<code>database.users.get()</code>返回一个 Promise 对象，如果抛出异步错误，可以用<code>catch</code>方法捕获，就像下面这样写。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">database.users.get(&#123;id: userId&#125;).then(...).catch(...)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>但是<code>database.users.get()</code>可能还会抛出同步错误（比如数据库连接错误，具体要看实现方法），这时你就不得不用<code>try...catch</code>去捕获。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">try &#123;  database.users.get(&#123;id: userId&#125;)  .then(...)  .catch(...)&#125; catch (e) &#123;  &#x2F;&#x2F; ...&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>上面这样的写法就很笨拙了，这时就可以统一用<code>promise.catch()</code>捕获所有同步和异步的错误。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">Promise.try(() &#x3D;&gt; database.users.get(&#123;id: userId&#125;))  .then(...)  .catch(...)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>事实上，<code>Promise.try</code>就是模拟<code>try</code>代码块，就像<code>promise.catch</code>模拟的是<code>catch</code>代码块。</p>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaScript</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JS循环遍历方法及区别</title>
    <link href="/blog/2019/11/21/140/"/>
    <url>/blog/2019/11/21/140/</url>
    
    <content type="html"><![CDATA[<div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">[1] const arr &#x3D; [7, 8, 9];const obj &#x3D; &#123;  a: 4,  b: 5,  c: 6&#125;；[2] for (let v in arr)&#123; console.log(v);&#125;&#x2F;&#x2F; 0, 1, 2[3 ]for (let v in obj)&#123; console.log(v);&#125;&#x2F;&#x2F; a, b, c[4] arr.child &#x3D; &#39;child&#39;;[5] arr.__proto__.getChild &#x3D; function () &#123;    return this.child;     &#125;;[6] Array.prototype.parent &#x3D; &#39;parent&#39;;[7] for (let v in arr)&#123;        console.log(v);     &#125;&#x2F;&#x2F;  0, 1, 2, child, getChild, parent[8]for (let v of arr)&#123;       console.log(v);    &#125;&#x2F;&#x2F; 7, 8, 9[9] for (let v of arr.values())&#123;       console.log(v);    &#125;&#x2F;&#x2F; 7, 8, 9[10] for (let v of obj)&#123;       console.log(v);    &#125;&#x2F;&#x2F; 报错 [11] typeof arr.keys(); &#x2F;&#x2F; &#39;object&#39;arr.keys() instanceof Array; &#x2F;&#x2F; falsearr.keys() instanceof Object; &#x2F;&#x2F; true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>for in</p><p>for in在ES5中便出现了。一般用来遍历对象属性。但也可用于数组遍历，返回的值是数组的索引，因为，严格来说，数组也是一个对象，所对应的属性是每个值的索引。 **for-in只遍历对象自身的和继承的可枚举的属性(摘自 阮一峰ECMAScript 6 入门-对象扩展一章)**。<br>如[4]、[5]、[6]所示，为数组添加可遍历属性 <strong>（所对应描述器descriptor的enumerable属性为true）</strong> ，在[7]中用for-in遍历都可遍历出来。</p><p>for of</p><p>for of为ES6新增遍历方法。其可遍历所有具有 iterator 接口的数据结构。for…of循环内部调用的是数据结构的Symbol.iterator方法（generator函数）。<strong>（摘自 阮一峰ECMAScript 6 入门–Iterator 和 for…of 循环一章）</strong>。Symbol.iterator方法返回的是一个遍历器，当用for-of去遍历的时候， 自动调用里面的next方法。<br>如[8], [9]所示，数组原生具备iterator接口（即默认部署了Symbol.iterator属性），for…of循环本质上就是调用这个接口产生的 <strong>遍历器</strong>。再看?例子 <strong>（摘自 阮一峰ECMAScript 6 入门–Iterator 和 for…of 循环一章）</strong>，对象obj默认调用的遍历器生成器是obj.values即obj[Symbol.iterator] 。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">const colorArr &#x3D; [&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;];for(let v of colorArr) &#123;  console.log(v); &#125;&#x2F;&#x2F; red green blueconst colorObj &#x3D; &#123;&#125;;colorObj[Symbol.iterator] &#x3D; colorArr[Symbol.iterator].bind(colorArr);for(let v of colorObj) &#123;  console.log(v); &#125;&#x2F;&#x2F; red green blue<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>总结</p><p>所以说，（for in）遍历键名和 （for of）遍历键值，这种说法并不严谨。for in确实是遍历属性，而且更是遍历对象自身的和继承的可枚举的属性。但是，for of遍历键值这种说法便不严谨了，比如说我们一开始在[1]中声明的对象obj，键名为a，b， c； 键值为4，5，6；</p><p>按照（for of）遍历键值这种说法，用for of遍历obj应该返回键值4，5，6。可是如[10]所示，程序执行报错了。因为对象默认是没有iterator接口的，我们不可以直接遍历，当我们需要遍历对象的属性时，可以调用Object.keys(）返回一个数组，用来遍历所有的键名。当我们需要遍历对象的属性值时，应该调用obj.values()返回一个数组，用来遍历所有的键值。并不是说for-of遍历键值，for-of具体遍历并返回的是什么，是视of后面返回的数组对应是什么。就obj这个对象来说，我们可以遍历obj的键值（Object.values(obj)），也可以遍历obj的键名（Object.keys(obj)），更可以遍历对象的obj的键值对（Object.entires(obj)）。<br>同样。for-of遍历数组，数组是默认具有iterator接口的，即arr.values()，具体遍历并返回的是什么，是视of后面返回的遍历器对象是什么。arr的键值（arr.values()），也可以遍历数组arr的键名（arr.keys()），更可以遍历数组的arr的键值对（arr.entires()）。</p><p>遍历器对象是一个对象，不是数组。如[11]所示，arr.keys() 是对象Object的实例，并不是数组实例。</p>]]></content>
    
    
    <categories>
      
      <category>Works</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>v-charts vue图表生成插件</title>
    <link href="/blog/2019/11/20/137/"/>
    <url>/blog/2019/11/20/137/</url>
    
    <content type="html"><![CDATA[<blockquote><p>在使用 echarts 生成图表时，经常需要做繁琐的数据类型转化、修改复杂的配置项，v-charts 的出现正是为了解决这个痛点。基于 Vue2.0 和 echarts 封装的 v-charts 图表组件，只需要统一提供一种对前后端都友好的数据格式设置简单的配置项，便可轻松生成常见的图表。</p></blockquote><p>官方文档地址： <a href="https://v-charts.js.org/#/">https://v-charts.js.org/#/</a></p>]]></content>
    
    
    <categories>
      
      <category>Works</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Git常用命令</title>
    <link href="/blog/2019/11/19/134/"/>
    <url>/blog/2019/11/19/134/</url>
    
    <content type="html"><![CDATA[<p><strong>fetch vs pull</strong></p><p>git fetch是将远程主机的最新内容拉到本地，用户在检查了以后决定是否合并到工作本机分支中。<br>而git pull 则是将远程主机的最新内容拉下来后直接合并，即：git pull = git fetch + git merge，这样可能会产生冲突，需要手动解决。</p><p>下面是我整理的常用 Git 命令清单。几个专用名词的译名如下。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">Workspace：工作区Index &#x2F; Stage：暂存区Repository：仓库区（或本地仓库）Remote：远程仓库<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="一、新建代码库"><a href="#一、新建代码库" class="headerlink" title="一、新建代码库"></a>一、新建代码库</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none"># 在当前目录新建一个Git代码库$ git init# 新建一个目录，将其初始化为Git代码库$ git init [project-name]# 下载一个项目和它的整个代码历史$ git clone [url]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="二、配置"><a href="#二、配置" class="headerlink" title="二、配置"></a>二、配置</h4><p>Git的设置文件为.gitconfig，它可以在用户主目录下（全局配置），也可以在项目目录下（项目配置）。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none"># 显示当前的Git配置$ git config --list# 编辑Git配置文件$ git config -e [--global]# 设置提交代码时的用户信息$ git config [--global] user.name &quot;[name]&quot;$ git config [--global] user.email &quot;[email address]”git 修改当前的project的用户名的命令为：&gt; git config user.name 你的目标用户名;git修改当前的project提交邮箱的命令为：&gt; git config user.email 你的目标邮箱名;如果你要修改当前全局的用户名和邮箱时，需要在上面的两条命令中添加一个参数，–global，代表的是全局。命令分别为：&gt; git config  --global user.name 你的目标用户名；&gt; git config  --global user.email 你的目标邮箱名;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="三、增加-删除文件"><a href="#三、增加-删除文件" class="headerlink" title="三、增加/删除文件"></a>三、增加/删除文件</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none"># 添加指定文件到暂存区$ git add [file1] [file2] ...# 添加指定目录到暂存区，包括子目录$ git add [dir]# 添加当前目录的所有文件到暂存区$ git add .# 添加每个变化前，都会要求确认# 对于同一个文件的多处变化，可以实现分次提交$ git add -p# 删除工作区文件，并且将这次删除放入暂存区$ git rm [file1] [file2] ...# 停止追踪指定文件，但该文件会保留在工作区$ git rm --cached [file]# 改名文件，并且将这个改名放入暂存区$ git mv [file-original] [file-renamed]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="四、代码提交"><a href="#四、代码提交" class="headerlink" title="四、代码提交"></a>四、代码提交</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none"># 提交暂存区到仓库区$ git commit -m [message]# 提交暂存区的指定文件到仓库区$ git commit [file1] [file2] ... -m [message]# 提交工作区自上次commit之后的变化，直接到仓库区$ git commit -a# 提交时显示所有diff信息$ git commit -v# 使用一次新的commit，替代上一次提交# 如果代码没有任何新变化，则用来改写上一次commit的提交信息$ git commit --amend -m [message]# 重做上一次commit，并包括指定文件的新变化$ git commit --amend [file1] [file2] ...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="五、分支"><a href="#五、分支" class="headerlink" title="五、分支"></a>五、分支</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none"># 列出所有本地分支$ git branch# 列出所有远程分支$ git branch -r# 列出所有本地分支和远程分支$ git branch -a# 新建一个分支，但依然停留在当前分支$ git branch [branch-name]# 新建一个分支，并切换到该分支$ git checkout -b [branch]git checkout -b appoint_box（别名） origin&#x2F;feature&#x2F;20181128_1491627_appoint_box_1（分支名）# 新建一个分支，指向指定commit$ git branch [branch] [commit]# 新建一个分支，与指定的远程分支建立追踪关系$ git branch --track [branch] [remote-branch]# 切换到指定分支，并更新工作区$ git checkout [branch-name]# 切换到上一个分支$ git checkout -# 建立追踪关系，在现有分支与指定的远程分支之间$ git branch --set-upstream [branch] [remote-branch]# 合并指定分支到当前分支$ git merge [branch]# 选择一个commit，合并进当前分支$ git cherry-pick [commit]# 删除分支$ git branch -d [branch-name]# 删除远程分支$ git push origin --delete [branch-name]$ git branch -dr [remote&#x2F;branch]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="六、标签"><a href="#六、标签" class="headerlink" title="六、标签"></a>六、标签</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none"># 列出所有tag$ git tag# 新建一个tag在当前commit$ git tag [tag]# 新建一个tag在指定commit$ git tag [tag] [commit]# 删除本地tag$ git tag -d [tag]# 删除远程tag$ git push origin :refs&#x2F;tags&#x2F;[tagName]# 查看tag信息$ git show [tag]# 提交指定tag$ git push [remote] [tag]# 提交所有tag$ git push [remote] --tags# 新建一个分支，指向某个tag$ git checkout -b [branch] [tag]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="七、查看信息"><a href="#七、查看信息" class="headerlink" title="七、查看信息"></a>七、查看信息</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none"># 显示有变更的文件$ git status# 显示当前分支的版本历史$ git log# 显示commit历史，以及每次commit发生变更的文件$ git log --stat# 搜索提交历史，根据关键词$ git log -S [keyword]# 显示某个commit之后的所有变动，每个commit占据一行$ git log [tag] HEAD --pretty&#x3D;format:%s# 显示某个commit之后的所有变动，其&quot;提交说明&quot;必须符合搜索条件$ git log [tag] HEAD --grep feature# 显示某个文件的版本历史，包括文件改名$ git log --follow [file]$ git whatchanged [file]# 显示指定文件相关的每一次diff$ git log -p [file]# 显示过去5次提交$ git log -5 --pretty --oneline# 显示所有提交过的用户，按提交次数排序$ git shortlog -sn# 显示指定文件是什么人在什么时间修改过$ git blame [file]# 显示暂存区和工作区的代码差异$ git diff# 显示暂存区和上一个commit的差异$ git diff --cached [file]# 显示工作区与当前分支最新commit之间的差异$ git diff HEAD# 显示两次提交之间的差异$ git diff [first-branch]...[second-branch]# 显示今天你写了多少行代码$ git diff --shortstat &quot;@&#123;0 day ago&#125;&quot;# 显示某次提交的元数据和内容变化$ git show [commit]# 显示某次提交发生变化的文件$ git show --name-only [commit]# 显示某次提交时，某个文件的内容$ git show [commit]:[filename]# 显示当前分支的最近几次提交$ git reflog可以得到cimmit id# 从本地master拉取代码更新当前分支：branch 一般为master$ git rebase [branch]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="八、远程同步"><a href="#八、远程同步" class="headerlink" title="八、远程同步"></a>八、远程同步</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">$ git remote update  --更新远程仓储# 下载远程仓库的所有变动$ git fetch [remote]# 显示所有远程仓库$ git remote -v# 显示某个远程仓库的信息$ git remote show [remote]# 增加一个新的远程仓库，并命名$ git remote add [shortname] [url]# 取回远程仓库的变化，并与本地分支合并$ git pull [remote] [branch]# 上传本地指定分支到远程仓库$ git push [remote] [branch]# 强行推送当前分支到远程仓库，即使有冲突$ git push [remote] --force# 推送所有分支到远程仓库$ git push [remote] --all<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="九、撤销"><a href="#九、撤销" class="headerlink" title="九、撤销"></a>九、撤销</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none"># 恢复暂存区的指定文件到工作区$ git checkout [file]# 恢复某个commit的指定文件到暂存区和工作区$ git checkout [commit] [file]# 恢复暂存区的所有文件到工作区$ git checkout .# 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变$ git reset [file]# 重置暂存区与工作区，与上一次commit保持一致$ git reset --hard# 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变$ git reset [commit]# 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致$ git reset --hard [commit]# 重置当前HEAD为指定commit，但保持暂存区和工作区不变$ git reset --keep [commit]# 新建一个commit，用来撤销指定commit# 后者的所有变化都将被前者抵消，并且应用到当前分支$ git revert [commit]# 暂时将未提交的变化移除，稍后再移入$ git stash$ git stash pop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="十、其他"><a href="#十、其他" class="headerlink" title="十、其他"></a>十、其他</h4><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none"># 生成一个可供发布的压缩包$ git archive<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><hr><p>上传本地项目到远程仓库<br>1、（先进入项目文件夹）通过命令 git init 把这个目录变成git可以管理的仓库</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">git init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>2、把文件添加到版本库中，使用命令 git add .添加到暂存区里面去，不要忘记后面的小数点“.”，意为添加文件夹下的所有文件</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">git add .<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>3、用命令 git commit告诉Git，把文件提交到仓库。引号内为提交说明</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">git commit -m &#39;first commit&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>4、关联到远程库</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">git remote add origin 你的远程库地址<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>如：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">git remote add origin https:&#x2F;&#x2F;github.com&#x2F;githubusername&#x2F;demo.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>5、获取远程库与本地同步合并（如果远程库不为空必须做这一步，否则后面的提交会失败）</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">git pull --rebase origin master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>6、把本地库的内容推送到远程，使用 git push命令，实际上是把当前分支master推送到远程。执行此命令后会要求输入用户名、密码，验证通过后即开始上传。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">git push -u origin master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>*、状态查询命令</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">git status<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>Works</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>H5前端面试题</title>
    <link href="/blog/2019/10/25/130/"/>
    <url>/blog/2019/10/25/130/</url>
    
    <content type="html"><![CDATA[<p><strong>HTML5/CSS3</strong></p><p>左中右3个DIV，如何让中间的DIV先显示出来？</p><p>浏览器的兼容问题你如何解决。</p><ul><li>  Webkit前缀</li><li>  hack</li></ul><p>Position属性的值有哪些？怎样使用？</p><ul><li>  relative 相对定位，相对定位不脱离文档流，参考其在原来文档流中的位置，通过 top,bottom,left,right 定位，并 且可以通过z-index进行层次分级。</li><li>  absolute 绝对定位，绝对定位脱离文档流，依据最近的已经定位（绝对、相对或固定定位）的父元素，通过 top,bottom,left,right 定位。当父级 position 为 static 时，absolute元素将依据body根元素（浏览器窗口）进行定 位，可以通过z-index进行层次分级。</li><li>  fixed 固定定位，固定定位与父元素无关（无论父元素是否定位），直接根据浏览器窗口定位，且不随滚动条拖动 页面而滚动，可通过z-index进行层次分级。</li></ul><p>Doctype有什么作用？严格模式与混杂模式有什么区别？</p><ul><li>  <!DOCTYPE>声明叫做文件类型定义（DTD），声明的作用为了告诉浏览器该文件的类型。让浏览器解析器知道应该用哪个规范来解析文档。&lt;!DOCTYPE&gt;声明必须在 HTML 文档的第一行，这并不是一个 HTML 标签。</li><li><strong>严格模式：</strong>又称标准模式，是指浏览器按照 W3C 标准解析代码<br>  <strong>混杂模式：</strong>又称怪异模式或兼容模式，是指浏览器用自己的方式解析代码。</li></ul><p>常用浏览器的内核有哪些？</p><ul><li>  <strong>360浏览器：Chrome内核和IE内核</strong></li><li>  <strong>百度浏览器：IE和Webkit双内核。、</strong></li><li>  <strong>QQ浏览器：Chromium内核+IE双内核</strong></li><li>  <strong>猎豹浏览器：Trident和WebKit。</strong></li><li>  <strong>搜狗浏览器：chromium内核</strong></li></ul><p>什么是CSS Hack，作用是什么？</p><ul><li>  <strong>CSS hack是通过在</strong><a href="http://www.w3cschool.cn/codecamp/style-the-html-body-element.html"><strong>CSS样式</strong></a><strong>中加入一些特殊的符号，让不同的浏览器识别不同的符号（什么样的浏览器识别什么样的符号是有标准的，CSS hack就是让你记住这个标准），以达到应用不同的</strong><a href="http://www.w3cschool.cn/css"><strong>CSS</strong></a><strong>样式的目的。</strong></li><li>  <strong>属性级Hack：比如IE6能识别下划线“_”和星号“*”，IE7能识别星号“*”，但不能识别下划线”_ ”，而firefox两个都不能认识。</strong></li></ul><p>对W3C标准有哪些认识和理解</p><p>XHTML和HTML有何不同？</p><p><strong>在书写方面**</strong>:<br>1.XHTML** <strong>元素必须被正确地嵌套。****2.XHTML</strong> <strong>元素必须被关闭。标签名必须用小写字母。****3.XHTML</strong> <strong>文档必须拥有根元素。**</strong><br>4.XHTML<strong><strong>标签必须成双成对</strong></strong><br>5.html<strong><strong>对标签顺序要求不严格，</strong></strong>XHTML<strong><strong>标签顺序必须正确</strong></strong>总而言之<strong><strong>xhtml</strong></strong>比<strong><strong>html</strong></strong>更加规范**</p><p>知道哪些浏览器的兼容性问题？如何解决？</p><p><strong>不同浏览器的标签默认的外补丁和内补丁不同</strong></p><p> <strong>*{margin:0;padding:0}</strong></p><p>什么是语义化的HTML?</p><ul><li>   用最恰当的标签来标记内容。</li></ul><p>HTML5为什么只需要写<!DOCTYPE html>就可以了？</p><ul><li>  <!DOCTYPE>声明位于位于HTML文档中的第一行，处于 <html> 标签之前。作用：告知浏览器的解析器用什么文档标准解析这个文档。DOCTYPE不存在或格式不正确会导致文档以怪异模式呈现。</li></ul><p>HTML5有哪些新特性？移除了哪些元素？如何处理新标签的浏览器兼容性问题？如何区分HTML和HTML5?</p><ul><li>  用于媒介回放的 video 和 audio 元素;</li><li>  本地离线存储 localStorage 长期存储数据，浏览器关闭后数据不丢失;</li><li>  sessionStorage 的数据在浏览器关闭后自动删除;</li><li>  语意化更好的内容元素，比如 article、footer、header、nav、section;</li><li>  表单控件，calendar、date、time、email、url、search;</li><li>  新的技术webworker, websockt, Geolocation;</li></ul><p>页面编码和被请求的资源编码如果不一致如何处理？</p><ul><li>  对于ajax请求传递的参数，如果是get请求方式，参数如果传递中文，在有些浏览器会乱码，不同的浏览器对参数编码的处理方式不同，所以对于get请求的参数需要使用 encodeURIComponent函数对参数进行编码处理，后台开发语言都有相应的解码api。对于post请求不需要进行编码</li></ul><p>不用媒体查询和盒子布局，如何实现自适应？</p><ul><li>  弹性布局：flex; grid 布局；</li></ul><p>常见表单元素有哪些？HTML5提供了哪些新的表单元素？</p><ul><li>  Text, radio, submit, textarea, file,</li></ul><p>SVG图片和普通图片有何不同？有什么优势？</p><p>如何实现垂直居中？</p><p>什么是FOUC?如何解决？</p><ul><li>  如果使用import方法对<a href="https://www.baidu.com/s?wd=CSS&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao">CSS</a>进行导入,会导致某些页面在Windows 下的Internet Explorer出现一些奇怪的现象:以无样式显示页面内容的瞬间闪烁,这种现象称之为文档样式短暂失效(Flash of Unstyled Content),简称为FOUC.原因大致为： 1，使用import方法导入样式表。 2，将样式表放在页面底部 3，有几个样式表，放在html结构的不同位置。其实原理很清楚：当样式表晚于 结构性html 加载，当加载到此样式表时，页面将停止之前的渲染。此样式表被下载和解析后，将重新渲染页面，也就出现了短暂 的 花屏现象。解决方法：使用<a href="https://www.baidu.com/s?wd=LINK&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao">LINK</a>标签将样式表放在文档<a href="https://www.baidu.com/s?wd=HEAD&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao">HEAD</a>中更多</li></ul><p>什么是DIV高度塌陷？，如何解决？</p><ul><li><p>  父元素在文档流中高度默认是被子元素撑开的，当子元素脱离文档流以后，将无法撑起父元素的高度，也就会导致父元素的高度塌陷。</p></li><li><p>  使用after伪类</p></li><li><p>  设置overflow为一个非默认值，一般都是使用overflow:hidden来开启BFC</p></li></ul><p>开启BFC以后元素将会具有如下特性：</p><ul><li>  2.1 父元素的垂直外边距不会与子元素重叠</li><li>  2.2. 开启BFC的元素不会被浮动元素所覆盖</li><li>  2.3 开启BFC的元素可以包含浮动子元素</li></ul><p>两个a标签之间为何有空白？如何解决？</p><ul><li>  a标签默认是行内元素，而行内元素之间的回车键、多个空格、多个制表符（tab）等均会按一个空格来处理，这样的话，如果相邻的两个a标签不在同一行（换句话说它们之间有回车换行符），则显示在页面的时候它们之间就会出现一个空格的间隙。</li></ul><p>如何实现响应式布局？</p><ul><li>  媒体查询 盒子布局 flex弹性布局 grid 布局</li></ul><p>如何让div居中？如何居中一个浮动元素？如何让绝对定位的元素居中？</p><ul><li><p>  div居中的方式:text-algin:center/margin:0 auto;</p></li><li><p>  浮动元素居中的方式:position:relative</p></li><li><p>  让绝对定位的元素居中: left: 0;</p></li><li><p>              right: 0;</p></li><li><p>              top: 0;</p></li><li><p>              bottom: 0;</p></li><li><p>              margin: auto;</p></li></ul><p>怎样清除浮动？</p><ul><li>  1.clear:both 2.父级overflow:hidden 3.父级伪元素after：{content:””,clear:both;display:block}</li></ul><p>如何实现中间div宽度固定，两端div自适应宽度？说出2种方法</p><ul><li>  双飞翼（自适应加个父级容器，应用margin），圣杯（不加容器,padding）</li></ul><p>Background是否包含border？</p><p>CSS3的变形有哪些类型？</p><ul><li>  Rotale,scale,skew,translate</li></ul><p>说明CSS3动画(@keyframes,animation)和过渡(transition)的区别？</p><ul><li>  1）动画不需要事件触发，过渡需要。</li><li>  2）过渡只有一组（两个：开始-结束） 关键帧，动画可以设置多个</li></ul><p>CSS定位有哪些类型？说明一下具体的应用场合</p><ul><li>  relative,自身为原点</li><li>  absolute,浏览器窗口原点为原点</li><li>  fixed，不随滚动条拖动 页面而滚动</li></ul><p>优雅降级和渐进增强是什么意思？</p><ul><li><p>  渐进增强 progressive enhancement：针对低版本浏览器进行构建页面，保证最基本的功能，然后再针对高级浏览器进行效果、交互等改进和追加功能达到更好的用户体验。</p></li><li><p>  优雅降级 graceful degradation：一开始就构建完整的功能，然后再针对低版本浏览器进行兼容。</p></li><li><p>  区别：优雅降级是从复杂的现状开始，并试图减少用户体验的供给，而渐进增强则是从一个非常基础的，能够起作用的版本开始，并不断扩充，以适应未来环境的需要。降级（功能衰减）意味着往回看；而渐进增强则意味着朝前看，同时保证其根基处于安全地带。</p></li></ul><p>display样式值有哪些？有啥作用</p><ul><li>  none,block,inline,inline-block</li></ul><p>如何在sass中定义一个变量</p><ul><li>  声明变量的符号“$”</li></ul><p>什么是弹性布局？</p><p>CSS的优先级如何定义</p><ul><li>  行内样式&gt;内部样式&gt;外部样式&gt;默认样式&gt;继承样式</li></ul><p>描述一下盒子模型</p><ul><li>  W3c和IE两种：都由content,  padding，border, margin构成</li><li>  box-sizing:content-box/border-box</li></ul><p>什么是outline属性，有什么作用？</p><ul><li>  outline （轮廓）是绘制于元素周围的一条线，位于边框边缘的外围，可起到突出元素的作用</li></ul><p>Position属性有哪些值？分别用在什么场景？</p><p>隐藏一个界面元素的方式你能想到哪些？分别有什么区别</p><ul><li>  display:none</li><li>  该方式让元素隐藏时，隐藏的元素不占空间，隐藏后将改变html原有样式。一旦父节点元素应用了display:none，父节点及其子孙节点元素全部不可见，而且无论其子孙元素如何不屈地挣扎都无济于事。</li><li>      2. visibility:hidden</li><li>      该方式让元素隐藏时，隐藏的元素还是占用原有位置，隐藏后不将改变html原有样式。但，如果该元素的子元素使用了visibility:visible的话，改子元素将不被隐藏。</li><li>      3. opacity:0</li><li>       该方式让元素隐藏时，隐藏的元素还是占用原有位置，隐藏后不将改变html原有样式。但，隐藏的元素所对应的事件，仍然可以触发。display属性不会出现过渡 即使添加了transition,opacity属性适合有过渡的元素使用.</li></ul><p>对于web前端适配多端的模式，你有什么解决方案？</p><ul><li>  适配多端 = 响应式设计页面</li></ul><p>A，button和input点击出现蓝色边框，如何去掉？</p><ul><li><p>  outline: none;</p></li><li><p>  父元素 height：auto，子元素使用了浮动样式，编码使用伪元素清除浮动</p></li><li><p>  .clearfix::after{</p></li><li><p>              content: “”;</p></li><li><p>              display: block;</p></li><li><p>              clear: both;</p></li><li><p>          }</p></li></ul><p>父子div中，子div宽度不定，编码实现子元素在父元素中水平居中</p><ul><li>  弹性布局</li><li>    display: flex;</li><li>  align-items: center; /* 垂直居中 */<br>  justify-content: center; /* 水平居中 */</li></ul><p>写出适配移动端的meta代码</p><ul><li>  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"></li></ul>]]></content>
    
    
    <categories>
      
      <category>HTML5</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>30个高质量免费电子书下载网站</title>
    <link href="/blog/2019/03/23/111/"/>
    <url>/blog/2019/03/23/111/</url>
    
    <content type="html"><![CDATA[<p>1.ePUBee <a href="http://t.cn/RV7t6G1">http://t.cn/RV7t6G1</a><br>应该是全球最大的免费电子书库，超过10万本书籍，50万个文件版本，总能找到你喜欢的适合阅读器的电子书文件。品类齐全，搜索功能强大，图书管理方便。</p><p>2.鸠摩搜书 <a href="http://t.cn/RG07GHI">http://t.cn/RG07GHI</a><br>一个强大的搜书神站，无论是什么类型的书籍，只要你知道书名，就可以轻松的搜到。页面简洁到没朋友。</p><p>3.Owllook <a href="http://t.cn/RoVRyCH">http://t.cn/RoVRyCH</a><br>一个免费下载各类小说的搜索引擎， 页面清新简洁，无广告。直接输入书名即可搜索</p><p>4.我的小书屋 <a href="http://t.cn/RJA5USm">http://t.cn/RJA5USm</a><br>提供各类畅销小说，网络小说，以及一些原版书籍下载。不仅如此还支持kindle漫画书下载。</p><p>5.西林街 <a href="http://t.cn/RXnrXtr">http://t.cn/RXnrXtr</a><br>垂直专注于网 盘、视频、文库（文档、古籍、专业书籍、电子书[PDF、ePub、Mobi等格式]）、学术（各种期刊、论文、学报等）和Mooc（在线课程、学习、视频教程）等资源的搜索。</p><p>6.书伴（kindle必备） <a href="http://t.cn/R9t9wDH">http://t.cn/R9t9wDH</a><br>书伴，原名“Kindle伴侣”，能让你更加深入地使用手中的Kindle阅读器，让读书成为生命的一部分，让灵魂永远行走在路上。</p><p>7.盘搜搜 <a href="http://t.cn/R0HoKpI">http://t.cn/R0HoKpI</a><br>一个老牌网盘搜索工具，功能非常强大。非常简洁的界面。每天都有更新，不同达人分享自己的“盘中资源”！盘搜不存储任何网盘内容，无论是工作还是学习都必备。</p><p>8.众人搜索网 <a href="http://t.cn/RkZw0z6">http://t.cn/RkZw0z6</a><br>一个电子书搜索功能的网站，可以同时搜索各类电子书、电子小说等。</p><p>9.计算机书籍控 <a href="http://t.cn/zR03zzO">http://t.cn/zR03zzO</a><br>这个网站可谓是计算机专业的福音，这里包含许多优秀的计算机书籍下载。无论是英文原版还是中文这里都有。</p><p>10.走读派 <a href="http://t.cn/zQDUssJ">http://t.cn/zQDUssJ</a><br>走读派提供一站式免费Kindle电子书下载与推送服务，是最方便的Kindle电子书网站，为您的Kindle提供免费电子书资源。算是kindle必备的一个网站。</p><p>11.苦瓜书盘 <a href="http://t.cn/ROe1pLk">http://t.cn/ROe1pLk</a><br>苦瓜书盘是供网友交流适合电纸书阅读的6寸pdf及mobi格式电子书制作技术的网站，这里提供电子书上传及下载。</p><p>12.书语者 <a href="http://t.cn/RKwcwDq">http://t.cn/RKwcwDq</a><br>书语者电子图书馆，一个搜书网站，让你快速找到想要的书籍！</p><p>13.知轩藏书 <a href="http://t.cn/RvukMXT">http://t.cn/RvukMXT</a><br>这是一个小说网站，在这里你可以找到你想要的小说。</p><p>14.书享家电子书下载导航 <a href="http://t.cn/EhLaW9G">http://t.cn/EhLaW9G</a><br>整合数十个相关网站，目前仍不断更新中。</p><p>15.集思会 <a href="http://t.cn/RoZWLBe">http://t.cn/RoZWLBe</a><br>集思会是一个kindle推送网站，你可以把本地和在线的kindle图书推送到你的kindle中进行阅读，也可以分享你的kindle图书给更多需要看的人</p><p>16.万千集合站 <a href="http://t.cn/R3FVezU">http://t.cn/R3FVezU</a><br>包含非常多的教材类相关电子书籍，搜索后直接显示下载链接。搜索结果基本涵盖了所有版本的电子教材、习题详解等。</p><p>17.蚂蚁搜书 <a href="http://t.cn/EhLaW9y">http://t.cn/EhLaW9y</a><br>IT书更多的资源网站，支持下载，不支持kindle推送。注册需要加微信索要邀请码，也是管理很严格了</p><p>18.影印古籍资料 <a href="http://t.cn/RTQSO8w">http://t.cn/RTQSO8w</a><br>提供7000+种古籍资料的网上阅读和PDF格式下载服务。</p><p>19.书格 <a href="http://t.cn/RhxO8ot">http://t.cn/RhxO8ot</a><br>书格是一个自由开放的在线古籍图书馆，致力于开放式分享、介绍、推荐古本（四九以前的影像本）PDF；网站致力于为古籍的保护与数字化传播贡献。</p><p>20.图灵社区 <a href="http://t.cn/R6tu1k7">http://t.cn/R6tu1k7</a><br>图灵社区很出名了，尤其是IT相关的书籍。</p><p>21.云海电子书 <a href="http://t.cn/RxAwXin">http://t.cn/RxAwXin</a><br>分类比较多，也可以自定义搜索，下载走的是国内城通网盘通道，还是比较快的。</p><p>22.Freebooks <a href="http://t.cn/RAVSgrO">http://t.cn/RAVSgrO</a><br>Free-eBooks是一个提供免费电子书下载，电子书资源，电子书作者介绍的网站，你可以免 费下载你喜欢的电子书，也可以上传你自己的电子书分享</p><p>23.古登堡计划 <a href="http://t.cn/hnhhU">http://t.cn/hnhhU</a><br>古登堡计划（Project Gutenberg）是一个以自由的和电子化的形式，基于互联网，大量提供版权过期而进入公有领域书籍的一项协作计划。</p><p>24.Free Book Spot <a href="http://t.cn/SwB354">http://t.cn/SwB354</a><br>Free Book Spot是一个免 费英文电子书大全网站，它提供有4485本免 费电子书，分为96个分类，高达71.97GB 。</p><p>25.Freetechbook<br>http:<a href="http://www.freetechbooks.com/">www.freetechbooks.com/</a><br>Free Tech Books 也是一个提供科技类免费电子书下载的网站，该网站提供的电子书都是符合法律要求或是版权协议，许可免 费的。</p><p>26.Bookboon <a href="http://t.cn/RujLAHM">http://t.cn/RujLAHM</a> 这也是国外一个比较有名的网站，收录了成千上万英文原著。</p><p>27.Manybooks <a href="http://t.cn/heT1k">http://t.cn/heT1k</a> 同样是国外出色的电子书下载网站，包含各类英文原版书籍下载阅读。</p><p>28.古籍图书馆 <a href="http://t.cn/zO5uVMj">http://t.cn/zO5uVMj</a> 这个网站上都是一些比较古老的书籍，提供下载和阅读</p><p>29.汉川草庐 <a href="http://t.cn/hHM9G">http://t.cn/hHM9G</a> 是一个喜欢文史哲，住在台湾的中国人所建造的后花园。</p><p>30.国学网 <a href="http://t.cn/hVE7v%E4%B8%80%E5%AE%B6%E5%9C%A8%E5%9B%BD%E5%AD%A6%E4%BC%A0%E6%92%AD%E9%A2%86%E5%9F%9F%E7%8B%AC%E5%85%B7%E7%89%B9%E8%89%B2%E7%9A%84%E6%96%87%E5%8C%96%E5%88%9B%E6%84%8F%E4%BC%81%E4%B8%9A%EF%BC%8C%E4%B8%BB%E8%A6%81%E4%BB%8E%E4%BA%8B%E5%8F%A4%E7%B1%8D%E6%95%B0%E5%AD%97%E5%8C%96%E7%A0%94%E7%A9%B6%E3%80%81%E7%BD%91%E7%BB%9C%E6%96%87%E7%8C%AE%E6%A3%80%E7%B4%A2%E5%BC%80%E5%8F%91%E5%92%8C%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE%EF%BC%8C%E6%98%AF%E4%B8%AD%E5%9B%BD%E6%9C%80%E5%A4%A7%E7%9A%84%E4%B8%93%E4%B8%9A%E5%8F%A4%E7%B1%8D%E7%94%B5%E5%AD%90%E6%96%87%E7%8C%AE%E6%95%B0%E6%8D%AE%E5%85%AC%E5%8F%B8%E4%B9%8B%E4%B8%80%E3%80%82">http://t.cn/hVE7v一家在国学传播领域独具特色的文化创意企业，主要从事古籍数字化研究、网络文献检索开发和网站建设，是中国最大的专业古籍电子文献数据公司之一。</a></p>]]></content>
    
    
    <categories>
      
      <category>日志</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JavaScript数据类型和变量</title>
    <link href="/blog/2018/12/29/83/"/>
    <url>/blog/2018/12/29/83/</url>
    
    <content type="html"><![CDATA[<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>计算机顾名思义就是可以做数学计算的机器，因此，计算机程序理所当然地可以处理各种数值。但是，计算机能处理的远不止数值，还可以处理文本、图形、音频、视频、网页等各种各样的数据，不同的数据，需要定义不同的数据类型。在JavaScript中定义了以下几种数据类型：</p><h4 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h4><p>JavaScript不区分整数和浮点数，统一用Number表示，以下都是合法的Number类型：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">123; &#x2F;&#x2F; 整数1230.456; &#x2F;&#x2F; 浮点数0.4561.2345e3; &#x2F;&#x2F; 科学计数法表示1.2345x1000，等同于1234.5-99; &#x2F;&#x2F; 负数NaN; &#x2F;&#x2F; NaN表示Not a Number，当无法计算结果时用NaN表示Infinity; &#x2F;&#x2F; Infinity表示无限大，当数值超过了JavaScript的Number所能表示的最大值时，就表示为Infinity<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>计算机由于使用二进制，所以，有时候用十六进制表示整数比较方便，十六进制用0x前缀和0-9，a-f表示，例如：<code>0xff00</code>，<code>0xa5b4c3d2</code>，等等，它们和十进制表示的数值完全一样。</p><p>Number可以直接做四则运算，规则和数学一致：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">1 + 2; &#x2F;&#x2F; 3(1 + 2) * 5 &#x2F; 2; &#x2F;&#x2F; 7.52 &#x2F; 0; &#x2F;&#x2F; Infinity0 &#x2F; 0; &#x2F;&#x2F; NaN10 % 3; &#x2F;&#x2F; 110.5 % 3; &#x2F;&#x2F; 1.5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>注意<code>%</code>是求余运算。</p><h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>字符串是以单引号’或双引号”括起来的任意文本，比如<code>&#39;abc&#39;</code>，<code>&quot;xyz&quot;</code>等等。请注意，<code>&#39;&#39;</code>或<code>&quot;&quot;</code>本身只是一种表示方式，不是字符串的一部分，因此，字符串<code>&#39;abc&#39;</code>只有<code>a</code>，<code>b</code>，<code>c</code>这3个字符。</p><h4 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h4><p>布尔值和布尔代数的表示完全一致，一个布尔值只有<code>true</code>、<code>false</code>两种值，要么是<code>true</code>，要么是<code>false</code>，可以直接用<code>true</code>、<code>false</code>表示布尔值，也可以通过布尔运算计算出来：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">true; &#x2F;&#x2F; 这是一个true值false; &#x2F;&#x2F; 这是一个false值2 &gt; 1; &#x2F;&#x2F; 这是一个true值2 &gt;&#x3D; 3; &#x2F;&#x2F; 这是一个false值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><p><code>&amp;&amp;</code>运算是与运算，只有所有都为<code>true</code>，<code>&amp;&amp;</code>运算结果才是<code>true</code>：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">true &amp;&amp; true; &#x2F;&#x2F; 这个&amp;&amp;语句计算结果为truetrue &amp;&amp; false; &#x2F;&#x2F; 这个&amp;&amp;语句计算结果为falsefalse &amp;&amp; true &amp;&amp; false; &#x2F;&#x2F; 这个&amp;&amp;语句计算结果为false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>运算是或运算，只要其中有一个为<code>true</code>，运算结果就是<code>true</code>：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">false  false; &#x2F;&#x2F; 这个语句计算结果为falsetrue  false; &#x2F;&#x2F; 这个语句计算结果为truefalse  true  false; &#x2F;&#x2F; 这个语句计算结果为true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p><code>!</code>运算是非运算，它是一个单目运算符，把<code>true</code>变成<code>false</code>，<code>false</code>变成<code>true</code>：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">! true; &#x2F;&#x2F; 结果为false! false; &#x2F;&#x2F; 结果为true! (2 &gt; 5); &#x2F;&#x2F; 结果为true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>布尔值经常用在条件判断中，比如：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var age &#x3D; 15;if (age &gt;&#x3D; 18) &#123;    alert(&#39;adult&#39;);&#125; else &#123;    alert(&#39;teenager&#39;);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><p>当我们对Number做比较时，可以通过比较运算符得到一个布尔值：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">2 &gt; 5; &#x2F;&#x2F; false5 &gt;&#x3D; 2; &#x2F;&#x2F; true7 &#x3D;&#x3D; 7; &#x2F;&#x2F; true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>实际上，JavaScript允许对任意数据类型做比较：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">false &#x3D;&#x3D; 0; &#x2F;&#x2F; truefalse &#x3D;&#x3D;&#x3D; 0; &#x2F;&#x2F; false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><p>要特别注意相等运算符<code>==</code>。JavaScript在设计时，有两种比较运算符：</p><p>第一种是<code>==</code>比较，它会自动转换数据类型再比较，很多时候，会得到非常诡异的结果；</p><p>第二种是<code>===</code>比较，它不会自动转换数据类型，如果数据类型不一致，返回<code>false</code>，如果一致，再比较。</p><p>由于JavaScript这个设计缺陷，_不要_使用<code>==</code>比较，始终坚持使用<code>===</code>比较。</p><p>另一个例外是<code>NaN</code>这个特殊的Number与所有其他值都不相等，包括它自己：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">NaN &#x3D;&#x3D;&#x3D; NaN; &#x2F;&#x2F; false<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>唯一能判断<code>NaN</code>的方法是通过<code>isNaN()</code>函数：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">isNaN(NaN); &#x2F;&#x2F; true<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>最后要注意浮点数的相等比较：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">1 &#x2F; 3 &#x3D;&#x3D;&#x3D; (1 - 2 &#x2F; 3); &#x2F;&#x2F; false<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>这不是JavaScript的设计缺陷。浮点数在运算过程中会产生误差，因为计算机无法精确表示无限循环小数。要比较两个浮点数是否相等，只能计算它们之差的绝对值，看是否小于某个阈值：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">Math.abs(1 &#x2F; 3 - (1 - 2 &#x2F; 3)) &lt; 0.0000001; &#x2F;&#x2F; true<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><h4 id="null和undefined"><a href="#null和undefined" class="headerlink" title="null和undefined"></a>null和undefined</h4><p><code>null</code>表示一个“空”的值，它和<code>0</code>以及空字符串<code>&#39;&#39;</code>不同，<code>0</code>是一个数值，<code>&#39;&#39;</code>表示长度为0的字符串，而<code>null</code>表示“空”。</p><p>在其他语言中，也有类似JavaScript的<code>null</code>的表示，例如Java也用<code>null</code>，Swift用<code>nil</code>，Python用<code>None</code>表示。但是，在JavaScript中，还有一个和<code>null</code>类似的<code>undefined</code>，它表示“未定义”。</p><p>JavaScript的设计者希望用<code>null</code>表示一个空的值，而<code>undefined</code>表示值未定义。事实证明，这并没有什么卵用，区分两者的意义不大。大多数情况下，我们都应该用<code>null</code>。<code>undefined</code>仅仅在判断函数参数是否传递的情况下有用。</p><h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>数组是一组按顺序排列的集合，集合的每个值称为元素。JavaScript的数组可以包括任意数据类型。例如：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">[1, 2, 3.14, &#39;Hello&#39;, null, true];<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>上述数组包含6个元素。数组用<code>[]</code>表示，元素之间用<code>,</code>分隔。</p><p>另一种创建数组的方法是通过<code>Array()</code>函数实现：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">new Array(1, 2, 3); &#x2F;&#x2F; 创建了数组[1, 2, 3]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>然而，出于代码的可读性考虑，强烈建议直接使用<code>[]</code>。</p><p>数组的元素可以通过索引来访问。请注意，索引的起始值为<code>0</code>：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var arr &#x3D; [1, 2, 3.14, &#39;Hello&#39;, null, true];arr[0]; &#x2F;&#x2F; 返回索引为0的元素，即1arr[5]; &#x2F;&#x2F; 返回索引为5的元素，即truearr[6]; &#x2F;&#x2F; 索引超出了范围，返回undefined<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h4><p>JavaScript的对象是一组由键-值组成的无序集合，例如：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var person &#x3D; &#123;    name: &#39;Bob&#39;,    age: 20,    tags: [&#39;js&#39;, &#39;web&#39;, &#39;mobile&#39;],    city: &#39;Beijing&#39;,    hasCar: true,    zipcode: null&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>JavaScript对象的键都是字符串类型，值可以是任意数据类型。上述<code>person</code>对象一共定义了6个键值对，其中每个键又称为对象的属性，例如，<code>person</code>的<code>name</code>属性为<code>&#39;Bob&#39;</code>，<code>zipcode</code>属性为<code>null</code>。</p><p>要获取一个对象的属性，我们用<code>对象变量.属性名</code>的方式：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">person.name; &#x2F;&#x2F; &#39;Bob&#39;person.zipcode; &#x2F;&#x2F; null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>变量的概念基本上和初中代数的方程变量是一致的，只是在计算机程序中，变量不仅可以是数字，还可以是任意数据类型。</p><p>变量在JavaScript中就是用一个变量名表示，变量名是大小写英文、数字、<code>$</code>和<code>_</code>的组合，且不能用数字开头。变量名也不能是JavaScript的关键字，如<code>if</code>、<code>while</code>等。申明一个变量用<code>var</code>语句，比如：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var a; &#x2F;&#x2F; 申明了变量a，此时a的值为undefinedvar $b &#x3D; 1; &#x2F;&#x2F; 申明了变量$b，同时给$b赋值，此时$b的值为1var s_007 &#x3D; &#39;007&#39;; &#x2F;&#x2F; s_007是一个字符串var Answer &#x3D; true; &#x2F;&#x2F; Answer是一个布尔值truevar t &#x3D; null; &#x2F;&#x2F; t的值是null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>变量名也可以用中文，但是，请不要给自己找麻烦。</p><p>在JavaScript中，使用等号<code>=</code>对变量进行赋值。可以把任意数据类型赋值给变量，同一个变量可以反复赋值，而且可以是不同类型的变量，但是要注意只能用<code>var</code>申明一次，例如：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var a &#x3D; 123; &#x2F;&#x2F; a的值是整数123a &#x3D; &#39;ABC&#39;; &#x2F;&#x2F; a变为字符串<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><p>这种变量本身类型不固定的语言称之为动态语言，与之对应的是静态语言。静态语言在定义变量时必须指定变量类型，如果赋值的时候类型不匹配，就会报错。例如Java是静态语言，赋值语句如下：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">int a &#x3D; 123; &#x2F;&#x2F; a是整数类型变量，类型用int申明a &#x3D; &quot;ABC&quot;; &#x2F;&#x2F; 错误：不能把字符串赋给整型变量<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><p>和静态语言相比，动态语言更灵活，就是这个原因。</p><p>请不要把赋值语句的等号等同于数学的等号。比如下面的代码：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var x &#x3D; 10;x &#x3D; x + 2;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><p>如果从数学上理解<code>x = x + 2</code>那无论如何是不成立的，在程序中，赋值语句先计算右侧的表达式<code>x + 2</code>，得到结果<code>12</code>，再赋给变量<code>x</code>。由于<code>x</code>之前的值是<code>10</code>，重新赋值后，<code>x</code>的值变成<code>12</code>。</p><p>要显示变量的内容，可以用<code>console.log(x)</code>，打开Chrome的控制台就可以看到结果。</p><p>使用<code>console.log()</code>代替<code>alert()</code>的好处是可以避免弹出烦人的对话框。</p><h3 id="strict模式"><a href="#strict模式" class="headerlink" title="strict模式"></a>strict模式</h3><p>JavaScript在设计之初，为了方便初学者学习，并不强制要求用<code>var</code>申明变量。这个设计错误带来了严重的后果：如果一个变量没有通过<code>var</code>申明就被使用，那么该变量就自动被申明为全局变量：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">i &#x3D; 10; &#x2F;&#x2F; i现在是全局变量<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>在同一个页面的不同的JavaScript文件中，如果都不用<code>var</code>申明，恰好都使用了变量<code>i</code>，将造成变量<code>i</code>互相影响，产生难以调试的错误结果。</p><p>使用<code>var</code>申明的变量则不是全局变量，它的范围被限制在该变量被申明的函数体内（函数的概念将稍后讲解），同名变量在不同的函数体内互不冲突。</p><p>为了修补JavaScript这一严重设计缺陷，ECMA在后续规范中推出了strict模式，在strict模式下运行的JavaScript代码，强制通过<code>var</code>申明变量，未使用<code>var</code>申明变量就使用的，将导致运行错误。</p><p>启用strict模式的方法是在JavaScript代码的第一行写上：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#39;use strict&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>这是一个字符串，不支持strict模式的浏览器会把它当做一个字符串语句执行，支持strict模式的浏览器将开启strict模式运行JavaScript。</p><p>不用<code>var</code>申明的变量会被视为全局变量，为了避免这一缺陷，所有的JavaScript代码都应该使用strict模式。我们在后面编写的JavaScript代码将全部采用strict模式。</p>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
      <category>教程</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JavaScript基本语法</title>
    <link href="/blog/2018/12/28/80/"/>
    <url>/blog/2018/12/28/80/</url>
    
    <content type="html"><![CDATA[<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>JavaScript的语法和Java语言类似，每个语句以<code>;</code>结束，语句块用<code>&#123;...&#125;</code>。但是，JavaScript并不强制要求在每个语句的结尾加<code>;</code>，浏览器中负责执行JavaScript代码的引擎会自动在每个语句的结尾补上<code>;</code>。 让JavaScript引擎自动加分号在某些情况下会改变程序的语义，导致运行结果与期望不一致。在本教程中，我们不会省略;，所有语句都会添加;。</p><p>例如，下面的一行代码就是一个完整的赋值语句：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var x &#x3D; 1;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>下面的一行代码是一个字符串，但仍然可以视为一个完整的语句：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#39;Hello, world&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>下面的一行代码包含两个语句，每个语句用<code>;</code>表示语句结束：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">var x &#x3D; 1; var y &#x3D; 2; &#x2F;&#x2F; 不建议一行写多个语句!<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>语句块是一组语句的集合，例如，下面的代码先做了一个判断，如果判断成立，将执行<code>&#123;...&#125;</code>中的所有语句：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">if (2 &gt; 1) &#123;    x &#x3D; 1;    y &#x3D; 2;    z &#x3D; 3;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>注意花括号<code>&#123;...&#125;</code>内的语句具有缩进，通常是4个空格。缩进不是JavaScript语法要求必须的，但缩进有助于我们理解代码的层次，所以编写代码时要遵守缩进规则。很多文本编辑器具有“自动缩进”的功能，可以帮助整理代码。</p><p><code>&#123;...&#125;</code>还可以嵌套，形成层级结构：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">if (2 &gt; 1) &#123;    x &#x3D; 1;    y &#x3D; 2;    z &#x3D; 3;    if (x &lt; y) &#123;        z &#x3D; 4;    &#125;    if (x &gt; y) &#123;        z &#x3D; 5;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>JavaScript本身对嵌套的层级没有限制，但是过多的嵌套无疑会大大增加看懂代码的难度。遇到这种情况，需要把部分代码抽出来，作为函数来调用，这样可以减少代码的复杂度。</p><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>以<code>//</code>开头直到行末的字符被视为行注释，注释是给开发人员看到，JavaScript引擎会自动忽略：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 这是一行注释alert(&#39;hello&#39;); &#x2F;&#x2F; 这也是注释<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div><p>另一种块注释是用<code>/*...*/</code>把多行字符包裹起来，把一大“块”视为一个注释：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&#x2F;* 从这里开始是块注释仍然是注释仍然是注释注释结束 *&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="大小写"><a href="#大小写" class="headerlink" title="大小写"></a>大小写</h3><p>请注意，JavaScript严格区分大小写，如果弄错了大小写，程序将报错或者运行不正常。</p>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
      <category>教程</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JavaScript基础</title>
    <link href="/blog/2018/12/28/77/"/>
    <url>/blog/2018/12/28/77/</url>
    
    <content type="html"><![CDATA[<p>JavaScript代码可以直接嵌在网页的任何地方，不过通常我们都把JavaScript代码放到<code>&lt;head&gt;</code>中：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;html&gt;&lt;head&gt;  &lt;script&gt;    alert(&#39;Hello, world&#39;);  &lt;&#x2F;script&gt;&lt;&#x2F;head&gt;&lt;body&gt;  ...&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>由<code>&lt;script&gt;...&lt;/script&gt;</code>包含的代码就是JavaScript代码，它将直接被浏览器执行。</p><p>第二种方法是把JavaScript代码放到一个单独的<code>.js</code>文件，然后在HTML中通过<code>&lt;script src=&quot;...&quot;&gt;&lt;/script&gt;</code>引入这个文件：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;html&gt;&lt;head&gt;  &lt;script src&#x3D;&quot;&#x2F;static&#x2F;js&#x2F;abc.js&quot;&gt;&lt;&#x2F;script&gt;&lt;&#x2F;head&gt;&lt;body&gt;  ...&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>这样，<code>/static/js/abc.js</code>就会被浏览器执行。</p><p>把JavaScript代码放入一个单独的<code>.js</code>文件中更利于维护代码，并且多个页面可以各自引用同一份<code>.js</code>文件。</p><p>可以在同一个页面中引入多个<code>.js</code>文件，还可以在页面中多次编写<code>&lt;script&gt; js代码... &lt;/script&gt;</code>，浏览器按照顺序依次执行。</p><p>有些时候你会看到<code>&lt;script&gt;</code>标签还设置了一个<code>type</code>属性：</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;  ...&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div><p>但这是没有必要的，因为默认的<code>type</code>就是JavaScript，所以不必显式地把<code>type</code>指定为JavaScript。</p><h3 id="如何编写JavaScript"><a href="#如何编写JavaScript" class="headerlink" title="如何编写JavaScript"></a>如何编写JavaScript</h3><p>可以用任何文本编辑器来编写JavaScript代码。这里我们推荐以下几种文本编辑器：</p><h4 id="Visual-Studio-Code"><a href="#Visual-Studio-Code" class="headerlink" title="Visual Studio Code"></a>Visual Studio Code</h4><p>微软出的<a href="https://code.visualstudio.com/">Visual Studio Code</a>，可以看做迷你版Visual Studio，免费！跨平台！内置JavaScript支持，强烈推荐使用！</p><h4 id="Sublime-Text"><a href="#Sublime-Text" class="headerlink" title="Sublime Text"></a>Sublime Text</h4><p><a href="https://www.sublimetext.com/">Sublime Text</a>是一个好用的文本编辑器，免费，但不注册会不定时弹出提示框。</p><h4 id="Notepad"><a href="#Notepad" class="headerlink" title="Notepad++"></a>Notepad++</h4><p><a href="https://notepad-plus-plus.org/">Notepad++</a>也是免费的文本编辑器，但仅限Windows下使用。</p><p>_注意_：不可以用Word或写字板来编写JavaScript或HTML，因为带格式的文本保存后不是_纯文本文件_，无法被浏览器正常读取。也尽量不要用记事本编写，它会自作聪明地在保存UTF-8格式文本时添加BOM头。</p><h3 id="如何运行JavaScript"><a href="#如何运行JavaScript" class="headerlink" title="如何运行JavaScript"></a>如何运行JavaScript</h3><p>要让浏览器运行JavaScript，必须先有一个HTML页面，在HTML页面中引入JavaScript，然后，让浏览器加载该HTML页面，就可以执行JavaScript代码。</p><p>你也许会想，直接在我的硬盘上创建好HTML和JavaScript文件，然后用浏览器打开，不就可以看到效果了吗？</p><p>这种方式运行部分JavaScript代码没有问题，但由于浏览器的安全限制，以<code>file://</code>开头的地址无法执行如联网等JavaScript代码，最终，你还是需要架设一个Web服务器，然后以<code>http://</code>开头的地址来正常执行所有JavaScript代码。</p>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
      <category>教程</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>HTML基础结构分析</title>
    <link href="/blog/2018/12/17/40/"/>
    <url>/blog/2018/12/17/40/</url>
    
    <content type="html"><![CDATA[<p>超文本标记语言（标准通用标记语言下的一个应用，外语缩写HTML），是迄今为止网络上应用最为广泛的语言，也是构成网页文档的主要语言。HTML文本是由HTML命令组成的描述性文本，HTML命令可以说明文字、图形、动画、声音、表格、链接等。HTML的结构包括头部（Head）、主体（Body）两大部分，其中头部描述浏览器所需的信息，而主体则包含所要说明的具体内容。</p><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">&lt;!doctype html&gt;    &lt;!--文档声明，位于文档中的最前面的位置告知Web浏览器页面使用的HTML版本--&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;    &lt;!-- meta 元信息--&gt;    &lt;!-- charset&#x3D;&quot;UTF-8&quot;网站的编码格式,utf-8国际通用编码格式--&gt;&lt;title&gt;无标题文档&lt;&#x2F;title&gt;    &lt;!--&lt;title&gt;网站的标题&lt;&#x2F;title&gt;--&gt;&lt;&#x2F;head&gt;    &lt;!--head结束标签--&gt;    &lt;!--html主体内容--&gt;&lt;body&gt;    &lt;!--只要显示页面的内容都放在body标签里--&gt;    &lt;!--所有的代码和符号都是英文状态下的--&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h4 id="base"><a href="#base" class="headerlink" title="base"></a>base</h4><p>功能说明： <base>标签为页面上的所有链接规定默认地址或默认目标。通常情况下，浏览器会从当前文档的 URL 中提取相应的元素来填写相对 URL 中的空白。</p><p>标准属性：href、target</p><p>href：设置或获取页面中所有链接在鼠标单击链接到的URL</p><p>target：设置或获取目标内容要显示于哪个窗口或框架</p><p>   _blank：在一个新的未命名的窗口载入文档</p><p>   _self：在相同的框架或窗口中载入目标文档</p><p>   _parent：把文档载入父窗口或包含了超链接引用的框架集</p><p>  _top：把文档载入包含该超链接的窗口，取代任何当前正在窗口中显示的框架</p><h4 id="body"><a href="#body" class="headerlink" title="body"></a>body</h4><blockquote><body>……</body></blockquote><p>功能说明：定义HTML文档的主体，body包含HTML文档的所有内容。</p><p>标准属性：id(元素唯一标识)、class(类名)、title(显示在工具提示中的文本)、style(行内样式定义)、dir(设置文本方向)、lang(设置语言码)、background(网页背景图像)、bgcolor(背景颜色)、text(设置文字颜色)、link(设置链接文字的颜色)、alink(设置链接时文字的颜色)、vlink(设置链接后文字的颜色)、leftmargin(左外边距)、topmargin(上外边距)、bgproperties(让背景图片不跟随网页滚动，它只有一个参数fixed)</p><h4 id="p"><a href="#p" class="headerlink" title="p"></a>p</h4><blockquote><p>……</p></blockquote><p>功能说明：定义一个文档的段落</p><p>标准属性：align、id、class、title、style、dir、lang</p><p>使用要点：使用p来换行，并分隔段落。p元素是块元素，需要关闭标签</p><h4 id="span"><a href="#span" class="headerlink" title="span"></a>span</h4><blockquote><p><span>……</span></p></blockquote><p>功能说明：用来组合文档中的内联元素</p><p>标准属性：align、id、class、title、style、dir、lang</p><h4 id="div"><a href="#div" class="headerlink" title="div"></a>div</h4><blockquote><div>……</div></blockquote><p>功能说明：定义文档中的分区或节</p><p>标准属性：align、id、class、title、style、dir、lang</p><p>使用要点：div元素是用来为HTML文档内大块的内容提供结构和背景元素</p><h4 id="br"><a href="#br" class="headerlink" title="br"></a>br</h4><blockquote><br></blockquote><p>功能说明：插入一个换行符</p><p>标准属性：id、class、title、style</p><h4 id="caption"><a href="#caption" class="headerlink" title="caption"></a>caption</h4><blockquote><caption>……</caption></blockquote><p>功能说明：定义一个表格标题</p><p>标准属性：align（对齐方式，包括left（左对齐）、right（右对齐）、top（顶端对齐）、bottom（底部对齐））、id、class、title、dir、lang</p><p>使用要点：caption元素应该是table元素的子对象，caption标签必须紧随table标签之后。只能对一个表格定义一个标题，通常标题居中于表格之上。</p><h4 id="col"><a href="#col" class="headerlink" title="col"></a>col</h4><blockquote><col></blockquote><p>功能说明：为表格定义列属性值，定义的对象可以包括表格中的一个或多个列</p><p>标准属性：id、class、title、style、dir、lang</p><p>可选属性：align（水平对齐方式，包括right（右对齐）、left（左对齐）、center（居中）、justify（两端对齐））</p><p>                 span（定义应当横跨的列数，默认值为1）</p><p>                 valign（垂直对齐方式，包括top(顶端对齐)、middle（垂直居中）、bottom(低端对齐)、baseline（基线对齐））  </p><p>                 width（定义列的宽度）</p><h4 id="colgroup"><a href="#colgroup" class="headerlink" title="colgroup"></a>colgroup</h4><p>功能说明：定义表格列的分组</p><p>标准属性：id、class、 title、style、dir、lang</p><p>可选属性：align、span（定义col应当横跨的列数，默认值为1）、valign、width</p><p>使用要点：只有在table标签内部才是合法的，可以对列进行组合来进行相应的格式化</p><h4 id="fieldset"><a href="#fieldset" class="headerlink" title="fieldset"></a>fieldset</h4><p>功能说明：将表单内的相关元素分组</p><p>标准属性：id、class、title、style、dir、lang</p><p>使用要点：在字段集包含的文本和其他元素外面绘制方框</p><h4 id="legend"><a href="#legend" class="headerlink" title="legend"></a>legend</h4><blockquote><legend>……</legend></blockquote><p>功能说明：可为fieldset定义一个标题</p><p>标准属性：id、class、title、style、dir、lang</p><p>使用要点：legend元素必须是fieldset内的第一个元素，此元素是内嵌元素，需要关闭标签</p><h4 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h4><blockquote><iframe>……</iframe></blockquote><p>标准属性：id、class、title、style</p><p>基本属性：name（定义内容页名称）、src（定义内容页URL）、frameborder（定义内容页的边框，取值为0/1，默认为1，0不显示边框，1在每个页面之间都显示边框）、marginwidth（定义框架中HTML文件显示的上下边界的宽度，默认值由浏览器决定）、marginheight（定义框架中HTML文件显示的左右边界的宽度，默认值由浏览器决定）、scrolling（定义是否有滚动条，取值yes/no/auto，默 认值auto）、align、height、width</p><p>使用要点：iframe元素的作用相当于在一个文档中嵌入另一个文档，或者像一个漂浮的frame，创建内嵌漂浮框架，在iframe内容源文档，background-color或body元素的bgcolor标签属性必须设置为transparent。此元素是块元素，需要关闭标签</p><h4 id="dd、dl、dt"><a href="#dd、dl、dt" class="headerlink" title="dd、dl、dt"></a>dd、dl、dt</h4><blockquote><dl>     <dt>……</dt>     <dd>……</dd>     <dt>……</dt>     <dd>……</dd>  </dl></blockquote><p>功能说明：dd定义在列表中的显示样式</p><p>                  dl定义列表的显示样式</p><p>                  dt定义列表中的项目</p><p>标准属性：id、class、title、style、dir、lang</p><p>使用要点：dd通常在列表中缩进显示，dd元素是块元素，需要关闭标签</p><p>                  dl元素是块元素，需要关闭标签</p><p>                  dt 元素是块元素，需要关闭标签</p><h4 id="h1……h6"><a href="#h1……h6" class="headerlink" title="h1……h6"></a>h1……h6</h4><blockquote><h1>……</h1>  <h2>……</h2>  <h3>……</h3>  <h4>……</h4>  <h5>……</h5>  <h6>……</h6></blockquote><p>功能说明：定义文章的标题</p><p>标准属性：align、id、class、title、style、dir、lang</p><p>使用要点：</p><h1>定义最大的标题，<h6>定义最小的标题，需要关闭标签<h4 id="html"><a href="#html" class="headerlink" title="html"></a>html</h4><blockquote><html>……</html></blockquote><p>功能说明：声明文档本身是一个HTML文档</p><p>标准属性：dir、lang</p><p>基本属性：common(一般属性)、xmlns(代表xml命名空间)、dir</p><h4 id="ins"><a href="#ins" class="headerlink" title="ins"></a>ins</h4><blockquote><p><ins>……</ins></p></blockquote><p>功能说明：定义文档中已被插入的文本</p><p>标准属性：id、class、title、style、dir、lang</p><p>使用要点：ins和del标签配合使用，用来描述文档中的更新和修正</p><h4 id="del"><a href="#del" class="headerlink" title="del"></a>del</h4><blockquote><p><del>……</del></p></blockquote><p>功能说明：定义文档中已被删除的文本</p><p>标准属性：id、class、title、style、dir、lang</p><h4 id="li"><a href="#li" class="headerlink" title="li"></a>li</h4><blockquote><li>……</li></blockquote><p>功能说明：定义一个列表项目</p><p>标准属性：id、class、title、style、dir、lang</p><p>使用要点：li标签可用在有序列表<ol>和无序列表<ul>中</p><h4 id="ol"><a href="#ol" class="headerlink" title="ol"></a>ol</h4><blockquote><ol>……</ol></blockquote><p>功能说明：定义有序列表</p><p>标准属性：id、class、title、style、dir、lang</p><h4 id="ul"><a href="#ul" class="headerlink" title="ul"></a>ul</h4><blockquote><ul>……</ul></blockquote><p>功能说明：定义无序列表</p><p>标准属性：id、class、title、style、dir、lang</p><h4 id="table"><a href="#table" class="headerlink" title="table"></a>table</h4><blockquote><table>……</table></blockquote><p>功能说明：定义表格的相关格式</p><p>标准属性：align、id、class、title、style、dir、lang</p><p>使用要点：用来显示数据，table是一个块元素，需要关闭标签</p><h4 id="th"><a href="#th" class="headerlink" title="th"></a>th</h4><blockquote><th>……</th></blockquote><p>功能说明：定义表格内的表头单元格</p><p>标准属性：id、class、title、style、dir、lang</p><p>基本属性：common、abbr（代表表头的简写）、axis（对单元格在概念上分类）、colspan（一行跨越多列）、headers（连接表格的数据与表头）、rowspan（一列跨多行）、scope（定义行或列的表头）、align、valign</p><p>使用要点：th元素内部的文本通常会呈现为粗体</p><h4 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h4><blockquote><tr>……</tr></blockquote><p>功能说明：在表格中定义一行</p><p>标准属性：id、class、title、style、dir、lang</p><p>基本属性：common、align、valign</p><h4 id="td"><a href="#td" class="headerlink" title="td"></a>td</h4><blockquote><td>……</td></blockquote><p>功能说明：定义表格中的一个单元格</p><p>标准属性：id、class、title、style、dir、lang</p><p>基本属性：common、abbr（代表表头的简写）、axis（对单元格在概念上分类）、colspan（一行跨越多列）、headers（连接表格的数据与表头）、rowspan（一列跨多行）、scope（定义行或列的表头）、align、valign</p>]]></content>
    
    
    <categories>
      
      <category>HTML与CSS</category>
      
      <category>教程</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
